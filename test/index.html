<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>ViziCities Tests</title>
    <link href="../node_modules/mocha/mocha.css" media="screen" rel="stylesheet" type="text/css" />
  </head>
  <body>
      <div id="mocha"></div>

      <!-- Testing Dependencies -->
      <script src="../node_modules/mocha/mocha.js"></script>
      <script src="../node_modules/chai/chai.js"></script>
      <script src="../node_modules/sinon/pkg/sinon.js"></script>
      <script src="../node_modules/sinon-chai/lib/sinon-chai.js"></script>
      <script>
        mocha.ui("bdd");
        mocha.reporter("html");
        expect = chai.expect;
        assert = chai.assert;

        // Detect WebGL support by the test runner.
        // This variable will be used in the spec tests.
        console.log("");
        var ViziTestsWebGLSupported = (function() {
          try {
            var canvas = document.createElement("canvas");
            var ctx = canvas.getContext("webgl") || canvas.getContext("experimental-webgl");
            var exts = ctx.getSupportedExtensions();
            return true;
          } catch (e) {
            console.error("Exception in WebGL detection:", e);
            return false;
          }
        })();
        console.log("WebGL supported for ViciCities tests:", ViziTestsWebGLSupported);
        console.log("");
      </script>

      <!-- ViziCities source files -->
      <script src="../build/vizi.js"></script>

      <!-- ViziCities tests -->    
      <script src="spec/Vizi.js"></script>

      <script src="spec/Core/EventEmitter.js"></script>
      <script src="spec/Core/Messenger.js"></script>
      <script src="spec/Core/Clock.js"></script>
      <script src="spec/Core/World.js"></script>
      <script src="spec/Core/Attribution.js"></script>

      <script src="spec/Controls/Controls.js"></script>
      <script src="spec/Controls/ControlsOrbit.js"></script>
      <script src="spec/Controls/ControlsMap.js"></script>
      <script src="spec/Controls/ControlsFirstPerson.js"></script>

      <script src="spec/Geometry/Point.js"></script>

      <script src="spec/Geo/LatLon.js"></script>
      <script src="spec/Geo/CRS.js"></script>
      <script src="spec/Geo/CRS.EPSG3857.js"></script>

      <script src="spec/WebGL/Renderer.js"></script>
      <script src="spec/WebGL/Scene.js"></script>
      <script src="spec/WebGL/Camera.js"></script>
      <script src="spec/WebGL/Layer.js"></script>

      <!-- Blueprint tests in general need improving -->
      <script src="spec/Blueprint/BlueprintInput.js"></script>
      <script src="spec/Blueprint/BlueprintInputMapTiles.js"></script>
      <script src="spec/Blueprint/BlueprintInputGeoJSON.js"></script>
      <script src="spec/Blueprint/BlueprintInputKML.js"></script>
      <script src="spec/Blueprint/BlueprintInputGPX.js"></script>

      <script src="spec/Blueprint/BlueprintHelperTileGrid.js"></script>

      <script src="spec/Blueprint/BlueprintOutput.js"></script>
      <script src="spec/Blueprint/BlueprintOutputImageTiles.js"></script>
      <script src="spec/Blueprint/BlueprintOutputBuildingTiles.js"></script>
      <script src="spec/Blueprint/BlueprintOutputChoropleth.js"></script>
      <script src="spec/Blueprint/BlueprintOutputDebugPoints.js"></script>
      <script src="spec/Blueprint/BlueprintOutputDebugLines.js"></script>
      <script src="spec/Blueprint/BlueprintOutputCollada.js"></script>

      <script src="spec/Blueprint/BlueprintSwitchboard.js"></script>

      <!-- Run Mocha -->
      <script>
        (window.mochaPhantomJS || window.mocha).run();
      </script>
  </body>
</html>