/*! ViziCities - v0.2.0 - 2014-11-27 */
if(void 0===typeof window)var VIZI;!function(){"use strict";var a={VERSION:"0.2.0",DEBUG:!1};console.log("═════════════════════════════════════════════════════════════"),console.log("██╗   ██╗██╗███████╗██╗ ██████╗██╗████████╗██╗███████╗███████╗"),console.log("██║   ██║██║╚══███╔╝██║██╔════╝██║╚══██╔══╝██║██╔════╝██╔════╝"),console.log("██║   ██║██║  ███╔╝ ██║██║     ██║   ██║   ██║█████╗  ███████╗"),console.log("╚██╗ ██╔╝██║ ███╔╝  ██║██║     ██║   ██║   ██║██╔══╝  ╚════██║"),console.log(" ╚████╔╝ ██║███████╗██║╚██████╗██║   ██║   ██║███████╗███████║"),console.log("  ╚═══╝  ╚═╝╚══════╝╚═╝ ╚═════╝╚═╝   ╚═╝   ╚═╝╚══════╝╚══════╝"),console.log("═══════════════════════════ "+a.VERSION+" ═══════════════════════════"),void 0===typeof window?window.VIZI=a:VIZI=a}(),function(){"use strict";var a=12756274,b=Math.PI*a,c=b/2;VIZI.CRS={code:void 0,tileSize:256,latLonToPoint:function(a,b,d){var e=this;d=d||{},_.defaults(d,{convert:!0,round:!1});var f,g=e.project(a),h=e.resolution(b);if(f=d.round===!0?new VIZI.Point(Math.round((g[0]+c)/h),Math.round((g[1]+c)/h)):new VIZI.Point((g[0]+c)/h,(g[1]+c)/h),d.convert!==!1){var i=e.tileSize<<b;f.y=i-f.y}return f},pointToLatLon:function(a,b){var d=this,e=d.resolution(b),f=d.tileSize<<b,g=new VIZI.Point(a.x*e-c,(f-a.y)*e-c),h=d.unproject(g);return new VIZI.LatLon(h[1],h[0])},tileBoundsLatLon:function(a,b){var c=this,d=c.pointToLatLon({x:a.x*c.tileSize,y:a.y*c.tileSize},b),e=c.pointToLatLon({x:(a.x+1)*c.tileSize,y:(a.y+1)*c.tileSize},b),f={n:d.lat,e:e.lon,s:e.lat,w:d.lon};return f},tileBoundsPoint:function(a,b){var c=this,d=c.pointToLatLon({x:a.x*c.tileSize,y:a.y*c.tileSize},b),e=c.pointToLatLon({x:(a.x+1)*c.tileSize,y:(a.y+1)*c.tileSize},b),f=c.latLonToPoint(d,b),g=c.latLonToPoint(e,b),h={n:Math.round(f.y),e:Math.round(g.x),s:Math.round(g.y),w:Math.round(f.x)};return h},pointToTile:function(a){var b=this,c=new VIZI.Point(Math.ceil(a.x/b.tileSize)-1,Math.ceil(a.y/b.tileSize)-1);return c},pointToTileTMS:function(a,b){var c=this,d=c.pointToTile(a);return c.convertTile(d,b)},latLonToTile:function(a,b){var c=this,d=c.latLonToPoint(a,b);return c.pointToTile(d)},latLonToTileTMS:function(a,b){var c=this,d=c.latLonToPoint(a,b,{convert:!1});return c.pointToTile(d)},tileToLatLon:function(a,b){var c=this,d=c.tileBoundsLatLon(a,b);return new VIZI.LatLon(d.s+(d.n-d.s)/2,d.w+(d.e-d.w)/2)},convertTile:function(a,b){return new VIZI.Point(a.x,Math.pow(2,b)-1-a.y)},project:function(a){var b=this;return proj4(b.code,[a.lon,a.lat])},unproject:function(a){var b=this;return proj4(b.code).inverse([a.x,a.y])},resolution:function(a){var c=this;return b/(c.tileSize*Math.pow(2,a))},distance:function(b,c){var d=.017453292519943295,e=Math.cos,f=b.lat*d,g=b.lon*d,h=c.lat*d,i=c.lon*d,j=a,k=h-f,l=i-g,m=(1-e(k)+(1-e(l))*e(f)*e(h))/2;return j*Math.asin(Math.sqrt(m))},metersPerDegree:function(a){var b=a.lat*Math.PI/180,c=111132.92,d=-559.82,e=1.175,f=-.0023,g=111412.84,h=-93.5,i=.118,j=c+d*Math.cos(2*b)+e*Math.cos(4*b)+f*Math.cos(6*b),k=g*Math.cos(b)+h*Math.cos(3*b)+i*Math.cos(5*b);return new VIZI.Point(Math.abs(k),Math.abs(j))},pixelsPerDegree:function(a,b){var c=this,d=c.latLonToPoint(a,b),e=c.latLonToPoint(new VIZI.LatLon(a.lat+1,a.lon+1),b);return new VIZI.Point(Math.abs(e.x-d.x),Math.abs(e.y-d.y))},pixelsPerMeter:function(a,b){var c=this,d=c.metersPerDegree(a),e=c.pixelsPerDegree(a,b);return new VIZI.Point(e.x/d.x,e.y/d.y)},altitudeToZoom:function(a){var b=19-Math.log2(.05*a);return 0>b?0:b>20?20:b}}}(),function(){"use strict";VIZI.CRS.EPSG3857=_.extend({},VIZI.CRS,{code:"EPSG:3857"}),VIZI.CRS.EPSG900913=_.extend({},VIZI.CRS.EPSG3857,{code:"EPSG:900913"})}(),function(){"use strict";VIZI.LatLon=function(a,b,c){var d=this;d.lat=a||0,d.lon=b||0,d.alt=c||0,a instanceof VIZI.LatLon?(d.lat=a.lat,d.lon=a.lon,d.alt=a.alt):_.isArray(a)&&(d.lat=a[0],d.lon=a[1],d.alt=a[2]||0)}}(),function(){"use strict";VIZI.Point=function(a,b,c){var d=this;d.x=a||0,d.y=b||0,d.z=c||0,a instanceof VIZI.Point?(d.x=a.x,d.y=a.y,d.z=a.z):_.isArray(a)&&(d.x=a[0],d.y=a[1],d.z=a[2]||0)},VIZI.Point.prototype.add=function(a){var b=this,c=new VIZI.Point(b.x+a.x,b.y+a.y,b.z+a.z);return c},VIZI.Point.prototype.subtract=function(a){var b=this,c=new VIZI.Point(b.x-a.x,b.y-a.y,b.z-a.z);return c}}();