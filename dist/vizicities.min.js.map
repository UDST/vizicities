{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","vizicities.min.js","webpack:/webpack/bootstrap 41f8aeda1be197d860f6","webpack:///src/vizicities.js","webpack:///src/World.js","webpack:///~/eventemitter3/index.js","webpack:///~/lodash.assign/index.js","webpack:///~/lodash.keys/index.js","webpack:///~/lodash.rest/index.js","webpack:///src/geo/CRS/index.js","webpack:///src/geo/CRS/CRS.EPSG3857.js","webpack:///src/geo/CRS/CRS.Earth.js","webpack:///src/geo/CRS/CRS.js","webpack:///src/geo/LatLon.js","webpack:///src/geo/Point.js","webpack:///src/util/wrapNum.js","webpack:///src/geo/projection/Projection.SphericalMercator.js","webpack:///src/util/Transformation.js","webpack:///src/geo/CRS/CRS.EPSG3395.js","webpack:///src/geo/projection/Projection.Mercator.js","webpack:///src/geo/CRS/CRS.EPSG4326.js","webpack:///src/geo/projection/Projection.LatLon.js","webpack:///src/geo/CRS/CRS.Simple.js","webpack:///src/geo/CRS/CRS.Proj4.js","webpack:///src/geo/projection/Projection.Proj4.js","webpack:/external \"proj4\"","webpack:///src/engine/Engine.js","webpack:/external \"THREE\"","webpack:///src/engine/Scene.js","webpack:///src/engine/Renderer.js","webpack:///src/engine/Camera.js","webpack:///src/controls/index.js","webpack:///src/controls/Controls.Orbit.js","webpack:///~/three-orbit-controls/index.js","webpack:///src/layer/environment/EnvironmentLayer.js","webpack:///src/layer/Layer.js","webpack:///src/layer/tile/GridLayer.js","webpack:///src/layer/tile/TileCache.js","webpack:///~/lru-cache/lib/lru-cache.js","webpack:///~/pseudomap/map.js","webpack:///~/process/browser.js","webpack:///~/pseudomap/pseudomap.js","webpack:///~/util/util.js","webpack:///~/util/support/isBufferBrowser.js","webpack:///~/inherits/inherits_browser.js","webpack:///~/yallist/yallist.js","webpack:///src/layer/tile/Tile.js","webpack:///src/vendor/BoxHelper.js","webpack:///src/layer/tile/GridBaseMaterial.js","webpack:///~/lodash.throttle/index.js","webpack:///~/lodash.throttle/~/lodash.debounce/index.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_22__","__WEBPACK_EXTERNAL_MODULE_24__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_World","_World2","_controlsIndex","_controlsIndex2","_layerEnvironmentEnvironmentLayer","_layerEnvironmentEnvironmentLayer2","_layerTileGridLayer","_layerTileGridLayer2","_geoPoint","_geoPoint2","_geoLatLon","_geoLatLon2","VIZI","version","World","Controls","EnvironmentLayer","GridLayer","Point","LatLon","_classCallCheck","instance","Constructor","TypeError","_inherits","subClass","superClass","prototype","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","_get","_x","_x2","_x3","_again","object","property","receiver","Function","desc","getOwnPropertyDescriptor","undefined","getter","get","parent","getPrototypeOf","_eventemitter3","_eventemitter32","_lodashAssign","_lodashAssign2","_geoCRSIndex","_geoCRSIndex2","_engineEngine","_engineEngine2","_EventEmitter","domId","options","defaults","crs","EPSG3857","_layers","_controls","_initContainer","_initEngine","_initEvents","_update","_container","document","getElementById","_engine","on","_onControlsMoveEnd","point","_point","x","z","_resetView","pointToLatLon","latlon","emit","_moveStart","_move","_moveEnd","_lastPosition","delta","clock","getDelta","window","requestAnimationFrame","bind","forEach","controls","update","_originLatlon","_originPoint","project","latLonToPoint","projectedPoint","_subtract","add","unproject","_camera","layer","_addToWorld","push","_scene","_layer","EE","fn","context","once","EventEmitter","prefix","_events","listeners","event","exists","evt","available","l","ee","Array","a1","a2","a3","a4","a5","args","len","arguments","removeListener","apply","j","listener","events","removeAllListeners","off","addListener","setMaxListeners","prefixed","isIndex","reIsUint","test","MAX_SAFE_INTEGER","assignValue","objValue","eq","objectProto","hasOwnProperty","baseProperty","copyObject","source","copyObjectWith","customizer","index","newValue","createAssigner","assigner","rest","sources","guard","isIterateeCall","isObject","type","isArrayLike","other","isFunction","isLength","getLength","tag","objectToString","funcTag","genTag","keys","toString","assign","baseTimes","n","iteratee","result","baseHas","baseKeys","nativeKeys","indexKeys","isArray","isString","isArguments","String","isPrototype","Ctor","proto","isArrayLikeObject","propertyIsEnumerable","argsTag","isObjectLike","stringTag","isProto","indexes","skipIndexes","func","thisArg","start","FUNC_ERROR_TEXT","nativeMax","toInteger","array","otherArgs","toNumber","INFINITY","sign","MAX_INTEGER","remainder","valueOf","replace","reTrim","isBinary","reIsBinary","reIsOctal","freeParseInt","slice","reIsBadHex","NAN","parseInt","Math","max","_CRSEPSG3857","_CRSEPSG38572","_CRSEPSG3395","_CRSEPSG33952","_CRSEPSG4326","_CRSEPSG43262","_CRSSimple","_CRSSimple2","_CRSProj4","_CRSProj42","CRS","EPSG900913","EPSG3395","EPSG4326","Simple","Proj4","_CRSEarth","_CRSEarth2","_projectionProjectionSphericalMercator","_projectionProjectionSphericalMercator2","_utilTransformation","_utilTransformation2","_EPSG3857","code","projection","transformScale","PI","R","transformation","scale","_CRS","_CRS2","_LatLon","Earth","wrapLon","distance","latlon1","latlon2","accurate","lat1","lat2","a","rad","lat","lon1","lon","lon2","deltaLat","deltaLon","halfDeltaLat","halfDeltaLon","sin","cos","atan2","sqrt","acos","min","pointScale","metresToProjected","metres","projectedToMetres","projectedUnits","metresToWorld","zoom","projectedMetres","scaledMetres","worldToMetres","worldUnits","realMetres","_LatLon2","_Point","_Point2","_utilWrapNum","_utilWrapNum2","scaleFactor","_transform","untransformedPoint","untransform","pow","log","LN2","getProjectedBounds","infinite","b","bounds","s","transform","wrapLatLon","wrapLat","alt","isNaN","Error","lng","y","round","clone","_add","wrapNum","range","includeMax","d","SphericalMercator","MAX_LATITUDE","ECC","ECC2","atan","exp","k","sinLat","sinLat2","cosLat","v","h","Transformation","_a","_b","_c","_d","_projectionProjectionMercator","_projectionProjectionMercator2","_EPSG3395","Mercator","R_MINOR","r","tmp","e","con","ts","tan","phi","dphi","abs","_projectionProjectionLatLon","_projectionProjectionLatLon2","_EPSG4326","ProjectionLatLon","m1","m2","m3","m4","p1","p2","p3","latlen","lonlen","_Simple","dx","dy","_projectionProjectionProj4","_projectionProjectionProj42","_Proj4","def","diffX","diffY","halfX","halfY","scaleX","scaleY","offsetX","offsetY","_proj4","_proj42","proj","forward","inverse","bottomLeft","topRight","_three","_three2","_Scene","_Scene2","_Renderer","_Renderer2","_Camera","_Camera2","Engine","container","console","_renderer","Clock","_frustum","Frustum","render","scene","Scene","fog","Fog","renderer","WebGLRenderer","antialias","setClearColor","color","gammaInput","gammaOutput","appendChild","domElement","updateSize","setSize","clientWidth","clientHeight","addEventListener","camera","PerspectiveCamera","position","aspect","updateProjectionMatrix","_ControlsOrbit","_ControlsOrbit2","Orbit","_threeOrbitControls","_threeOrbitControls2","_OrbitControls","_this","_world","center","animate","pointDelta","metresDelta","angle","angleDelta","noZoom","world","addControls","maxPolarAngle","THREE","OrbitConstraint","Vector3","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","theta","scope","EPS","phiDelta","thetaDelta","panOffset","zoomChanged","getPolarAngle","getAzimuthalAngle","rotateLeft","rotateUp","panLeft","te","matrix","elements","adjDist","set","normalize","multiplyScalar","panUp","pan","deltaX","deltaY","screenWidth","screenHeight","offset","sub","targetDistance","fov","OrthographicCamera","right","left","top","bottom","warn","dollyIn","dollyScale","dollyOut","quat","Quaternion","setFromUnitVectors","up","quatInverse","lastPosition","lastQuaternion","copy","applyQuaternion","radius","lookAt","distanceToSquared","dot","quaternion","OrbitControls","element","body","constraint","getAutoRotationAngle","autoRotateSpeed","getZoomScale","zoomSpeed","onMouseDown","enabled","preventDefault","button","mouseButtons","ORBIT","enableRotate","state","STATE","ROTATE","rotateStart","clientX","clientY","ZOOM","enableZoom","DOLLY","dollyStart","PAN","enablePan","panStart","NONE","onMouseMove","onMouseUp","dispatchEvent","startEvent","rotateEnd","rotateDelta","subVectors","rotateSpeed","dollyEnd","dollyDelta","panEnd","panDelta","removeEventListener","endEvent","onMouseWheel","stopPropagation","wheelDelta","detail","onKeyDown","enableKeys","keyCode","UP","keyPanSpeed","BOTTOM","LEFT","RIGHT","touchstart","touches","TOUCH_ROTATE","pageX","pageY","TOUCH_DOLLY","TOUCH_PAN","touchmove","touchend","contextmenu","autoRotate","MOUSE","MIDDLE","Vector2","target0","position0","zoom0","changeEvent","reset","dispose","EventDispatcher","noRotate","noPan","noKeys","staticMoving","dynamicDampingFactor","_Layer2","_Layer3","_Layer","_initLights","directionalLight","DirectionalLight","intesity","directionalLight2","helper","DirectionalLightHelper","helper2","size","step","gridHelper","GridHelper","_engineScene","Layer","Object3D","addLayer","_onAdd","_TileCache","_TileCache2","_GridBaseMaterial","_GridBaseMaterial2","_lodashThrottle","_lodashThrottle2","_tileCache","_minLOD","_maxLOD","geom","PlaneBufferGeometry","mesh","Mesh","rotation","_baseLayer","setTimeout","_calculateLOD","_this2","_moveBaseLayer","getCamera","projScreenMatrix","Matrix4","multiplyMatrices","projectionMatrix","matrixWorldInverse","setFromMatrix","tile","getBounds","intersectsBox","Box3","_this3","_stop","_updateFrustum","checkList","_checklist","requestTile","_divide","_removeTiles","_tileInFrustum","getMesh","isReady","requestTileAsync","currentItem","quadcode","count","getQuadcode","_screenSpaceError","splice","minDepth","maxDepth","quality","getCenter","dist","error","getSide","children","remove","_lruCache","_lruCache2","_Tile","_Tile2","TileCache","cacheLimit","_cache","priv","val","sym","symbols","makeSymbol","naiveLength","LRUCache","lc","stale","maxAge","forEachStep","self","node","thisp","hit","isStale","del","doUse","unshiftNode","diff","Date","now","trim","walker","tail","prev","removeNode","Entry","Map","util","Yallist","hasSymbol","Symbol","mL","allowStale","mA","lC","rforEach","head","next","toArray","map","values","dump","filter","dumpLru","inspect","opts","str","extras","as","didFirst","item","split","join","has","unshift","peek","pop","load","arr","expiresAt","prune","process","env","npm_package_name","npm_lifecycle_script","TEST_PSEUDOMAP","cleanUpNextTick","draining","currentQueue","queue","concat","queueIndex","drainQueue","timeout","run","clearTimeout","Item","fun","noop","nextTick","title","browser","argv","versions","binding","name","cwd","chdir","dir","umask","PseudoMap","clear","kv","same","_index","find","data","_data","res","entries","global","ctx","seen","stylize","stylizeNoColor","depth","colors","isBoolean","showHidden","_extend","isUndefined","customInspect","stylizeWithColor","formatValue","styleType","style","styles","arrayToHash","hash","idx","recurseTimes","ret","primitive","formatPrimitive","visibleKeys","getOwnPropertyNames","isError","indexOf","formatError","isRegExp","RegExp","isDate","base","braces","toUTCString","output","formatArray","formatProperty","reduceToSingleString","simple","JSON","stringify","isNumber","isNull","match","line","substr","numLinesEst","reduce","cur","ar","arg","isNullOrUndefined","isSymbol","re","isPrimitive","o","pad","timestamp","time","getHours","getMinutes","getSeconds","getDate","months","getMonth","prop","formatRegExp","format","f","objects","Number","_","deprecate","msg","deprecated","warned","throwDeprecation","traceDeprecation","trace","noDeprecation","debugEnviron","debugs","debuglog","NODE_DEBUG","toUpperCase","pid","bold","italic","underline","white","grey","black","blue","cyan","green","magenta","red","yellow","special","number","boolean","null","string","date","regexp","isBuffer","inherits","origin","fill","readUInt8","ctor","superCtor","super_","TempCtor","list","Node","pushNode","shift","forEachReverse","getReverse","mapReverse","initial","acc","reduceReverse","toArrayReverse","from","to","sliceReverse","reverse","_vendorBoxHelper","_vendorBoxHelper2","r2d","Tile","_quadcode","_ready","_tile","_quadcodeToTile","_boundsLatLon","_tileBoundsWGS84","_boundsWorld","_tileBoundsFromWGS84","_center","_boundsToCenter","_side","_getSide","imageProviders","_mesh","_createMesh","_requestTextureAsync","material","MeshBasicMaterial","depthWrite","localMesh","box","_createDebugMesh","canvas","createElement","width","height","getContext","font","fillStyle","fillText","texture","Texture","magFilter","LinearFilter","minFilter","LinearMipMapLinearFilter","anisotropy","needsUpdate","transparent","letter","fromCharCode","floor","random","url","image","_texture","crossOrigin","src","mask","q","boundsWGS84","sw","ne","_tile2lon","w","_tile2lat","BoxHelper","indices","Uint16Array","positions","Float32Array","geometry","BufferGeometry","setIndex","BufferAttribute","addAttribute","LineSegments","LineBasicMaterial","linewidth","setFromObject","isEmpty","attributes","computeBoundingSphere","colour","fillRect","throttle","wait","leading","trailing","debounce","maxWait","cancel","timeoutId","maxTimeoutId","lastCalled","trailingCall","complete","isCalled","delayed","remaining","stamp","flush","maxDelayed","debounced","leadingCall"],"mappings":"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","file":"vizicities.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"proj4\"), require(\"THREE\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"proj4\", \"THREE\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"VIZI\"] = factory(require(\"proj4\"), require(\"THREE\"));\n\telse\n\t\troot[\"VIZI\"] = factory(root[\"proj4\"], root[\"THREE\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_22__, __WEBPACK_EXTERNAL_MODULE_24__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"proj4\"), require(\"THREE\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"proj4\", \"THREE\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"VIZI\"] = factory(require(\"proj4\"), require(\"THREE\"));\n\telse\n\t\troot[\"VIZI\"] = factory(root[\"proj4\"], root[\"THREE\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_22__, __WEBPACK_EXTERNAL_MODULE_24__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _World = __webpack_require__(1);\n\t\n\tvar _World2 = _interopRequireDefault(_World);\n\t\n\tvar _controlsIndex = __webpack_require__(28);\n\t\n\tvar _controlsIndex2 = _interopRequireDefault(_controlsIndex);\n\t\n\tvar _layerEnvironmentEnvironmentLayer = __webpack_require__(31);\n\t\n\tvar _layerEnvironmentEnvironmentLayer2 = _interopRequireDefault(_layerEnvironmentEnvironmentLayer);\n\t\n\tvar _layerTileGridLayer = __webpack_require__(33);\n\t\n\tvar _layerTileGridLayer2 = _interopRequireDefault(_layerTileGridLayer);\n\t\n\tvar _geoPoint = __webpack_require__(11);\n\t\n\tvar _geoPoint2 = _interopRequireDefault(_geoPoint);\n\t\n\tvar _geoLatLon = __webpack_require__(10);\n\t\n\tvar _geoLatLon2 = _interopRequireDefault(_geoLatLon);\n\t\n\tvar VIZI = {\n\t  version: '0.3',\n\t\n\t  // Public API\n\t  World: _World2['default'],\n\t  Controls: _controlsIndex2['default'],\n\t  EnvironmentLayer: _layerEnvironmentEnvironmentLayer2['default'],\n\t  GridLayer: _layerTileGridLayer2['default'],\n\t  Point: _geoPoint2['default'],\n\t  LatLon: _geoLatLon2['default']\n\t};\n\t\n\texports['default'] = VIZI;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar _eventemitter3 = __webpack_require__(2);\n\t\n\tvar _eventemitter32 = _interopRequireDefault(_eventemitter3);\n\t\n\tvar _lodashAssign = __webpack_require__(3);\n\t\n\tvar _lodashAssign2 = _interopRequireDefault(_lodashAssign);\n\t\n\tvar _geoCRSIndex = __webpack_require__(6);\n\t\n\tvar _geoCRSIndex2 = _interopRequireDefault(_geoCRSIndex);\n\t\n\tvar _geoPoint = __webpack_require__(11);\n\t\n\tvar _geoPoint2 = _interopRequireDefault(_geoPoint);\n\t\n\tvar _geoLatLon = __webpack_require__(10);\n\t\n\tvar _geoLatLon2 = _interopRequireDefault(_geoLatLon);\n\t\n\tvar _engineEngine = __webpack_require__(23);\n\t\n\tvar _engineEngine2 = _interopRequireDefault(_engineEngine);\n\t\n\t// Pretty much any event someone using ViziCities would need will be emitted or\n\t// proxied by World (eg. render events, etc)\n\t\n\tvar World = (function (_EventEmitter) {\n\t  _inherits(World, _EventEmitter);\n\t\n\t  function World(domId, options) {\n\t    _classCallCheck(this, World);\n\t\n\t    _get(Object.getPrototypeOf(World.prototype), 'constructor', this).call(this);\n\t\n\t    var defaults = {\n\t      crs: _geoCRSIndex2['default'].EPSG3857\n\t    };\n\t\n\t    this.options = (0, _lodashAssign2['default'])(defaults, options);\n\t\n\t    this._layers = [];\n\t    this._controls = [];\n\t\n\t    this._initContainer(domId);\n\t    this._initEngine();\n\t    this._initEvents();\n\t\n\t    // Kick off the update and render loop\n\t    this._update();\n\t  }\n\t\n\t  // Initialise without requiring new keyword\n\t\n\t  _createClass(World, [{\n\t    key: '_initContainer',\n\t    value: function _initContainer(domId) {\n\t      this._container = document.getElementById(domId);\n\t    }\n\t  }, {\n\t    key: '_initEngine',\n\t    value: function _initEngine() {\n\t      this._engine = (0, _engineEngine2['default'])(this._container);\n\t\n\t      // Engine events\n\t      //\n\t      // Consider proxying these through events on World for public access\n\t      // this._engine.on('preRender', () => {});\n\t      // this._engine.on('postRender', () => {});\n\t    }\n\t  }, {\n\t    key: '_initEvents',\n\t    value: function _initEvents() {\n\t      this.on('controlsMoveEnd', this._onControlsMoveEnd);\n\t    }\n\t  }, {\n\t    key: '_onControlsMoveEnd',\n\t    value: function _onControlsMoveEnd(point) {\n\t      var _point = (0, _geoPoint2['default'])(point.x, point.z);\n\t      this._resetView(this.pointToLatLon(_point), _point);\n\t    }\n\t\n\t    // Reset world view\n\t  }, {\n\t    key: '_resetView',\n\t    value: function _resetView(latlon, point) {\n\t      this.emit('preResetView');\n\t\n\t      this._moveStart();\n\t      this._move(latlon, point);\n\t      this._moveEnd();\n\t\n\t      this.emit('postResetView');\n\t    }\n\t  }, {\n\t    key: '_moveStart',\n\t    value: function _moveStart() {\n\t      this.emit('moveStart');\n\t    }\n\t  }, {\n\t    key: '_move',\n\t    value: function _move(latlon, point) {\n\t      this._lastPosition = latlon;\n\t      this.emit('move', latlon, point);\n\t    }\n\t  }, {\n\t    key: '_moveEnd',\n\t    value: function _moveEnd() {\n\t      this.emit('moveEnd');\n\t    }\n\t  }, {\n\t    key: '_update',\n\t    value: function _update() {\n\t      var delta = this._engine.clock.getDelta();\n\t\n\t      // Once _update is called it will run forever, for now\n\t      window.requestAnimationFrame(this._update.bind(this));\n\t\n\t      // Update controls\n\t      this._controls.forEach(function (controls) {\n\t        controls.update();\n\t      });\n\t\n\t      this.emit('preUpdate');\n\t      this._engine.update(delta);\n\t      this.emit('postUpdate');\n\t    }\n\t\n\t    // Set world view\n\t  }, {\n\t    key: 'setView',\n\t    value: function setView(latlon) {\n\t      // Store initial geographic coordinate for the [0,0,0] world position\n\t      //\n\t      // The origin point doesn't move in three.js / 3D space so only set it once\n\t      // here instead of every time _resetView is called\n\t      //\n\t      // If it was updated every time then coorindates would shift over time and\n\t      // would be out of place / context with previously-placed points (0,0 would\n\t      // refer to a different point each time)\n\t      this._originLatlon = latlon;\n\t      this._originPoint = this.project(latlon);\n\t\n\t      this._resetView(latlon);\n\t      return this;\n\t    }\n\t\n\t    // Return world geographic position\n\t  }, {\n\t    key: 'getPosition',\n\t    value: function getPosition() {\n\t      return this._lastPosition;\n\t    }\n\t\n\t    // Transform geographic coordinate to world point\n\t    //\n\t    // This doesn't take into account the origin offset\n\t    //\n\t    // For example, this takes a geographic coordinate and returns a point\n\t    // relative to the origin point of the projection (not the world)\n\t  }, {\n\t    key: 'project',\n\t    value: function project(latlon) {\n\t      return this.options.crs.latLonToPoint((0, _geoLatLon2['default'])(latlon));\n\t    }\n\t\n\t    // Transform world point to geographic coordinate\n\t    //\n\t    // This doesn't take into account the origin offset\n\t    //\n\t    // For example, this takes a point relative to the origin point of the\n\t    // projection (not the world) and returns a geographic coordinate\n\t  }, {\n\t    key: 'unproject',\n\t    value: function unproject(point) {\n\t      return this.options.crs.pointToLatLon((0, _geoPoint2['default'])(point));\n\t    }\n\t\n\t    // Takes into account the origin offset\n\t    //\n\t    // For example, this takes a geographic coordinate and returns a point\n\t    // relative to the three.js / 3D origin (0,0)\n\t  }, {\n\t    key: 'latLonToPoint',\n\t    value: function latLonToPoint(latlon) {\n\t      var projectedPoint = this.project((0, _geoLatLon2['default'])(latlon));\n\t      return projectedPoint._subtract(this._originPoint);\n\t    }\n\t\n\t    // Takes into account the origin offset\n\t    //\n\t    // For example, this takes a point relative to the three.js / 3D origin (0,0)\n\t    // and returns the exact geographic coordinate at that point\n\t  }, {\n\t    key: 'pointToLatLon',\n\t    value: function pointToLatLon(point) {\n\t      var projectedPoint = (0, _geoPoint2['default'])(point).add(this._originPoint);\n\t      return this.unproject(projectedPoint);\n\t    }\n\t\n\t    // Unsure if it's a good idea to expose this here for components like\n\t    // GridLayer to use (eg. to keep track of a frustum)\n\t  }, {\n\t    key: 'getCamera',\n\t    value: function getCamera() {\n\t      return this._engine._camera;\n\t    }\n\t  }, {\n\t    key: 'addLayer',\n\t    value: function addLayer(layer) {\n\t      layer._addToWorld(this);\n\t\n\t      this._layers.push(layer);\n\t\n\t      // Could move this into Layer but it'll do here for now\n\t      this._engine._scene.add(layer._layer);\n\t\n\t      this.emit('layerAdded', layer);\n\t      return this;\n\t    }\n\t\n\t    // Remove layer and perform clean up operations\n\t  }, {\n\t    key: 'removeLayer',\n\t    value: function removeLayer(layer) {}\n\t  }, {\n\t    key: 'addControls',\n\t    value: function addControls(controls) {\n\t      controls._addToWorld(this);\n\t\n\t      this._controls.push(controls);\n\t\n\t      this.emit('controlsAdded', controls);\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'removeControls',\n\t    value: function removeControls(controls) {}\n\t  }]);\n\t\n\t  return World;\n\t})(_eventemitter32['default']);\n\t\n\texports['default'] = function (domId, options) {\n\t  return new World(domId, options);\n\t};\n\t\n\t;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t//\n\t// We store our EE objects in a plain object whose properties are event names.\n\t// If `Object.create(null)` is not supported we prefix the event names with a\n\t// `~` to make sure that the built-in object properties are not overridden or\n\t// used as an attack vector.\n\t// We also assume that `Object.create(null)` is available when the event name\n\t// is an ES6 Symbol.\n\t//\n\tvar prefix = typeof Object.create !== 'function' ? '~' : false;\n\t\n\t/**\n\t * Representation of a single EventEmitter function.\n\t *\n\t * @param {Function} fn Event handler to be called.\n\t * @param {Mixed} context Context for function execution.\n\t * @param {Boolean} once Only emit once\n\t * @api private\n\t */\n\tfunction EE(fn, context, once) {\n\t  this.fn = fn;\n\t  this.context = context;\n\t  this.once = once || false;\n\t}\n\t\n\t/**\n\t * Minimal EventEmitter interface that is molded against the Node.js\n\t * EventEmitter interface.\n\t *\n\t * @constructor\n\t * @api public\n\t */\n\tfunction EventEmitter() { /* Nothing to set */ }\n\t\n\t/**\n\t * Holds the assigned EventEmitters by name.\n\t *\n\t * @type {Object}\n\t * @private\n\t */\n\tEventEmitter.prototype._events = undefined;\n\t\n\t/**\n\t * Return a list of assigned event listeners.\n\t *\n\t * @param {String} event The events that should be listed.\n\t * @param {Boolean} exists We only need to know if there are listeners.\n\t * @returns {Array|Boolean}\n\t * @api public\n\t */\n\tEventEmitter.prototype.listeners = function listeners(event, exists) {\n\t  var evt = prefix ? prefix + event : event\n\t    , available = this._events && this._events[evt];\n\t\n\t  if (exists) return !!available;\n\t  if (!available) return [];\n\t  if (available.fn) return [available.fn];\n\t\n\t  for (var i = 0, l = available.length, ee = new Array(l); i < l; i++) {\n\t    ee[i] = available[i].fn;\n\t  }\n\t\n\t  return ee;\n\t};\n\t\n\t/**\n\t * Emit an event to all registered event listeners.\n\t *\n\t * @param {String} event The name of the event.\n\t * @returns {Boolean} Indication if we've emitted an event.\n\t * @api public\n\t */\n\tEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n\t  var evt = prefix ? prefix + event : event;\n\t\n\t  if (!this._events || !this._events[evt]) return false;\n\t\n\t  var listeners = this._events[evt]\n\t    , len = arguments.length\n\t    , args\n\t    , i;\n\t\n\t  if ('function' === typeof listeners.fn) {\n\t    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\t\n\t    switch (len) {\n\t      case 1: return listeners.fn.call(listeners.context), true;\n\t      case 2: return listeners.fn.call(listeners.context, a1), true;\n\t      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n\t      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n\t      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n\t      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n\t    }\n\t\n\t    for (i = 1, args = new Array(len -1); i < len; i++) {\n\t      args[i - 1] = arguments[i];\n\t    }\n\t\n\t    listeners.fn.apply(listeners.context, args);\n\t  } else {\n\t    var length = listeners.length\n\t      , j;\n\t\n\t    for (i = 0; i < length; i++) {\n\t      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\t\n\t      switch (len) {\n\t        case 1: listeners[i].fn.call(listeners[i].context); break;\n\t        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n\t        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n\t        default:\n\t          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n\t            args[j - 1] = arguments[j];\n\t          }\n\t\n\t          listeners[i].fn.apply(listeners[i].context, args);\n\t      }\n\t    }\n\t  }\n\t\n\t  return true;\n\t};\n\t\n\t/**\n\t * Register a new EventListener for the given event.\n\t *\n\t * @param {String} event Name of the event.\n\t * @param {Functon} fn Callback function.\n\t * @param {Mixed} context The context of the function.\n\t * @api public\n\t */\n\tEventEmitter.prototype.on = function on(event, fn, context) {\n\t  var listener = new EE(fn, context || this)\n\t    , evt = prefix ? prefix + event : event;\n\t\n\t  if (!this._events) this._events = prefix ? {} : Object.create(null);\n\t  if (!this._events[evt]) this._events[evt] = listener;\n\t  else {\n\t    if (!this._events[evt].fn) this._events[evt].push(listener);\n\t    else this._events[evt] = [\n\t      this._events[evt], listener\n\t    ];\n\t  }\n\t\n\t  return this;\n\t};\n\t\n\t/**\n\t * Add an EventListener that's only called once.\n\t *\n\t * @param {String} event Name of the event.\n\t * @param {Function} fn Callback function.\n\t * @param {Mixed} context The context of the function.\n\t * @api public\n\t */\n\tEventEmitter.prototype.once = function once(event, fn, context) {\n\t  var listener = new EE(fn, context || this, true)\n\t    , evt = prefix ? prefix + event : event;\n\t\n\t  if (!this._events) this._events = prefix ? {} : Object.create(null);\n\t  if (!this._events[evt]) this._events[evt] = listener;\n\t  else {\n\t    if (!this._events[evt].fn) this._events[evt].push(listener);\n\t    else this._events[evt] = [\n\t      this._events[evt], listener\n\t    ];\n\t  }\n\t\n\t  return this;\n\t};\n\t\n\t/**\n\t * Remove event listeners.\n\t *\n\t * @param {String} event The event we want to remove.\n\t * @param {Function} fn The listener that we need to find.\n\t * @param {Mixed} context Only remove listeners matching this context.\n\t * @param {Boolean} once Only remove once listeners.\n\t * @api public\n\t */\n\tEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n\t  var evt = prefix ? prefix + event : event;\n\t\n\t  if (!this._events || !this._events[evt]) return this;\n\t\n\t  var listeners = this._events[evt]\n\t    , events = [];\n\t\n\t  if (fn) {\n\t    if (listeners.fn) {\n\t      if (\n\t           listeners.fn !== fn\n\t        || (once && !listeners.once)\n\t        || (context && listeners.context !== context)\n\t      ) {\n\t        events.push(listeners);\n\t      }\n\t    } else {\n\t      for (var i = 0, length = listeners.length; i < length; i++) {\n\t        if (\n\t             listeners[i].fn !== fn\n\t          || (once && !listeners[i].once)\n\t          || (context && listeners[i].context !== context)\n\t        ) {\n\t          events.push(listeners[i]);\n\t        }\n\t      }\n\t    }\n\t  }\n\t\n\t  //\n\t  // Reset the array, or remove it completely if we have no more listeners.\n\t  //\n\t  if (events.length) {\n\t    this._events[evt] = events.length === 1 ? events[0] : events;\n\t  } else {\n\t    delete this._events[evt];\n\t  }\n\t\n\t  return this;\n\t};\n\t\n\t/**\n\t * Remove all listeners or only the listeners for the specified event.\n\t *\n\t * @param {String} event The event want to remove all listeners for.\n\t * @api public\n\t */\n\tEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n\t  if (!this._events) return this;\n\t\n\t  if (event) delete this._events[prefix ? prefix + event : event];\n\t  else this._events = prefix ? {} : Object.create(null);\n\t\n\t  return this;\n\t};\n\t\n\t//\n\t// Alias methods names because people roll like that.\n\t//\n\tEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\tEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\t\n\t//\n\t// This function doesn't apply anymore.\n\t//\n\tEventEmitter.prototype.setMaxListeners = function setMaxListeners() {\n\t  return this;\n\t};\n\t\n\t//\n\t// Expose the prefix.\n\t//\n\tEventEmitter.prefixed = prefix;\n\t\n\t//\n\t// Expose the module.\n\t//\n\tif (true) {\n\t  module.exports = EventEmitter;\n\t}\n\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\n\t * lodash 4.0.2 (Custom Build) <https://lodash.com/>\n\t * Build: `lodash modularize exports=\"npm\" -o ./`\n\t * Copyright 2012-2016 The Dojo Foundation <http://dojofoundation.org/>\n\t * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n\t * Copyright 2009-2016 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n\t * Available under MIT license <https://lodash.com/license>\n\t */\n\tvar keys = __webpack_require__(4),\n\t    rest = __webpack_require__(5);\n\t\n\t/** Used as references for various `Number` constants. */\n\tvar MAX_SAFE_INTEGER = 9007199254740991;\n\t\n\t/** `Object#toString` result references. */\n\tvar funcTag = '[object Function]',\n\t    genTag = '[object GeneratorFunction]';\n\t\n\t/** Used to detect unsigned integer values. */\n\tvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\t\n\t/**\n\t * Checks if `value` is a valid array-like index.\n\t *\n\t * @private\n\t * @param {*} value The value to check.\n\t * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n\t * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n\t */\n\tfunction isIndex(value, length) {\n\t  value = (typeof value == 'number' || reIsUint.test(value)) ? +value : -1;\n\t  length = length == null ? MAX_SAFE_INTEGER : length;\n\t  return value > -1 && value % 1 == 0 && value < length;\n\t}\n\t\n\t/** Used for built-in method references. */\n\tvar objectProto = Object.prototype;\n\t\n\t/** Used to check objects for own properties. */\n\tvar hasOwnProperty = objectProto.hasOwnProperty;\n\t\n\t/**\n\t * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n\t * of values.\n\t */\n\tvar objectToString = objectProto.toString;\n\t\n\t/**\n\t * Assigns `value` to `key` of `object` if the existing value is not equivalent\n\t * using [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n\t * for equality comparisons.\n\t *\n\t * @private\n\t * @param {Object} object The object to modify.\n\t * @param {string} key The key of the property to assign.\n\t * @param {*} value The value to assign.\n\t */\n\tfunction assignValue(object, key, value) {\n\t  var objValue = object[key];\n\t  if ((!eq(objValue, value) ||\n\t        (eq(objValue, objectProto[key]) && !hasOwnProperty.call(object, key))) ||\n\t      (value === undefined && !(key in object))) {\n\t    object[key] = value;\n\t  }\n\t}\n\t\n\t/**\n\t * The base implementation of `_.property` without support for deep paths.\n\t *\n\t * @private\n\t * @param {string} key The key of the property to get.\n\t * @returns {Function} Returns the new function.\n\t */\n\tfunction baseProperty(key) {\n\t  return function(object) {\n\t    return object == null ? undefined : object[key];\n\t  };\n\t}\n\t\n\t/**\n\t * Copies properties of `source` to `object`.\n\t *\n\t * @private\n\t * @param {Object} source The object to copy properties from.\n\t * @param {Array} props The property names to copy.\n\t * @param {Object} [object={}] The object to copy properties to.\n\t * @returns {Object} Returns `object`.\n\t */\n\tfunction copyObject(source, props, object) {\n\t  return copyObjectWith(source, props, object);\n\t}\n\t\n\t/**\n\t * This function is like `copyObject` except that it accepts a function to\n\t * customize copied values.\n\t *\n\t * @private\n\t * @param {Object} source The object to copy properties from.\n\t * @param {Array} props The property names to copy.\n\t * @param {Object} [object={}] The object to copy properties to.\n\t * @param {Function} [customizer] The function to customize copied values.\n\t * @returns {Object} Returns `object`.\n\t */\n\tfunction copyObjectWith(source, props, object, customizer) {\n\t  object || (object = {});\n\t\n\t  var index = -1,\n\t      length = props.length;\n\t\n\t  while (++index < length) {\n\t    var key = props[index],\n\t        newValue = customizer ? customizer(object[key], source[key], key, object, source) : source[key];\n\t\n\t    assignValue(object, key, newValue);\n\t  }\n\t  return object;\n\t}\n\t\n\t/**\n\t * Creates a function like `_.assign`.\n\t *\n\t * @private\n\t * @param {Function} assigner The function to assign values.\n\t * @returns {Function} Returns the new assigner function.\n\t */\n\tfunction createAssigner(assigner) {\n\t  return rest(function(object, sources) {\n\t    var index = -1,\n\t        length = sources.length,\n\t        customizer = length > 1 ? sources[length - 1] : undefined,\n\t        guard = length > 2 ? sources[2] : undefined;\n\t\n\t    customizer = typeof customizer == 'function' ? (length--, customizer) : undefined;\n\t    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n\t      customizer = length < 3 ? undefined : customizer;\n\t      length = 1;\n\t    }\n\t    object = Object(object);\n\t    while (++index < length) {\n\t      var source = sources[index];\n\t      if (source) {\n\t        assigner(object, source, index, customizer);\n\t      }\n\t    }\n\t    return object;\n\t  });\n\t}\n\t\n\t/**\n\t * Gets the \"length\" property value of `object`.\n\t *\n\t * **Note:** This function is used to avoid a [JIT bug](https://bugs.webkit.org/show_bug.cgi?id=142792)\n\t * that affects Safari on at least iOS 8.1-8.3 ARM64.\n\t *\n\t * @private\n\t * @param {Object} object The object to query.\n\t * @returns {*} Returns the \"length\" value.\n\t */\n\tvar getLength = baseProperty('length');\n\t\n\t/**\n\t * Checks if the provided arguments are from an iteratee call.\n\t *\n\t * @private\n\t * @param {*} value The potential iteratee value argument.\n\t * @param {*} index The potential iteratee index or key argument.\n\t * @param {*} object The potential iteratee object argument.\n\t * @returns {boolean} Returns `true` if the arguments are from an iteratee call, else `false`.\n\t */\n\tfunction isIterateeCall(value, index, object) {\n\t  if (!isObject(object)) {\n\t    return false;\n\t  }\n\t  var type = typeof index;\n\t  if (type == 'number'\n\t      ? (isArrayLike(object) && isIndex(index, object.length))\n\t      : (type == 'string' && index in object)) {\n\t    return eq(object[index], value);\n\t  }\n\t  return false;\n\t}\n\t\n\t/**\n\t * Performs a [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n\t * comparison between two values to determine if they are equivalent.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @category Lang\n\t * @param {*} value The value to compare.\n\t * @param {*} other The other value to compare.\n\t * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n\t * @example\n\t *\n\t * var object = { 'user': 'fred' };\n\t * var other = { 'user': 'fred' };\n\t *\n\t * _.eq(object, object);\n\t * // => true\n\t *\n\t * _.eq(object, other);\n\t * // => false\n\t *\n\t * _.eq('a', 'a');\n\t * // => true\n\t *\n\t * _.eq('a', Object('a'));\n\t * // => false\n\t *\n\t * _.eq(NaN, NaN);\n\t * // => true\n\t */\n\tfunction eq(value, other) {\n\t  return value === other || (value !== value && other !== other);\n\t}\n\t\n\t/**\n\t * Checks if `value` is array-like. A value is considered array-like if it's\n\t * not a function and has a `value.length` that's an integer greater than or\n\t * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @type Function\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n\t * @example\n\t *\n\t * _.isArrayLike([1, 2, 3]);\n\t * // => true\n\t *\n\t * _.isArrayLike(document.body.children);\n\t * // => true\n\t *\n\t * _.isArrayLike('abc');\n\t * // => true\n\t *\n\t * _.isArrayLike(_.noop);\n\t * // => false\n\t */\n\tfunction isArrayLike(value) {\n\t  return value != null &&\n\t    !(typeof value == 'function' && isFunction(value)) && isLength(getLength(value));\n\t}\n\t\n\t/**\n\t * Checks if `value` is classified as a `Function` object.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n\t * @example\n\t *\n\t * _.isFunction(_);\n\t * // => true\n\t *\n\t * _.isFunction(/abc/);\n\t * // => false\n\t */\n\tfunction isFunction(value) {\n\t  // The use of `Object#toString` avoids issues with the `typeof` operator\n\t  // in Safari 8 which returns 'object' for typed array constructors, and\n\t  // PhantomJS 1.9 which returns 'function' for `NodeList` instances.\n\t  var tag = isObject(value) ? objectToString.call(value) : '';\n\t  return tag == funcTag || tag == genTag;\n\t}\n\t\n\t/**\n\t * Checks if `value` is a valid array-like length.\n\t *\n\t * **Note:** This function is loosely based on [`ToLength`](http://ecma-international.org/ecma-262/6.0/#sec-tolength).\n\t *\n\t * @static\n\t * @memberOf _\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n\t * @example\n\t *\n\t * _.isLength(3);\n\t * // => true\n\t *\n\t * _.isLength(Number.MIN_VALUE);\n\t * // => false\n\t *\n\t * _.isLength(Infinity);\n\t * // => false\n\t *\n\t * _.isLength('3');\n\t * // => false\n\t */\n\tfunction isLength(value) {\n\t  return typeof value == 'number' && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n\t}\n\t\n\t/**\n\t * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.\n\t * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n\t *\n\t * @static\n\t * @memberOf _\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n\t * @example\n\t *\n\t * _.isObject({});\n\t * // => true\n\t *\n\t * _.isObject([1, 2, 3]);\n\t * // => true\n\t *\n\t * _.isObject(_.noop);\n\t * // => true\n\t *\n\t * _.isObject(null);\n\t * // => false\n\t */\n\tfunction isObject(value) {\n\t  var type = typeof value;\n\t  return !!value && (type == 'object' || type == 'function');\n\t}\n\t\n\t/**\n\t * Assigns own enumerable properties of source objects to the destination\n\t * object. Source objects are applied from left to right. Subsequent sources\n\t * overwrite property assignments of previous sources.\n\t *\n\t * **Note:** This method mutates `object` and is loosely based on\n\t * [`Object.assign`](https://mdn.io/Object/assign).\n\t *\n\t * @static\n\t * @memberOf _\n\t * @category Object\n\t * @param {Object} object The destination object.\n\t * @param {...Object} [sources] The source objects.\n\t * @returns {Object} Returns `object`.\n\t * @example\n\t *\n\t * function Foo() {\n\t *   this.c = 3;\n\t * }\n\t *\n\t * function Bar() {\n\t *   this.e = 5;\n\t * }\n\t *\n\t * Foo.prototype.d = 4;\n\t * Bar.prototype.f = 6;\n\t *\n\t * _.assign({ 'a': 1 }, new Foo, new Bar);\n\t * // => { 'a': 1, 'c': 3, 'e': 5 }\n\t */\n\tvar assign = createAssigner(function(object, source) {\n\t  copyObject(source, keys(source), object);\n\t});\n\t\n\tmodule.exports = assign;\n\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t/**\n\t * lodash 4.0.2 (Custom Build) <https://lodash.com/>\n\t * Build: `lodash modularize exports=\"npm\" -o ./`\n\t * Copyright 2012-2016 The Dojo Foundation <http://dojofoundation.org/>\n\t * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n\t * Copyright 2009-2016 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n\t * Available under MIT license <https://lodash.com/license>\n\t */\n\t\n\t/** Used as references for various `Number` constants. */\n\tvar MAX_SAFE_INTEGER = 9007199254740991;\n\t\n\t/** `Object#toString` result references. */\n\tvar argsTag = '[object Arguments]',\n\t    funcTag = '[object Function]',\n\t    genTag = '[object GeneratorFunction]',\n\t    stringTag = '[object String]';\n\t\n\t/** Used to detect unsigned integer values. */\n\tvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\t\n\t/**\n\t * The base implementation of `_.times` without support for iteratee shorthands\n\t * or max array length checks.\n\t *\n\t * @private\n\t * @param {number} n The number of times to invoke `iteratee`.\n\t * @param {Function} iteratee The function invoked per iteration.\n\t * @returns {Array} Returns the array of results.\n\t */\n\tfunction baseTimes(n, iteratee) {\n\t  var index = -1,\n\t      result = Array(n);\n\t\n\t  while (++index < n) {\n\t    result[index] = iteratee(index);\n\t  }\n\t  return result;\n\t}\n\t\n\t/**\n\t * Checks if `value` is a valid array-like index.\n\t *\n\t * @private\n\t * @param {*} value The value to check.\n\t * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n\t * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n\t */\n\tfunction isIndex(value, length) {\n\t  value = (typeof value == 'number' || reIsUint.test(value)) ? +value : -1;\n\t  length = length == null ? MAX_SAFE_INTEGER : length;\n\t  return value > -1 && value % 1 == 0 && value < length;\n\t}\n\t\n\t/** Used for built-in method references. */\n\tvar objectProto = Object.prototype;\n\t\n\t/** Used to check objects for own properties. */\n\tvar hasOwnProperty = objectProto.hasOwnProperty;\n\t\n\t/**\n\t * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n\t * of values.\n\t */\n\tvar objectToString = objectProto.toString;\n\t\n\t/** Built-in value references. */\n\tvar getPrototypeOf = Object.getPrototypeOf,\n\t    propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\t\n\t/* Built-in method references for those with the same name as other `lodash` methods. */\n\tvar nativeKeys = Object.keys;\n\t\n\t/**\n\t * The base implementation of `_.has` without support for deep paths.\n\t *\n\t * @private\n\t * @param {Object} object The object to query.\n\t * @param {Array|string} key The key to check.\n\t * @returns {boolean} Returns `true` if `key` exists, else `false`.\n\t */\n\tfunction baseHas(object, key) {\n\t  // Avoid a bug in IE 10-11 where objects with a [[Prototype]] of `null`,\n\t  // that are composed entirely of index properties, return `false` for\n\t  // `hasOwnProperty` checks of them.\n\t  return hasOwnProperty.call(object, key) ||\n\t    (typeof object == 'object' && key in object && getPrototypeOf(object) === null);\n\t}\n\t\n\t/**\n\t * The base implementation of `_.keys` which doesn't skip the constructor\n\t * property of prototypes or treat sparse arrays as dense.\n\t *\n\t * @private\n\t * @type Function\n\t * @param {Object} object The object to query.\n\t * @returns {Array} Returns the array of property names.\n\t */\n\tfunction baseKeys(object) {\n\t  return nativeKeys(Object(object));\n\t}\n\t\n\t/**\n\t * The base implementation of `_.property` without support for deep paths.\n\t *\n\t * @private\n\t * @param {string} key The key of the property to get.\n\t * @returns {Function} Returns the new function.\n\t */\n\tfunction baseProperty(key) {\n\t  return function(object) {\n\t    return object == null ? undefined : object[key];\n\t  };\n\t}\n\t\n\t/**\n\t * Gets the \"length\" property value of `object`.\n\t *\n\t * **Note:** This function is used to avoid a [JIT bug](https://bugs.webkit.org/show_bug.cgi?id=142792)\n\t * that affects Safari on at least iOS 8.1-8.3 ARM64.\n\t *\n\t * @private\n\t * @param {Object} object The object to query.\n\t * @returns {*} Returns the \"length\" value.\n\t */\n\tvar getLength = baseProperty('length');\n\t\n\t/**\n\t * Creates an array of index keys for `object` values of arrays,\n\t * `arguments` objects, and strings, otherwise `null` is returned.\n\t *\n\t * @private\n\t * @param {Object} object The object to query.\n\t * @returns {Array|null} Returns index keys, else `null`.\n\t */\n\tfunction indexKeys(object) {\n\t  var length = object ? object.length : undefined;\n\t  if (isLength(length) &&\n\t      (isArray(object) || isString(object) || isArguments(object))) {\n\t    return baseTimes(length, String);\n\t  }\n\t  return null;\n\t}\n\t\n\t/**\n\t * Checks if `value` is likely a prototype object.\n\t *\n\t * @private\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n\t */\n\tfunction isPrototype(value) {\n\t  var Ctor = value && value.constructor,\n\t      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\t\n\t  return value === proto;\n\t}\n\t\n\t/**\n\t * Checks if `value` is likely an `arguments` object.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n\t * @example\n\t *\n\t * _.isArguments(function() { return arguments; }());\n\t * // => true\n\t *\n\t * _.isArguments([1, 2, 3]);\n\t * // => false\n\t */\n\tfunction isArguments(value) {\n\t  // Safari 8.1 incorrectly makes `arguments.callee` enumerable in strict mode.\n\t  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n\t    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n\t}\n\t\n\t/**\n\t * Checks if `value` is classified as an `Array` object.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @type Function\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n\t * @example\n\t *\n\t * _.isArray([1, 2, 3]);\n\t * // => true\n\t *\n\t * _.isArray(document.body.children);\n\t * // => false\n\t *\n\t * _.isArray('abc');\n\t * // => false\n\t *\n\t * _.isArray(_.noop);\n\t * // => false\n\t */\n\tvar isArray = Array.isArray;\n\t\n\t/**\n\t * Checks if `value` is array-like. A value is considered array-like if it's\n\t * not a function and has a `value.length` that's an integer greater than or\n\t * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @type Function\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n\t * @example\n\t *\n\t * _.isArrayLike([1, 2, 3]);\n\t * // => true\n\t *\n\t * _.isArrayLike(document.body.children);\n\t * // => true\n\t *\n\t * _.isArrayLike('abc');\n\t * // => true\n\t *\n\t * _.isArrayLike(_.noop);\n\t * // => false\n\t */\n\tfunction isArrayLike(value) {\n\t  return value != null &&\n\t    !(typeof value == 'function' && isFunction(value)) && isLength(getLength(value));\n\t}\n\t\n\t/**\n\t * This method is like `_.isArrayLike` except that it also checks if `value`\n\t * is an object.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @type Function\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is an array-like object, else `false`.\n\t * @example\n\t *\n\t * _.isArrayLikeObject([1, 2, 3]);\n\t * // => true\n\t *\n\t * _.isArrayLikeObject(document.body.children);\n\t * // => true\n\t *\n\t * _.isArrayLikeObject('abc');\n\t * // => false\n\t *\n\t * _.isArrayLikeObject(_.noop);\n\t * // => false\n\t */\n\tfunction isArrayLikeObject(value) {\n\t  return isObjectLike(value) && isArrayLike(value);\n\t}\n\t\n\t/**\n\t * Checks if `value` is classified as a `Function` object.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n\t * @example\n\t *\n\t * _.isFunction(_);\n\t * // => true\n\t *\n\t * _.isFunction(/abc/);\n\t * // => false\n\t */\n\tfunction isFunction(value) {\n\t  // The use of `Object#toString` avoids issues with the `typeof` operator\n\t  // in Safari 8 which returns 'object' for typed array constructors, and\n\t  // PhantomJS 1.9 which returns 'function' for `NodeList` instances.\n\t  var tag = isObject(value) ? objectToString.call(value) : '';\n\t  return tag == funcTag || tag == genTag;\n\t}\n\t\n\t/**\n\t * Checks if `value` is a valid array-like length.\n\t *\n\t * **Note:** This function is loosely based on [`ToLength`](http://ecma-international.org/ecma-262/6.0/#sec-tolength).\n\t *\n\t * @static\n\t * @memberOf _\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n\t * @example\n\t *\n\t * _.isLength(3);\n\t * // => true\n\t *\n\t * _.isLength(Number.MIN_VALUE);\n\t * // => false\n\t *\n\t * _.isLength(Infinity);\n\t * // => false\n\t *\n\t * _.isLength('3');\n\t * // => false\n\t */\n\tfunction isLength(value) {\n\t  return typeof value == 'number' && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n\t}\n\t\n\t/**\n\t * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.\n\t * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n\t *\n\t * @static\n\t * @memberOf _\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n\t * @example\n\t *\n\t * _.isObject({});\n\t * // => true\n\t *\n\t * _.isObject([1, 2, 3]);\n\t * // => true\n\t *\n\t * _.isObject(_.noop);\n\t * // => true\n\t *\n\t * _.isObject(null);\n\t * // => false\n\t */\n\tfunction isObject(value) {\n\t  var type = typeof value;\n\t  return !!value && (type == 'object' || type == 'function');\n\t}\n\t\n\t/**\n\t * Checks if `value` is object-like. A value is object-like if it's not `null`\n\t * and has a `typeof` result of \"object\".\n\t *\n\t * @static\n\t * @memberOf _\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n\t * @example\n\t *\n\t * _.isObjectLike({});\n\t * // => true\n\t *\n\t * _.isObjectLike([1, 2, 3]);\n\t * // => true\n\t *\n\t * _.isObjectLike(_.noop);\n\t * // => false\n\t *\n\t * _.isObjectLike(null);\n\t * // => false\n\t */\n\tfunction isObjectLike(value) {\n\t  return !!value && typeof value == 'object';\n\t}\n\t\n\t/**\n\t * Checks if `value` is classified as a `String` primitive or object.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n\t * @example\n\t *\n\t * _.isString('abc');\n\t * // => true\n\t *\n\t * _.isString(1);\n\t * // => false\n\t */\n\tfunction isString(value) {\n\t  return typeof value == 'string' ||\n\t    (!isArray(value) && isObjectLike(value) && objectToString.call(value) == stringTag);\n\t}\n\t\n\t/**\n\t * Creates an array of the own enumerable property names of `object`.\n\t *\n\t * **Note:** Non-object values are coerced to objects. See the\n\t * [ES spec](http://ecma-international.org/ecma-262/6.0/#sec-object.keys)\n\t * for more details.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @category Object\n\t * @param {Object} object The object to query.\n\t * @returns {Array} Returns the array of property names.\n\t * @example\n\t *\n\t * function Foo() {\n\t *   this.a = 1;\n\t *   this.b = 2;\n\t * }\n\t *\n\t * Foo.prototype.c = 3;\n\t *\n\t * _.keys(new Foo);\n\t * // => ['a', 'b'] (iteration order is not guaranteed)\n\t *\n\t * _.keys('hi');\n\t * // => ['0', '1']\n\t */\n\tfunction keys(object) {\n\t  var isProto = isPrototype(object);\n\t  if (!(isProto || isArrayLike(object))) {\n\t    return baseKeys(object);\n\t  }\n\t  var indexes = indexKeys(object),\n\t      skipIndexes = !!indexes,\n\t      result = indexes || [],\n\t      length = result.length;\n\t\n\t  for (var key in object) {\n\t    if (baseHas(object, key) &&\n\t        !(skipIndexes && (key == 'length' || isIndex(key, length))) &&\n\t        !(isProto && key == 'constructor')) {\n\t      result.push(key);\n\t    }\n\t  }\n\t  return result;\n\t}\n\t\n\tmodule.exports = keys;\n\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\t/**\n\t * lodash 4.0.1 (Custom Build) <https://lodash.com/>\n\t * Build: `lodash modularize exports=\"npm\" -o ./`\n\t * Copyright 2012-2016 The Dojo Foundation <http://dojofoundation.org/>\n\t * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n\t * Copyright 2009-2016 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n\t * Available under MIT license <https://lodash.com/license>\n\t */\n\t\n\t/** Used as the `TypeError` message for \"Functions\" methods. */\n\tvar FUNC_ERROR_TEXT = 'Expected a function';\n\t\n\t/** Used as references for various `Number` constants. */\n\tvar INFINITY = 1 / 0,\n\t    MAX_INTEGER = 1.7976931348623157e+308,\n\t    NAN = 0 / 0;\n\t\n\t/** `Object#toString` result references. */\n\tvar funcTag = '[object Function]',\n\t    genTag = '[object GeneratorFunction]';\n\t\n\t/** Used to match leading and trailing whitespace. */\n\tvar reTrim = /^\\s+|\\s+$/g;\n\t\n\t/** Used to detect bad signed hexadecimal string values. */\n\tvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\t\n\t/** Used to detect binary string values. */\n\tvar reIsBinary = /^0b[01]+$/i;\n\t\n\t/** Used to detect octal string values. */\n\tvar reIsOctal = /^0o[0-7]+$/i;\n\t\n\t/** Built-in method references without a dependency on `root`. */\n\tvar freeParseInt = parseInt;\n\t\n\t/**\n\t * A faster alternative to `Function#apply`, this function invokes `func`\n\t * with the `this` binding of `thisArg` and the arguments of `args`.\n\t *\n\t * @private\n\t * @param {Function} func The function to invoke.\n\t * @param {*} thisArg The `this` binding of `func`.\n\t * @param {...*} args The arguments to invoke `func` with.\n\t * @returns {*} Returns the result of `func`.\n\t */\n\tfunction apply(func, thisArg, args) {\n\t  var length = args.length;\n\t  switch (length) {\n\t    case 0: return func.call(thisArg);\n\t    case 1: return func.call(thisArg, args[0]);\n\t    case 2: return func.call(thisArg, args[0], args[1]);\n\t    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n\t  }\n\t  return func.apply(thisArg, args);\n\t}\n\t\n\t/** Used for built-in method references. */\n\tvar objectProto = Object.prototype;\n\t\n\t/**\n\t * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n\t * of values.\n\t */\n\tvar objectToString = objectProto.toString;\n\t\n\t/* Built-in method references for those with the same name as other `lodash` methods. */\n\tvar nativeMax = Math.max;\n\t\n\t/**\n\t * Creates a function that invokes `func` with the `this` binding of the\n\t * created function and arguments from `start` and beyond provided as an array.\n\t *\n\t * **Note:** This method is based on the [rest parameter](https://mdn.io/rest_parameters).\n\t *\n\t * @static\n\t * @memberOf _\n\t * @category Function\n\t * @param {Function} func The function to apply a rest parameter to.\n\t * @param {number} [start=func.length-1] The start position of the rest parameter.\n\t * @returns {Function} Returns the new function.\n\t * @example\n\t *\n\t * var say = _.rest(function(what, names) {\n\t *   return what + ' ' + _.initial(names).join(', ') +\n\t *     (_.size(names) > 1 ? ', & ' : '') + _.last(names);\n\t * });\n\t *\n\t * say('hello', 'fred', 'barney', 'pebbles');\n\t * // => 'hello fred, barney, & pebbles'\n\t */\n\tfunction rest(func, start) {\n\t  if (typeof func != 'function') {\n\t    throw new TypeError(FUNC_ERROR_TEXT);\n\t  }\n\t  start = nativeMax(start === undefined ? (func.length - 1) : toInteger(start), 0);\n\t  return function() {\n\t    var args = arguments,\n\t        index = -1,\n\t        length = nativeMax(args.length - start, 0),\n\t        array = Array(length);\n\t\n\t    while (++index < length) {\n\t      array[index] = args[start + index];\n\t    }\n\t    switch (start) {\n\t      case 0: return func.call(this, array);\n\t      case 1: return func.call(this, args[0], array);\n\t      case 2: return func.call(this, args[0], args[1], array);\n\t    }\n\t    var otherArgs = Array(start + 1);\n\t    index = -1;\n\t    while (++index < start) {\n\t      otherArgs[index] = args[index];\n\t    }\n\t    otherArgs[start] = array;\n\t    return apply(func, this, otherArgs);\n\t  };\n\t}\n\t\n\t/**\n\t * Checks if `value` is classified as a `Function` object.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n\t * @example\n\t *\n\t * _.isFunction(_);\n\t * // => true\n\t *\n\t * _.isFunction(/abc/);\n\t * // => false\n\t */\n\tfunction isFunction(value) {\n\t  // The use of `Object#toString` avoids issues with the `typeof` operator\n\t  // in Safari 8 which returns 'object' for typed array constructors, and\n\t  // PhantomJS 1.9 which returns 'function' for `NodeList` instances.\n\t  var tag = isObject(value) ? objectToString.call(value) : '';\n\t  return tag == funcTag || tag == genTag;\n\t}\n\t\n\t/**\n\t * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.\n\t * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n\t *\n\t * @static\n\t * @memberOf _\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n\t * @example\n\t *\n\t * _.isObject({});\n\t * // => true\n\t *\n\t * _.isObject([1, 2, 3]);\n\t * // => true\n\t *\n\t * _.isObject(_.noop);\n\t * // => true\n\t *\n\t * _.isObject(null);\n\t * // => false\n\t */\n\tfunction isObject(value) {\n\t  var type = typeof value;\n\t  return !!value && (type == 'object' || type == 'function');\n\t}\n\t\n\t/**\n\t * Converts `value` to an integer.\n\t *\n\t * **Note:** This function is loosely based on [`ToInteger`](http://www.ecma-international.org/ecma-262/6.0/#sec-tointeger).\n\t *\n\t * @static\n\t * @memberOf _\n\t * @category Lang\n\t * @param {*} value The value to convert.\n\t * @returns {number} Returns the converted integer.\n\t * @example\n\t *\n\t * _.toInteger(3);\n\t * // => 3\n\t *\n\t * _.toInteger(Number.MIN_VALUE);\n\t * // => 0\n\t *\n\t * _.toInteger(Infinity);\n\t * // => 1.7976931348623157e+308\n\t *\n\t * _.toInteger('3');\n\t * // => 3\n\t */\n\tfunction toInteger(value) {\n\t  if (!value) {\n\t    return value === 0 ? value : 0;\n\t  }\n\t  value = toNumber(value);\n\t  if (value === INFINITY || value === -INFINITY) {\n\t    var sign = (value < 0 ? -1 : 1);\n\t    return sign * MAX_INTEGER;\n\t  }\n\t  var remainder = value % 1;\n\t  return value === value ? (remainder ? value - remainder : value) : 0;\n\t}\n\t\n\t/**\n\t * Converts `value` to a number.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @category Lang\n\t * @param {*} value The value to process.\n\t * @returns {number} Returns the number.\n\t * @example\n\t *\n\t * _.toNumber(3);\n\t * // => 3\n\t *\n\t * _.toNumber(Number.MIN_VALUE);\n\t * // => 5e-324\n\t *\n\t * _.toNumber(Infinity);\n\t * // => Infinity\n\t *\n\t * _.toNumber('3');\n\t * // => 3\n\t */\n\tfunction toNumber(value) {\n\t  if (isObject(value)) {\n\t    var other = isFunction(value.valueOf) ? value.valueOf() : value;\n\t    value = isObject(other) ? (other + '') : other;\n\t  }\n\t  if (typeof value != 'string') {\n\t    return value === 0 ? value : +value;\n\t  }\n\t  value = value.replace(reTrim, '');\n\t  var isBinary = reIsBinary.test(value);\n\t  return (isBinary || reIsOctal.test(value))\n\t    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n\t    : (reIsBadHex.test(value) ? NAN : +value);\n\t}\n\t\n\tmodule.exports = rest;\n\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _CRSEPSG3857 = __webpack_require__(7);\n\t\n\tvar _CRSEPSG38572 = _interopRequireDefault(_CRSEPSG3857);\n\t\n\tvar _CRSEPSG3395 = __webpack_require__(15);\n\t\n\tvar _CRSEPSG33952 = _interopRequireDefault(_CRSEPSG3395);\n\t\n\tvar _CRSEPSG4326 = __webpack_require__(17);\n\t\n\tvar _CRSEPSG43262 = _interopRequireDefault(_CRSEPSG4326);\n\t\n\tvar _CRSSimple = __webpack_require__(19);\n\t\n\tvar _CRSSimple2 = _interopRequireDefault(_CRSSimple);\n\t\n\tvar _CRSProj4 = __webpack_require__(20);\n\t\n\tvar _CRSProj42 = _interopRequireDefault(_CRSProj4);\n\t\n\tvar CRS = {};\n\t\n\tCRS.EPSG3857 = _CRSEPSG38572['default'];\n\tCRS.EPSG900913 = _CRSEPSG3857.EPSG900913;\n\tCRS.EPSG3395 = _CRSEPSG33952['default'];\n\tCRS.EPSG4326 = _CRSEPSG43262['default'];\n\tCRS.Simple = _CRSSimple2['default'];\n\tCRS.Proj4 = _CRSProj42['default'];\n\t\n\texports['default'] = CRS;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\t/*\n\t * CRS.EPSG3857 (WGS 84 / Pseudo-Mercator) CRS implementation.\n\t *\n\t * Based on:\n\t * https://github.com/Leaflet/Leaflet/blob/master/src/geo/crs/CRS.EPSG3857.js\n\t */\n\t\n\tvar _lodashAssign = __webpack_require__(3);\n\t\n\tvar _lodashAssign2 = _interopRequireDefault(_lodashAssign);\n\t\n\tvar _CRSEarth = __webpack_require__(8);\n\t\n\tvar _CRSEarth2 = _interopRequireDefault(_CRSEarth);\n\t\n\tvar _projectionProjectionSphericalMercator = __webpack_require__(13);\n\t\n\tvar _projectionProjectionSphericalMercator2 = _interopRequireDefault(_projectionProjectionSphericalMercator);\n\t\n\tvar _utilTransformation = __webpack_require__(14);\n\t\n\tvar _utilTransformation2 = _interopRequireDefault(_utilTransformation);\n\t\n\tvar _EPSG3857 = {\n\t  code: 'EPSG:3857',\n\t  projection: _projectionProjectionSphericalMercator2['default'],\n\t\n\t  // Work out how to de-dupe this (scoping issue)\n\t  transformScale: 1 / (Math.PI * _projectionProjectionSphericalMercator2['default'].R),\n\t\n\t  // Scale and transformation inputs changed to account for central origin in\n\t  // WebGL, instead of top-left origin used in Leaflet\n\t  transformation: (function () {\n\t    // TODO: Cannot use this.transformScale due to scope\n\t    var scale = 1 / (Math.PI * _projectionProjectionSphericalMercator2['default'].R);\n\t\n\t    return new _utilTransformation2['default'](scale, 0, -scale, 0);\n\t  })()\n\t};\n\t\n\tvar EPSG3857 = (0, _lodashAssign2['default'])({}, _CRSEarth2['default'], _EPSG3857);\n\t\n\tvar EPSG900913 = (0, _lodashAssign2['default'])({}, EPSG3857, {\n\t  code: 'EPSG:900913'\n\t});\n\t\n\texports.EPSG900913 = EPSG900913;\n\texports['default'] = EPSG3857;\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\t/*\n\t * CRS.Earth is the base class for all CRS representing Earth.\n\t *\n\t * Based on:\n\t * https://github.com/Leaflet/Leaflet/blob/master/src/geo/crs/CRS.Earth.js\n\t */\n\t\n\tvar _lodashAssign = __webpack_require__(3);\n\t\n\tvar _lodashAssign2 = _interopRequireDefault(_lodashAssign);\n\t\n\tvar _CRS = __webpack_require__(9);\n\t\n\tvar _CRS2 = _interopRequireDefault(_CRS);\n\t\n\tvar _LatLon = __webpack_require__(10);\n\t\n\tvar _LatLon2 = _interopRequireDefault(_LatLon);\n\t\n\tvar Earth = {\n\t  wrapLon: [-180, 180],\n\t\n\t  R: 6378137,\n\t\n\t  // Distance between two geographical points using spherical law of cosines\n\t  // approximation or Haversine\n\t  //\n\t  // See: http://www.movable-type.co.uk/scripts/latlong.html\n\t  distance: function distance(latlon1, latlon2, accurate) {\n\t    var rad = Math.PI / 180;\n\t\n\t    var lat1;\n\t    var lat2;\n\t\n\t    var a;\n\t\n\t    if (!accurate) {\n\t      lat1 = latlon1.lat * rad;\n\t      lat2 = latlon2.lat * rad;\n\t\n\t      a = Math.sin(lat1) * Math.sin(lat2) + Math.cos(lat1) * Math.cos(lat2) * Math.cos((latlon2.lon - latlon1.lon) * rad);\n\t\n\t      return this.R * Math.acos(Math.min(a, 1));\n\t    } else {\n\t      lat1 = latlon1.lat * rad;\n\t      lat2 = latlon2.lat * rad;\n\t\n\t      var lon1 = latlon1.lon * rad;\n\t      var lon2 = latlon2.lon * rad;\n\t\n\t      var deltaLat = lat2 - lat1;\n\t      var deltaLon = lon2 - lon1;\n\t\n\t      var halfDeltaLat = deltaLat / 2;\n\t      var halfDeltaLon = deltaLon / 2;\n\t\n\t      a = Math.sin(halfDeltaLat) * Math.sin(halfDeltaLat) + Math.cos(lat1) * Math.cos(lat2) * Math.sin(halfDeltaLon) * Math.sin(halfDeltaLon);\n\t\n\t      var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n\t\n\t      return this.R * c;\n\t    }\n\t  },\n\t\n\t  // Scale factor for converting between real metres and projected metres\n\t  //\n\t  // projectedMetres = realMetres * pointScale\n\t  // realMetres = projectedMetres / pointScale\n\t  //\n\t  // Defaults to a scale factor of 1 if no calculation method exists\n\t  //\n\t  // Probably need to run this through the CRS transformation or similar so the\n\t  // resulting scale is relative to the dimensions of the world space\n\t  // Eg. 1 metre in projected space is likly scaled up or down to some other\n\t  // number\n\t  pointScale: function pointScale(latlon, accurate) {\n\t    return this.projection.pointScale ? this.projection.pointScale(latlon, accurate) : [1, 1];\n\t  },\n\t\n\t  // Convert real metres to projected units\n\t  //\n\t  // Latitude scale is chosen because it fluctuates more than longitude\n\t  metresToProjected: function metresToProjected(metres, pointScale) {\n\t    return metres * pointScale[1];\n\t  },\n\t\n\t  // Convert projected units to real metres\n\t  //\n\t  // Latitude scale is chosen because it fluctuates more than longitude\n\t  projectedToMetres: function projectedToMetres(projectedUnits, pointScale) {\n\t    return projectedUnits / pointScale[1];\n\t  },\n\t\n\t  // Convert real metres to a value in world (WebGL) units\n\t  metresToWorld: function metresToWorld(metres, pointScale, zoom) {\n\t    // Transform metres to projected metres using the latitude point scale\n\t    //\n\t    // Latitude scale is chosen because it fluctuates more than longitude\n\t    var projectedMetres = this.metresToProjected(metres, pointScale);\n\t\n\t    var scale = this.scale(zoom);\n\t\n\t    // Half scale if using zoom as WebGL origin is in the centre, not top left\n\t    if (zoom) {\n\t      scale /= 2;\n\t    }\n\t\n\t    // Scale projected metres\n\t    var scaledMetres = scale * (this.transformScale * projectedMetres) / pointScale[1];\n\t\n\t    return scaledMetres;\n\t  },\n\t\n\t  // Convert world (WebGL) units to a value in real metres\n\t  worldToMetres: function worldToMetres(worldUnits, pointScale, zoom) {\n\t    var scale = this.scale(zoom);\n\t\n\t    // Half scale if using zoom as WebGL origin is in the centre, not top left\n\t    if (zoom) {\n\t      scale /= 2;\n\t    }\n\t\n\t    var projectedUnits = worldUnits / scale / this.transformScale * pointScale[1];\n\t    var realMetres = this.projectedToMetres(projectedUnits, pointScale);\n\t\n\t    return realMetres;\n\t  }\n\t};\n\t\n\texports['default'] = (0, _lodashAssign2['default'])({}, _CRS2['default'], Earth);\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\t/*\n\t * CRS is the base object for all defined CRS (Coordinate Reference Systems)\n\t *\n\t * Based on:\n\t * https://github.com/Leaflet/Leaflet/blob/master/src/geo/crs/CRS.js\n\t */\n\t\n\tvar _LatLon = __webpack_require__(10);\n\t\n\tvar _LatLon2 = _interopRequireDefault(_LatLon);\n\t\n\tvar _Point = __webpack_require__(11);\n\t\n\tvar _Point2 = _interopRequireDefault(_Point);\n\t\n\tvar _utilWrapNum = __webpack_require__(12);\n\t\n\tvar _utilWrapNum2 = _interopRequireDefault(_utilWrapNum);\n\t\n\tvar CRS = {\n\t  // Scale factor determines final dimensions of world space\n\t  //\n\t  // Projection transformation in range -1 to 1 is multiplied by scale factor to\n\t  // find final world coordinates\n\t  //\n\t  // Scale factor can be considered as half the amount of the desired dimension\n\t  // for the largest side when transformation is equal to 1 or -1, or as the\n\t  // distance between 0 and 1 on the largest side\n\t  //\n\t  // For example, if you want the world dimensions to be between -1000 and 1000\n\t  // then the scale factor will be 1000\n\t  scaleFactor: 1000000,\n\t\n\t  // Converts geo coords to pixel / WebGL ones\n\t  latLonToPoint: function latLonToPoint(latlon, zoom) {\n\t    var projectedPoint = this.projection.project(latlon);\n\t    var scale = this.scale(zoom);\n\t\n\t    // Half scale if using zoom as WebGL origin is in the centre, not top left\n\t    if (zoom) {\n\t      scale /= 2;\n\t    }\n\t\n\t    return this.transformation._transform(projectedPoint, scale);\n\t  },\n\t\n\t  // Converts pixel / WebGL coords to geo coords\n\t  pointToLatLon: function pointToLatLon(point, zoom) {\n\t    var scale = this.scale(zoom);\n\t\n\t    // Half scale if using zoom as WebGL origin is in the centre, not top left\n\t    if (zoom) {\n\t      scale /= 2;\n\t    }\n\t\n\t    var untransformedPoint = this.transformation.untransform(point, scale);\n\t\n\t    return this.projection.unproject(untransformedPoint);\n\t  },\n\t\n\t  // Converts geo coords to projection-specific coords (e.g. in meters)\n\t  project: function project(latlon) {\n\t    return this.projection.project(latlon);\n\t  },\n\t\n\t  // Converts projected coords to geo coords\n\t  unproject: function unproject(point) {\n\t    return this.projection.unproject(point);\n\t  },\n\t\n\t  // If zoom is provided, returns the map width in pixels for a given zoom\n\t  // Else, provides fixed scale value\n\t  scale: function scale(zoom) {\n\t    // If zoom is provided then return scale based on map tile zoom\n\t    if (zoom >= 0) {\n\t      return 256 * Math.pow(2, zoom);\n\t      // Else, return fixed scale value to expand projected coordinates from\n\t      // their 0 to 1 range into something more practical\n\t    } else {\n\t        return this.scaleFactor;\n\t      }\n\t  },\n\t\n\t  // Returns zoom level for a given scale value\n\t  // This only works with a scale value that is based on map pixel width\n\t  zoom: function zoom(scale) {\n\t    return Math.log(scale / 256) / Math.LN2;\n\t  },\n\t\n\t  // Returns the bounds of the world in projected coords if applicable\n\t  getProjectedBounds: function getProjectedBounds(zoom) {\n\t    if (this.infinite) {\n\t      return null;\n\t    }\n\t\n\t    var b = this.projection.bounds;\n\t    var s = this.scale(zoom);\n\t\n\t    // Half scale if using zoom as WebGL origin is in the centre, not top left\n\t    if (zoom) {\n\t      s /= 2;\n\t    }\n\t\n\t    // Bottom left\n\t    var min = this.transformation.transform((0, _Point2['default'])(b[0]), s);\n\t\n\t    // Top right\n\t    var max = this.transformation.transform((0, _Point2['default'])(b[1]), s);\n\t\n\t    return [min, max];\n\t  },\n\t\n\t  // Whether a coordinate axis wraps in a given range (e.g. longitude from -180 to 180); depends on CRS\n\t  // wrapLon: [min, max],\n\t  // wrapLat: [min, max],\n\t\n\t  // If true, the coordinate space will be unbounded (infinite in all directions)\n\t  // infinite: false,\n\t\n\t  // Wraps geo coords in certain ranges if applicable\n\t  wrapLatLon: function wrapLatLon(latlon) {\n\t    var lat = this.wrapLat ? (0, _utilWrapNum2['default'])(latlon.lat, this.wrapLat, true) : latlon.lat;\n\t    var lon = this.wrapLon ? (0, _utilWrapNum2['default'])(latlon.lon, this.wrapLon, true) : latlon.lon;\n\t    var alt = latlon.alt;\n\t\n\t    return (0, _LatLon2['default'])(lat, lon, alt);\n\t  }\n\t};\n\t\n\texports['default'] = CRS;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\t/*\n\t * LatLon is a helper class for ensuring consistent geographic coordinates.\n\t *\n\t * Based on:\n\t * https://github.com/Leaflet/Leaflet/blob/master/src/geo/LatLng.js\n\t */\n\t\n\tvar LatLon = (function () {\n\t  function LatLon(lat, lon, alt) {\n\t    _classCallCheck(this, LatLon);\n\t\n\t    if (isNaN(lat) || isNaN(lon)) {\n\t      throw new Error('Invalid LatLon object: (' + lat + ', ' + lon + ')');\n\t    }\n\t\n\t    this.lat = +lat;\n\t    this.lon = +lon;\n\t\n\t    if (alt !== undefined) {\n\t      this.alt = +alt;\n\t    }\n\t  }\n\t\n\t  // Initialise without requiring new keyword\n\t  //\n\t  // Accepts (LatLon), ([lat, lon, alt]), ([lat, lon]) and (lat, lon, alt)\n\t  // Also converts between lng and lon\n\t\n\t  _createClass(LatLon, [{\n\t    key: 'clone',\n\t    value: function clone() {\n\t      return new LatLon(this.lat, this.lon, this.alt);\n\t    }\n\t  }]);\n\t\n\t  return LatLon;\n\t})();\n\t\n\texports['default'] = function (a, b, c) {\n\t  if (a instanceof LatLon) {\n\t    return a;\n\t  }\n\t  if (Array.isArray(a) && typeof a[0] !== 'object') {\n\t    if (a.length === 3) {\n\t      return new LatLon(a[0], a[1], a[2]);\n\t    }\n\t    if (a.length === 2) {\n\t      return new LatLon(a[0], a[1]);\n\t    }\n\t    return null;\n\t  }\n\t  if (a === undefined || a === null) {\n\t    return a;\n\t  }\n\t  if (typeof a === 'object' && 'lat' in a) {\n\t    return new LatLon(a.lat, 'lng' in a ? a.lng : a.lon, a.alt);\n\t  }\n\t  if (b === undefined) {\n\t    return null;\n\t  }\n\t  return new LatLon(a, b, c);\n\t};\n\t\n\t;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 11 */\n/***/ function(module, exports) {\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t/*\n\t * Point is a helper class for ensuring consistent world positions.\n\t *\n\t * Based on:\n\t * https://github.com/Leaflet/Leaflet/blob/master/src/geo/Point.js\n\t */\n\t\n\tvar Point = (function () {\n\t  function Point(x, y, round) {\n\t    _classCallCheck(this, Point);\n\t\n\t    this.x = round ? Math.round(x) : x;\n\t    this.y = round ? Math.round(y) : y;\n\t  }\n\t\n\t  // Accepts (point), ([x, y]) and (x, y, round)\n\t\n\t  _createClass(Point, [{\n\t    key: \"clone\",\n\t    value: function clone() {\n\t      return new Point(this.x, this.y);\n\t    }\n\t\n\t    // Non-destructive\n\t  }, {\n\t    key: \"add\",\n\t    value: function add(point) {\n\t      return this.clone()._add(_point(point));\n\t    }\n\t\n\t    // Destructive\n\t  }, {\n\t    key: \"_add\",\n\t    value: function _add(point) {\n\t      this.x += point.x;\n\t      this.y += point.y;\n\t      return this;\n\t    }\n\t\n\t    // Non-destructive\n\t  }, {\n\t    key: \"subtract\",\n\t    value: function subtract(point) {\n\t      return this.clone()._subtract(_point(point));\n\t    }\n\t\n\t    // Destructive\n\t  }, {\n\t    key: \"_subtract\",\n\t    value: function _subtract(point) {\n\t      this.x -= point.x;\n\t      this.y -= point.y;\n\t      return this;\n\t    }\n\t  }]);\n\t\n\t  return Point;\n\t})();\n\t\n\tvar _point = function _point(x, y, round) {\n\t  if (x instanceof Point) {\n\t    return x;\n\t  }\n\t  if (Array.isArray(x)) {\n\t    return new Point(x[0], x[1]);\n\t  }\n\t  if (x === undefined || x === null) {\n\t    return x;\n\t  }\n\t  return new Point(x, y, round);\n\t};\n\t\n\t// Initialise without requiring new keyword\n\texports[\"default\"] = _point;\n\tmodule.exports = exports[\"default\"];\n\n/***/ },\n/* 12 */\n/***/ function(module, exports) {\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t/*\n\t * Wrap the given number to lie within a certain range (eg. longitude)\n\t *\n\t * Based on:\n\t * https://github.com/Leaflet/Leaflet/blob/master/src/core/Util.js\n\t */\n\t\n\tvar wrapNum = function wrapNum(x, range, includeMax) {\n\t  var max = range[1];\n\t  var min = range[0];\n\t  var d = max - min;\n\t  return x === max && includeMax ? x : ((x - min) % d + d) % d + min;\n\t};\n\t\n\texports[\"default\"] = wrapNum;\n\tmodule.exports = exports[\"default\"];\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\t/*\n\t * Spherical Mercator is the most popular map projection, used by EPSG:3857 CRS\n\t * used by default.\n\t *\n\t * Based on:\n\t * https://github.com/Leaflet/Leaflet/blob/master/src/geo/projection/Projection.SphericalMercator.js\n\t */\n\t\n\tvar _LatLon = __webpack_require__(10);\n\t\n\tvar _LatLon2 = _interopRequireDefault(_LatLon);\n\t\n\tvar _Point = __webpack_require__(11);\n\t\n\tvar _Point2 = _interopRequireDefault(_Point);\n\t\n\tvar SphericalMercator = {\n\t  // Radius / WGS84 semi-major axis\n\t  R: 6378137,\n\t  MAX_LATITUDE: 85.0511287798,\n\t\n\t  // WGS84 eccentricity\n\t  ECC: 0.081819191,\n\t  ECC2: 0.081819191 * 0.081819191,\n\t\n\t  project: function project(latlon) {\n\t    var d = Math.PI / 180;\n\t    var max = this.MAX_LATITUDE;\n\t    var lat = Math.max(Math.min(max, latlon.lat), -max);\n\t    var sin = Math.sin(lat * d);\n\t\n\t    return (0, _Point2['default'])(this.R * latlon.lon * d, this.R * Math.log((1 + sin) / (1 - sin)) / 2);\n\t  },\n\t\n\t  unproject: function unproject(point) {\n\t    var d = 180 / Math.PI;\n\t\n\t    return (0, _LatLon2['default'])((2 * Math.atan(Math.exp(point.y / this.R)) - Math.PI / 2) * d, point.x * d / this.R);\n\t  },\n\t\n\t  // Scale factor for converting between real metres and projected metres\n\t  //\n\t  // projectedMetres = realMetres * pointScale\n\t  // realMetres = projectedMetres / pointScale\n\t  //\n\t  // Accurate scale factor uses proper Web Mercator scaling\n\t  // See pg.9: http://www.hydrometronics.com/downloads/Web%20Mercator%20-%20Non-Conformal,%20Non-Mercator%20(notes).pdf\n\t  // See: http://jsfiddle.net/robhawkes/yws924cf/\n\t  pointScale: function pointScale(latlon, accurate) {\n\t    var rad = Math.PI / 180;\n\t\n\t    var k;\n\t\n\t    if (!accurate) {\n\t      k = 1 / Math.cos(latlon.lat * rad);\n\t\n\t      // [scaleX, scaleY]\n\t      return [k, k];\n\t    } else {\n\t      var lat = latlon.lat * rad;\n\t      var lon = latlon.lon * rad;\n\t\n\t      var a = this.R;\n\t\n\t      var sinLat = Math.sin(lat);\n\t      var sinLat2 = sinLat * sinLat;\n\t\n\t      var cosLat = Math.cos(lat);\n\t\n\t      // Radius meridian\n\t      var p = a * (1 - this.ECC2) / Math.pow(1 - this.ECC2 * sinLat2, 3 / 2);\n\t\n\t      // Radius prime meridian\n\t      var v = a / Math.sqrt(1 - this.ECC2 * sinLat2);\n\t\n\t      // Scale N/S\n\t      var h = a / p / cosLat;\n\t\n\t      // Scale E/W\n\t      k = a / v / cosLat;\n\t\n\t      // [scaleX, scaleY]\n\t      return [k, h];\n\t    }\n\t  },\n\t\n\t  // Not using this.R due to scoping\n\t  bounds: (function () {\n\t    var d = 6378137 * Math.PI;\n\t    return [[-d, -d], [d, d]];\n\t  })()\n\t};\n\t\n\texports['default'] = SphericalMercator;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\t/*\n\t * Transformation is an utility class to perform simple point transformations\n\t * through a 2d-matrix.\n\t *\n\t * Based on:\n\t * https://github.com/Leaflet/Leaflet/blob/master/src/geometry/Transformation.js\n\t */\n\t\n\tvar _geoPoint = __webpack_require__(11);\n\t\n\tvar _geoPoint2 = _interopRequireDefault(_geoPoint);\n\t\n\tvar Transformation = (function () {\n\t  function Transformation(a, b, c, d) {\n\t    _classCallCheck(this, Transformation);\n\t\n\t    this._a = a;\n\t    this._b = b;\n\t    this._c = c;\n\t    this._d = d;\n\t  }\n\t\n\t  _createClass(Transformation, [{\n\t    key: 'transform',\n\t    value: function transform(point, scale) {\n\t      // Copy input point as to not destroy the original data\n\t      return this._transform(point.clone(), scale);\n\t    }\n\t\n\t    // Destructive transform (faster)\n\t  }, {\n\t    key: '_transform',\n\t    value: function _transform(point, scale) {\n\t      scale = scale || 1;\n\t\n\t      point.x = scale * (this._a * point.x + this._b);\n\t      point.y = scale * (this._c * point.y + this._d);\n\t      return point;\n\t    }\n\t  }, {\n\t    key: 'untransform',\n\t    value: function untransform(point, scale) {\n\t      scale = scale || 1;\n\t      return (0, _geoPoint2['default'])((point.x / scale - this._b) / this._a, (point.y / scale - this._d) / this._c);\n\t    }\n\t  }]);\n\t\n\t  return Transformation;\n\t})();\n\t\n\texports['default'] = Transformation;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\t/*\n\t * CRS.EPSG3395 (WGS 84 / World Mercator) CRS implementation.\n\t *\n\t * Based on:\n\t * https://github.com/Leaflet/Leaflet/blob/master/src/geo/crs/CRS.EPSG3395.js\n\t */\n\t\n\tvar _lodashAssign = __webpack_require__(3);\n\t\n\tvar _lodashAssign2 = _interopRequireDefault(_lodashAssign);\n\t\n\tvar _CRSEarth = __webpack_require__(8);\n\t\n\tvar _CRSEarth2 = _interopRequireDefault(_CRSEarth);\n\t\n\tvar _projectionProjectionMercator = __webpack_require__(16);\n\t\n\tvar _projectionProjectionMercator2 = _interopRequireDefault(_projectionProjectionMercator);\n\t\n\tvar _utilTransformation = __webpack_require__(14);\n\t\n\tvar _utilTransformation2 = _interopRequireDefault(_utilTransformation);\n\t\n\tvar _EPSG3395 = {\n\t  code: 'EPSG:3395',\n\t  projection: _projectionProjectionMercator2['default'],\n\t\n\t  // Work out how to de-dupe this (scoping issue)\n\t  transformScale: 1 / (Math.PI * _projectionProjectionMercator2['default'].R),\n\t\n\t  // Scale and transformation inputs changed to account for central origin in\n\t  // WebGL, instead of top-left origin used in Leaflet\n\t  transformation: (function () {\n\t    // TODO: Cannot use this.transformScale due to scope\n\t    var scale = 1 / (Math.PI * _projectionProjectionMercator2['default'].R);\n\t\n\t    return new _utilTransformation2['default'](scale, 0, -scale, 0);\n\t  })()\n\t};\n\t\n\tvar EPSG3395 = (0, _lodashAssign2['default'])({}, _CRSEarth2['default'], _EPSG3395);\n\t\n\texports['default'] = EPSG3395;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\t/*\n\t * Mercator projection that takes into account that the Earth is not a perfect\n\t * sphere. Less popular than spherical mercator; used by projections like\n\t * EPSG:3395.\n\t *\n\t * Based on:\n\t * https://github.com/Leaflet/Leaflet/blob/master/src/geo/projection/Projection.Mercator.js\n\t */\n\t\n\tvar _LatLon = __webpack_require__(10);\n\t\n\tvar _LatLon2 = _interopRequireDefault(_LatLon);\n\t\n\tvar _Point = __webpack_require__(11);\n\t\n\tvar _Point2 = _interopRequireDefault(_Point);\n\t\n\tvar Mercator = {\n\t  // Radius / WGS84 semi-major axis\n\t  R: 6378137,\n\t  R_MINOR: 6356752.314245179,\n\t\n\t  // WGS84 eccentricity\n\t  ECC: 0.081819191,\n\t  ECC2: 0.081819191 * 0.081819191,\n\t\n\t  project: function project(latlon) {\n\t    var d = Math.PI / 180;\n\t    var r = this.R;\n\t    var y = latlon.lat * d;\n\t    var tmp = this.R_MINOR / r;\n\t    var e = Math.sqrt(1 - tmp * tmp);\n\t    var con = e * Math.sin(y);\n\t\n\t    var ts = Math.tan(Math.PI / 4 - y / 2) / Math.pow((1 - con) / (1 + con), e / 2);\n\t    y = -r * Math.log(Math.max(ts, 1E-10));\n\t\n\t    return (0, _Point2['default'])(latlon.lon * d * r, y);\n\t  },\n\t\n\t  unproject: function unproject(point) {\n\t    var d = 180 / Math.PI;\n\t    var r = this.R;\n\t    var tmp = this.R_MINOR / r;\n\t    var e = Math.sqrt(1 - tmp * tmp);\n\t    var ts = Math.exp(-point.y / r);\n\t    var phi = Math.PI / 2 - 2 * Math.atan(ts);\n\t\n\t    for (var i = 0, dphi = 0.1, con; i < 15 && Math.abs(dphi) > 1e-7; i++) {\n\t      con = e * Math.sin(phi);\n\t      con = Math.pow((1 - con) / (1 + con), e / 2);\n\t      dphi = Math.PI / 2 - 2 * Math.atan(ts * con) - phi;\n\t      phi += dphi;\n\t    }\n\t\n\t    return (0, _LatLon2['default'])(phi * d, point.x * d / r);\n\t  },\n\t\n\t  // Scale factor for converting between real metres and projected metres\n\t  //\n\t  // projectedMetres = realMetres * pointScale\n\t  // realMetres = projectedMetres / pointScale\n\t  //\n\t  // See pg.8: http://www.hydrometronics.com/downloads/Web%20Mercator%20-%20Non-Conformal,%20Non-Mercator%20(notes).pdf\n\t  pointScale: function pointScale(latlon) {\n\t    var rad = Math.PI / 180;\n\t    var lat = latlon.lat * rad;\n\t    var sinLat = Math.sin(lat);\n\t    var sinLat2 = sinLat * sinLat;\n\t    var cosLat = Math.cos(lat);\n\t\n\t    var k = Math.sqrt(1 - this.ECC2 * sinLat2) / cosLat;\n\t\n\t    // [scaleX, scaleY]\n\t    return [k, k];\n\t  },\n\t\n\t  bounds: [[-20037508.34279, -15496570.73972], [20037508.34279, 18764656.23138]]\n\t};\n\t\n\texports['default'] = Mercator;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\t/*\n\t * CRS.EPSG4326 is a CRS popular among advanced GIS specialists.\n\t *\n\t * Based on:\n\t * https://github.com/Leaflet/Leaflet/blob/master/src/geo/crs/CRS.EPSG4326.js\n\t */\n\t\n\tvar _lodashAssign = __webpack_require__(3);\n\t\n\tvar _lodashAssign2 = _interopRequireDefault(_lodashAssign);\n\t\n\tvar _CRSEarth = __webpack_require__(8);\n\t\n\tvar _CRSEarth2 = _interopRequireDefault(_CRSEarth);\n\t\n\tvar _projectionProjectionLatLon = __webpack_require__(18);\n\t\n\tvar _projectionProjectionLatLon2 = _interopRequireDefault(_projectionProjectionLatLon);\n\t\n\tvar _utilTransformation = __webpack_require__(14);\n\t\n\tvar _utilTransformation2 = _interopRequireDefault(_utilTransformation);\n\t\n\tvar _EPSG4326 = {\n\t  code: 'EPSG:4326',\n\t  projection: _projectionProjectionLatLon2['default'],\n\t\n\t  // Work out how to de-dupe this (scoping issue)\n\t  transformScale: 1 / 180,\n\t\n\t  // Scale and transformation inputs changed to account for central origin in\n\t  // WebGL, instead of top-left origin used in Leaflet\n\t  //\n\t  // TODO: Cannot use this.transformScale due to scope\n\t  transformation: new _utilTransformation2['default'](1 / 180, 0, -1 / 180, 0)\n\t};\n\t\n\tvar EPSG4326 = (0, _lodashAssign2['default'])({}, _CRSEarth2['default'], _EPSG4326);\n\t\n\texports['default'] = EPSG4326;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 18 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\t/*\n\t * Simple equirectangular (Plate Carree) projection, used by CRS like EPSG:4326\n\t * and Simple.\n\t *\n\t * Based on:\n\t * https://github.com/Leaflet/Leaflet/blob/master/src/geo/projection/Projection.LonLat.js\n\t */\n\t\n\tvar _LatLon = __webpack_require__(10);\n\t\n\tvar _LatLon2 = _interopRequireDefault(_LatLon);\n\t\n\tvar _Point = __webpack_require__(11);\n\t\n\tvar _Point2 = _interopRequireDefault(_Point);\n\t\n\tvar ProjectionLatLon = {\n\t  project: function project(latlon) {\n\t    return (0, _Point2['default'])(latlon.lon, latlon.lat);\n\t  },\n\t\n\t  unproject: function unproject(point) {\n\t    return (0, _LatLon2['default'])(point.y, point.x);\n\t  },\n\t\n\t  // Scale factor for converting between real metres and degrees\n\t  //\n\t  // degrees = realMetres * pointScale\n\t  // realMetres = degrees / pointScale\n\t  //\n\t  // See: http://stackoverflow.com/questions/639695/how-to-convert-latitude-or-longitude-to-meters\n\t  // See: http://gis.stackexchange.com/questions/75528/length-of-a-degree-where-do-the-terms-in-this-formula-come-from\n\t  pointScale: function pointScale(latlon) {\n\t    var m1 = 111132.92;\n\t    var m2 = -559.82;\n\t    var m3 = 1.175;\n\t    var m4 = -0.0023;\n\t    var p1 = 111412.84;\n\t    var p2 = -93.5;\n\t    var p3 = 0.118;\n\t\n\t    var rad = Math.PI / 180;\n\t    var lat = latlon.lat * rad;\n\t\n\t    var latlen = m1 + m2 * Math.cos(2 * lat) + m3 * Math.cos(4 * lat) + m4 * Math.cos(6 * lat);\n\t    var lonlen = p1 * Math.cos(lat) + p2 * Math.cos(3 * lat) + p3 * Math.cos(5 * lat);\n\t\n\t    return [1 / latlen, 1 / lonlen];\n\t  },\n\t\n\t  bounds: [[-180, -90], [180, 90]]\n\t};\n\t\n\texports['default'] = ProjectionLatLon;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\t/*\n\t * A simple CRS that can be used for flat non-Earth maps like panoramas or game\n\t * maps.\n\t *\n\t * Based on:\n\t * https://github.com/Leaflet/Leaflet/blob/master/src/geo/crs/CRS.Simple.js\n\t */\n\t\n\tvar _lodashAssign = __webpack_require__(3);\n\t\n\tvar _lodashAssign2 = _interopRequireDefault(_lodashAssign);\n\t\n\tvar _CRS = __webpack_require__(9);\n\t\n\tvar _CRS2 = _interopRequireDefault(_CRS);\n\t\n\tvar _projectionProjectionLatLon = __webpack_require__(18);\n\t\n\tvar _projectionProjectionLatLon2 = _interopRequireDefault(_projectionProjectionLatLon);\n\t\n\tvar _utilTransformation = __webpack_require__(14);\n\t\n\tvar _utilTransformation2 = _interopRequireDefault(_utilTransformation);\n\t\n\tvar _Simple = {\n\t  projection: _projectionProjectionLatLon2['default'],\n\t\n\t  // Straight 1:1 mapping (-1, -1 would be top-left)\n\t  transformation: new _utilTransformation2['default'](1, 0, 1, 0),\n\t\n\t  scale: function scale(zoom) {\n\t    // If zoom is provided then return scale based on map tile zoom\n\t    if (zoom) {\n\t      return Math.pow(2, zoom);\n\t      // Else, make no change to scale  may need to increase this or make it a\n\t      // user-definable variable\n\t    } else {\n\t        return 1;\n\t      }\n\t  },\n\t\n\t  zoom: function zoom(scale) {\n\t    return Math.log(scale) / Math.LN2;\n\t  },\n\t\n\t  distance: function distance(latlon1, latlon2) {\n\t    var dx = latlon2.lon - latlon1.lon;\n\t    var dy = latlon2.lat - latlon1.lat;\n\t\n\t    return Math.sqrt(dx * dx + dy * dy);\n\t  },\n\t\n\t  infinite: true\n\t};\n\t\n\tvar Simple = (0, _lodashAssign2['default'])({}, _CRS2['default'], _Simple);\n\t\n\texports['default'] = Simple;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\t/*\n\t * CRS.Proj4 for any Proj4-supported CRS.\n\t */\n\t\n\tvar _lodashAssign = __webpack_require__(3);\n\t\n\tvar _lodashAssign2 = _interopRequireDefault(_lodashAssign);\n\t\n\tvar _CRSEarth = __webpack_require__(8);\n\t\n\tvar _CRSEarth2 = _interopRequireDefault(_CRSEarth);\n\t\n\tvar _projectionProjectionProj4 = __webpack_require__(21);\n\t\n\tvar _projectionProjectionProj42 = _interopRequireDefault(_projectionProjectionProj4);\n\t\n\tvar _utilTransformation = __webpack_require__(14);\n\t\n\tvar _utilTransformation2 = _interopRequireDefault(_utilTransformation);\n\t\n\tvar _Proj4 = function _Proj4(code, def, bounds) {\n\t  var projection = (0, _projectionProjectionProj42['default'])(def, bounds);\n\t\n\t  // Transformation calcuations\n\t  var diffX = projection.bounds[1][0] - projection.bounds[0][0];\n\t  var diffY = projection.bounds[1][1] - projection.bounds[0][1];\n\t\n\t  var halfX = diffX / 2;\n\t  var halfY = diffY / 2;\n\t\n\t  // This is the raw scale factor\n\t  var scaleX = 1 / halfX;\n\t  var scaleY = 1 / halfY;\n\t\n\t  // Find the minimum scale factor\n\t  //\n\t  // The minimum scale factor comes from the largest side and is the one\n\t  // you want to use for both axis so they stay relative in dimension\n\t  var scale = Math.min(scaleX, scaleY);\n\t\n\t  // Find amount to offset each axis by to make the central point lie on\n\t  // the [0,0] origin\n\t  var offsetX = scale * (projection.bounds[0][0] + halfX);\n\t  var offsetY = scale * (projection.bounds[0][1] + halfY);\n\t\n\t  return {\n\t    code: code,\n\t    projection: projection,\n\t\n\t    transformScale: scale,\n\t\n\t    // Map the input to a [-1,1] range with [0,0] in the centre\n\t    transformation: new _utilTransformation2['default'](scale, -offsetX, -scale, offsetY)\n\t  };\n\t};\n\t\n\tvar Proj4 = function Proj4(code, def, bounds) {\n\t  return (0, _lodashAssign2['default'])({}, _CRSEarth2['default'], _Proj4(code, def, bounds));\n\t};\n\t\n\texports['default'] = Proj4;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 21 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\t/*\n\t * Proj4 support for any projection.\n\t */\n\t\n\tvar _proj4 = __webpack_require__(22);\n\t\n\tvar _proj42 = _interopRequireDefault(_proj4);\n\t\n\tvar _LatLon = __webpack_require__(10);\n\t\n\tvar _LatLon2 = _interopRequireDefault(_LatLon);\n\t\n\tvar _Point = __webpack_require__(11);\n\t\n\tvar _Point2 = _interopRequireDefault(_Point);\n\t\n\tvar Proj4 = function Proj4(def, bounds) {\n\t  var proj = (0, _proj42['default'])(def);\n\t\n\t  var project = function project(latlon) {\n\t    return (0, _Point2['default'])(proj.forward([latlon.lon, latlon.lat]));\n\t  };\n\t\n\t  var unproject = function unproject(point) {\n\t    var inverse = proj.inverse([point.x, point.y]);\n\t    return (0, _LatLon2['default'])(inverse[1], inverse[0]);\n\t  };\n\t\n\t  return {\n\t    project: project,\n\t    unproject: unproject,\n\t\n\t    // Scale factor for converting between real metres and projected metres\\\n\t    //\n\t    // Need to work out the best way to provide the pointScale calculations\n\t    // for custom, unknown projections (if wanting to override default)\n\t    //\n\t    // For now, user can manually override crs.pointScale or\n\t    // crs.projection.pointScale\n\t    //\n\t    // projectedMetres = realMetres * pointScale\n\t    // realMetres = projectedMetres / pointScale\n\t    pointScale: function pointScale(latlon, accurate) {\n\t      return [1, 1];\n\t    },\n\t\n\t    // Try and calculate bounds if none are provided\n\t    //\n\t    // This will provide incorrect bounds for some projections, so perhaps make\n\t    // bounds a required input instead\n\t    bounds: (function () {\n\t      if (bounds) {\n\t        return bounds;\n\t      } else {\n\t        var bottomLeft = project([-90, -180]);\n\t        var topRight = project([90, 180]);\n\t\n\t        return [bottomLeft, topRight];\n\t      }\n\t    })()\n\t  };\n\t};\n\t\n\texports['default'] = Proj4;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 22 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_22__;\n\n/***/ },\n/* 23 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar _eventemitter3 = __webpack_require__(2);\n\t\n\tvar _eventemitter32 = _interopRequireDefault(_eventemitter3);\n\t\n\tvar _three = __webpack_require__(24);\n\t\n\tvar _three2 = _interopRequireDefault(_three);\n\t\n\tvar _Scene = __webpack_require__(25);\n\t\n\tvar _Scene2 = _interopRequireDefault(_Scene);\n\t\n\tvar _Renderer = __webpack_require__(26);\n\t\n\tvar _Renderer2 = _interopRequireDefault(_Renderer);\n\t\n\tvar _Camera = __webpack_require__(27);\n\t\n\tvar _Camera2 = _interopRequireDefault(_Camera);\n\t\n\tvar Engine = (function (_EventEmitter) {\n\t  _inherits(Engine, _EventEmitter);\n\t\n\t  function Engine(container) {\n\t    _classCallCheck(this, Engine);\n\t\n\t    console.log('Init Engine');\n\t\n\t    _get(Object.getPrototypeOf(Engine.prototype), 'constructor', this).call(this);\n\t\n\t    this._scene = _Scene2['default'];\n\t    this._renderer = (0, _Renderer2['default'])(container);\n\t    this._camera = (0, _Camera2['default'])(container);\n\t    this.clock = new _three2['default'].Clock();\n\t\n\t    this._frustum = new _three2['default'].Frustum();\n\t  }\n\t\n\t  // Initialise without requiring new keyword\n\t\n\t  _createClass(Engine, [{\n\t    key: 'update',\n\t    value: function update(delta) {\n\t      this.emit('preRender');\n\t      this._renderer.render(this._scene, this._camera);\n\t      this.emit('postRender');\n\t    }\n\t  }]);\n\t\n\t  return Engine;\n\t})(_eventemitter32['default']);\n\t\n\texports['default'] = function (container) {\n\t  return new Engine(container);\n\t};\n\t\n\t;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 24 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_24__;\n\n/***/ },\n/* 25 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _three = __webpack_require__(24);\n\t\n\tvar _three2 = _interopRequireDefault(_three);\n\t\n\t// This can be imported from anywhere and will still reference the same scene,\n\t// though there is a helper reference in Engine.scene\n\t\n\texports['default'] = (function () {\n\t  var scene = new _three2['default'].Scene();\n\t  scene.fog = new _three2['default'].Fog(0xffffff, 1, 15000);\n\t  return scene;\n\t})();\n\t\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 26 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _three = __webpack_require__(24);\n\t\n\tvar _three2 = _interopRequireDefault(_three);\n\t\n\tvar _Scene = __webpack_require__(25);\n\t\n\tvar _Scene2 = _interopRequireDefault(_Scene);\n\t\n\t// This can only be accessed from Engine.renderer if you want to reference the\n\t// same scene in multiple places\n\t\n\texports['default'] = function (container) {\n\t  var renderer = new _three2['default'].WebGLRenderer({\n\t    antialias: true\n\t  });\n\t\n\t  renderer.setClearColor(_Scene2['default'].fog.color, 1);\n\t\n\t  // Gamma settings make things look nicer\n\t  renderer.gammaInput = true;\n\t  renderer.gammaOutput = true;\n\t\n\t  container.appendChild(renderer.domElement);\n\t\n\t  var updateSize = function updateSize() {\n\t    renderer.setSize(container.clientWidth, container.clientHeight);\n\t  };\n\t\n\t  window.addEventListener('resize', updateSize, false);\n\t  updateSize();\n\t\n\t  return renderer;\n\t};\n\t\n\t;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 27 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _three = __webpack_require__(24);\n\t\n\tvar _three2 = _interopRequireDefault(_three);\n\t\n\t// This can only be accessed from Engine.camera if you want to reference the\n\t// same scene in multiple places\n\t\n\t// TODO: Ensure that FOV looks natural on all aspect ratios\n\t// http://stackoverflow.com/q/26655930/997339\n\t\n\texports['default'] = function (container) {\n\t  var camera = new _three2['default'].PerspectiveCamera(45, 1, 1, 40000);\n\t  camera.position.y = 400;\n\t  camera.position.z = 400;\n\t\n\t  var updateSize = function updateSize() {\n\t    camera.aspect = container.clientWidth / container.clientHeight;\n\t    camera.updateProjectionMatrix();\n\t  };\n\t\n\t  window.addEventListener('resize', updateSize, false);\n\t  updateSize();\n\t\n\t  return camera;\n\t};\n\t\n\t;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 28 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _ControlsOrbit = __webpack_require__(29);\n\t\n\tvar _ControlsOrbit2 = _interopRequireDefault(_ControlsOrbit);\n\t\n\tvar Controls = {\n\t  Orbit: _ControlsOrbit2['default']\n\t};\n\t\n\texports['default'] = Controls;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 29 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar _eventemitter3 = __webpack_require__(2);\n\t\n\tvar _eventemitter32 = _interopRequireDefault(_eventemitter3);\n\t\n\tvar _three = __webpack_require__(24);\n\t\n\tvar _three2 = _interopRequireDefault(_three);\n\t\n\tvar _threeOrbitControls = __webpack_require__(30);\n\t\n\tvar _threeOrbitControls2 = _interopRequireDefault(_threeOrbitControls);\n\t\n\tvar _OrbitControls = (0, _threeOrbitControls2['default'])(_three2['default']);\n\t\n\tvar Orbit = (function (_EventEmitter) {\n\t  _inherits(Orbit, _EventEmitter);\n\t\n\t  function Orbit() {\n\t    _classCallCheck(this, Orbit);\n\t\n\t    _get(Object.getPrototypeOf(Orbit.prototype), 'constructor', this).call(this);\n\t  }\n\t\n\t  // Initialise without requiring new keyword\n\t\n\t  // Proxy control events\n\t  //\n\t  // There's currently no distinction between pan, orbit and zoom events\n\t\n\t  _createClass(Orbit, [{\n\t    key: '_initEvents',\n\t    value: function _initEvents() {\n\t      var _this = this;\n\t\n\t      this._controls.addEventListener('start', function (event) {\n\t        _this._world.emit('controlsMoveStart', event.target.center);\n\t      });\n\t\n\t      this._controls.addEventListener('change', function (event) {\n\t        _this._world.emit('controlsMove', event.target.center);\n\t      });\n\t\n\t      this._controls.addEventListener('end', function (event) {\n\t        _this._world.emit('controlsMoveEnd', event.target.center);\n\t      });\n\t    }\n\t\n\t    // Moving the camera along the [x,y,z] axis based on a target position\n\t  }, {\n\t    key: '_panTo',\n\t    value: function _panTo(point, animate) {}\n\t  }, {\n\t    key: '_panBy',\n\t    value: function _panBy(pointDelta, animate) {}\n\t\n\t    // Zooming the camera in and out\n\t  }, {\n\t    key: '_zoomTo',\n\t    value: function _zoomTo(metres, animate) {}\n\t  }, {\n\t    key: '_zoomBy',\n\t    value: function _zoomBy(metresDelta, animate) {}\n\t\n\t    // Force camera to look at something other than the target\n\t  }, {\n\t    key: '_lookAt',\n\t    value: function _lookAt(point, animate) {}\n\t\n\t    // Make camera look at the target\n\t  }, {\n\t    key: '_lookAtTarget',\n\t    value: function _lookAtTarget() {}\n\t\n\t    // Tilt (up and down)\n\t  }, {\n\t    key: '_tiltTo',\n\t    value: function _tiltTo(angle, animate) {}\n\t  }, {\n\t    key: '_tiltBy',\n\t    value: function _tiltBy(angleDelta, animate) {}\n\t\n\t    // Rotate (left and right)\n\t  }, {\n\t    key: '_rotateTo',\n\t    value: function _rotateTo(angle, animate) {}\n\t  }, {\n\t    key: '_rotateBy',\n\t    value: function _rotateBy(angleDelta, animate) {}\n\t\n\t    // Fly to the given point, animating pan and tilt/rotation to final position\n\t    // with nice zoom out and in\n\t    //\n\t    // Calling flyTo a second time before the previous animation has completed\n\t    // will immediately start the new animation from wherever the previous one\n\t    // has got to\n\t  }, {\n\t    key: '_flyTo',\n\t    value: function _flyTo(point, noZoom) {}\n\t\n\t    // Proxy to OrbitControls.update()\n\t  }, {\n\t    key: 'update',\n\t    value: function update() {\n\t      this._controls.update();\n\t    }\n\t\n\t    // Add controls to world instance and store world reference\n\t  }, {\n\t    key: 'addTo',\n\t    value: function addTo(world) {\n\t      world.addControls(this);\n\t      return this;\n\t    }\n\t\n\t    // Internal method called by World.addControls to actually add the controls\n\t  }, {\n\t    key: '_addToWorld',\n\t    value: function _addToWorld(world) {\n\t      this._world = world;\n\t\n\t      // TODO: Override panLeft and panUp methods to prevent panning on Y axis\n\t      // See: http://stackoverflow.com/a/26188674/997339\n\t      this._controls = new _OrbitControls(world._engine._camera, world._container);\n\t\n\t      // Disable keys for now as no events are fired for them anyway\n\t      this._controls.keys = false;\n\t\n\t      // 89 degrees\n\t      this._controls.maxPolarAngle = 1.5533;\n\t\n\t      // this._controls.enableDamping = true;\n\t      // this._controls.dampingFactor = 0.25;\n\t\n\t      this._initEvents();\n\t\n\t      this.emit('added');\n\t    }\n\t  }]);\n\t\n\t  return Orbit;\n\t})(_eventemitter32['default']);\n\t\n\texports['default'] = function () {\n\t  return new Orbit();\n\t};\n\t\n\t;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 30 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(THREE) {\n\t\tvar MOUSE = THREE.MOUSE\n\t\tif (!MOUSE)\n\t\t\tMOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2 };\n\t\n\t\t/**\n\t\t * @author qiao / https://github.com/qiao\n\t\t * @author mrdoob / http://mrdoob.com\n\t\t * @author alteredq / http://alteredqualia.com/\n\t\t * @author WestLangley / http://github.com/WestLangley\n\t\t * @author erich666 / http://erichaines.com\n\t\t */\n\t\t/*global THREE, console */\n\t\n\t\tfunction OrbitConstraint ( object ) {\n\t\n\t\t\tthis.object = object;\n\t\n\t\t\t// \"target\" sets the location of focus, where the object orbits around\n\t\t\t// and where it pans with respect to.\n\t\t\tthis.target = new THREE.Vector3();\n\t\n\t\t\t// Limits to how far you can dolly in and out ( PerspectiveCamera only )\n\t\t\tthis.minDistance = 0;\n\t\t\tthis.maxDistance = Infinity;\n\t\n\t\t\t// Limits to how far you can zoom in and out ( OrthographicCamera only )\n\t\t\tthis.minZoom = 0;\n\t\t\tthis.maxZoom = Infinity;\n\t\n\t\t\t// How far you can orbit vertically, upper and lower limits.\n\t\t\t// Range is 0 to Math.PI radians.\n\t\t\tthis.minPolarAngle = 0; // radians\n\t\t\tthis.maxPolarAngle = Math.PI; // radians\n\t\n\t\t\t// How far you can orbit horizontally, upper and lower limits.\n\t\t\t// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n\t\t\tthis.minAzimuthAngle = - Infinity; // radians\n\t\t\tthis.maxAzimuthAngle = Infinity; // radians\n\t\n\t\t\t// Set to true to enable damping (inertia)\n\t\t\t// If damping is enabled, you must call controls.update() in your animation loop\n\t\t\tthis.enableDamping = false;\n\t\t\tthis.dampingFactor = 0.25;\n\t\n\t\t\t////////////\n\t\t\t// internals\n\t\n\t\t\tvar scope = this;\n\t\n\t\t\tvar EPS = 0.000001;\n\t\n\t\t\t// Current position in spherical coordinate system.\n\t\t\tvar theta;\n\t\t\tvar phi;\n\t\n\t\t\t// Pending changes\n\t\t\tvar phiDelta = 0;\n\t\t\tvar thetaDelta = 0;\n\t\t\tvar scale = 1;\n\t\t\tvar panOffset = new THREE.Vector3();\n\t\t\tvar zoomChanged = false;\n\t\n\t\t\t// API\n\t\n\t\t\tthis.getPolarAngle = function () {\n\t\n\t\t\t\treturn phi;\n\t\n\t\t\t};\n\t\n\t\t\tthis.getAzimuthalAngle = function () {\n\t\n\t\t\t\treturn theta;\n\t\n\t\t\t};\n\t\n\t\t\tthis.rotateLeft = function ( angle ) {\n\t\n\t\t\t\tthetaDelta -= angle;\n\t\n\t\t\t};\n\t\n\t\t\tthis.rotateUp = function ( angle ) {\n\t\n\t\t\t\tphiDelta -= angle;\n\t\n\t\t\t};\n\t\n\t\t\t// pass in distance in world space to move left\n\t\t\tthis.panLeft = function() {\n\t\n\t\t\t\tvar v = new THREE.Vector3();\n\t\n\t\t\t  return function panLeft(distance) {\n\t\t\t    var te = this.object.matrix.elements;\n\t\t\t    var adjDist = distance / Math.cos(phi);\n\t\n\t\t\t    v.set(te[ 0 ], 0, te[ 2 ]).normalize();\n\t\t\t    v.multiplyScalar(-adjDist);\n\t\n\t\t\t    panOffset.add(v);\n\t\t\t  };\n\t\n\t\t\t}();\n\t\n\t\t\t// pass in distance in world space to move up\n\t\t\tthis.panUp = function() {\n\t\n\t\t\t\tvar v = new THREE.Vector3();\n\t\n\t\t\t  return function panUp(distance) {\n\t\t\t    var te = this.object.matrix.elements;\n\t\t\t    var adjDist = distance / Math.cos(phi);\n\t\n\t\t\t    v.set(te[ 8 ], 0, te[ 10 ]).normalize();\n\t\t\t    v.multiplyScalar(-adjDist);\n\t\n\t\t\t    panOffset.add(v);\n\t\t\t  };\n\t\n\t\t\t}();\n\t\n\t\t\t// pass in x,y of change desired in pixel space,\n\t\t\t// right and down are positive\n\t\t\tthis.pan = function ( deltaX, deltaY, screenWidth, screenHeight ) {\n\t\n\t\t\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\n\t\n\t\t\t\t\t// perspective\n\t\t\t\t\tvar position = scope.object.position;\n\t\t\t\t\tvar offset = position.clone().sub( scope.target );\n\t\t\t\t\tvar targetDistance = offset.length();\n\t\n\t\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\t\n\t\t\t\t\t// we actually don't use screenWidth, since perspective camera is fixed to screen height\n\t\t\t\t\tscope.panLeft( 2 * deltaX * targetDistance / screenHeight );\n\t\t\t\t\tscope.panUp( 2 * deltaY * targetDistance / screenHeight );\n\t\n\t\t\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\t\n\t\t\t\t\t// orthographic\n\t\t\t\t\tscope.panLeft( deltaX * ( scope.object.right - scope.object.left ) / screenWidth );\n\t\t\t\t\tscope.panUp( deltaY * ( scope.object.top - scope.object.bottom ) / screenHeight );\n\t\n\t\t\t\t} else {\n\t\n\t\t\t\t\t// camera neither orthographic or perspective\n\t\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\n\t\t\t\t}\n\t\n\t\t\t};\n\t\n\t\t\tthis.dollyIn = function ( dollyScale ) {\n\t\n\t\t\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\n\t\n\t\t\t\t\tscale /= dollyScale;\n\t\n\t\t\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\t\n\t\t\t\t\tscope.object.zoom = Math.max( this.minZoom, Math.min( this.maxZoom, this.object.zoom * dollyScale ) );\n\t\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\t\tzoomChanged = true;\n\t\n\t\t\t\t} else {\n\t\n\t\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\n\t\t\t\t}\n\t\n\t\t\t};\n\t\n\t\t\tthis.dollyOut = function ( dollyScale ) {\n\t\n\t\t\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\n\t\n\t\t\t\t\tscale *= dollyScale;\n\t\n\t\t\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\t\n\t\t\t\t\tscope.object.zoom = Math.max( this.minZoom, Math.min( this.maxZoom, this.object.zoom / dollyScale ) );\n\t\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\t\tzoomChanged = true;\n\t\n\t\t\t\t} else {\n\t\n\t\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\n\t\t\t\t}\n\t\n\t\t\t};\n\t\n\t\t\tthis.update = function() {\n\t\n\t\t\t\tvar offset = new THREE.Vector3();\n\t\n\t\t\t\t// so camera.up is the orbit axis\n\t\t\t\tvar quat = new THREE.Quaternion().setFromUnitVectors( object.up, new THREE.Vector3( 0, 1, 0 ) );\n\t\t\t\tvar quatInverse = quat.clone().inverse();\n\t\n\t\t\t\tvar lastPosition = new THREE.Vector3();\n\t\t\t\tvar lastQuaternion = new THREE.Quaternion();\n\t\n\t\t\t\treturn function () {\n\t\n\t\t\t\t\tvar position = this.object.position;\n\t\n\t\t\t\t\toffset.copy( position ).sub( this.target );\n\t\n\t\t\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\t\t\toffset.applyQuaternion( quat );\n\t\n\t\t\t\t\t// angle from z-axis around y-axis\n\t\n\t\t\t\t\ttheta = Math.atan2( offset.x, offset.z );\n\t\n\t\t\t\t\t// angle from y-axis\n\t\n\t\t\t\t\tphi = Math.atan2( Math.sqrt( offset.x * offset.x + offset.z * offset.z ), offset.y );\n\t\n\t\t\t\t\ttheta += thetaDelta;\n\t\t\t\t\tphi += phiDelta;\n\t\n\t\t\t\t\t// restrict theta to be between desired limits\n\t\t\t\t\ttheta = Math.max( this.minAzimuthAngle, Math.min( this.maxAzimuthAngle, theta ) );\n\t\n\t\t\t\t\t// restrict phi to be between desired limits\n\t\t\t\t\tphi = Math.max( this.minPolarAngle, Math.min( this.maxPolarAngle, phi ) );\n\t\n\t\t\t\t\t// restrict phi to be betwee EPS and PI-EPS\n\t\t\t\t\tphi = Math.max( EPS, Math.min( Math.PI - EPS, phi ) );\n\t\n\t\t\t\t\tvar radius = offset.length() * scale;\n\t\n\t\t\t\t\t// restrict radius to be between desired limits\n\t\t\t\t\tradius = Math.max( this.minDistance, Math.min( this.maxDistance, radius ) );\n\t\n\t\t\t\t\t// move target to panned location\n\t\t\t\t\tthis.target.add( panOffset );\n\t\n\t\t\t\t\toffset.x = radius * Math.sin( phi ) * Math.sin( theta );\n\t\t\t\t\toffset.y = radius * Math.cos( phi );\n\t\t\t\t\toffset.z = radius * Math.sin( phi ) * Math.cos( theta );\n\t\n\t\t\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\t\t\toffset.applyQuaternion( quatInverse );\n\t\n\t\t\t\t\tposition.copy( this.target ).add( offset );\n\t\n\t\t\t\t\tthis.object.lookAt( this.target );\n\t\n\t\t\t\t\tif ( this.enableDamping === true ) {\n\t\n\t\t\t\t\t\tthetaDelta *= ( 1 - this.dampingFactor );\n\t\t\t\t\t\tphiDelta *= ( 1 - this.dampingFactor );\n\t\n\t\t\t\t\t} else {\n\t\n\t\t\t\t\t\tthetaDelta = 0;\n\t\t\t\t\t\tphiDelta = 0;\n\t\n\t\t\t\t\t}\n\t\n\t\t\t\t\tscale = 1;\n\t\t\t\t\tpanOffset.set( 0, 0, 0 );\n\t\n\t\t\t\t\t// update condition is:\n\t\t\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\t\n\t\t\t\t\tif ( zoomChanged ||\n\t\t\t\t\t\t lastPosition.distanceToSquared( this.object.position ) > EPS ||\n\t\t\t\t\t\t8 * ( 1 - lastQuaternion.dot( this.object.quaternion ) ) > EPS ) {\n\t\n\t\t\t\t\t\tlastPosition.copy( this.object.position );\n\t\t\t\t\t\tlastQuaternion.copy( this.object.quaternion );\n\t\t\t\t\t\tzoomChanged = false;\n\t\n\t\t\t\t\t\treturn true;\n\t\n\t\t\t\t\t}\n\t\n\t\t\t\t\treturn false;\n\t\n\t\t\t\t};\n\t\n\t\t\t}();\n\t\n\t\t};\n\t\n\t\n\t\t// This set of controls performs orbiting, dollying (zooming), and panning. It maintains\n\t\t// the \"up\" direction as +Y, unlike the TrackballControls. Touch on tablet and phones is\n\t\t// supported.\n\t\t//\n\t\t//    Orbit - left mouse / touch: one finger move\n\t\t//    Zoom - middle mouse, or mousewheel / touch: two finger spread or squish\n\t\t//    Pan - right mouse, or arrow keys / touch: three finter swipe\n\t\n\t\tfunction OrbitControls ( object, domElement ) {\n\t\n\t\t\tvar constraint = new OrbitConstraint( object );\n\t\n\t\t\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\n\t\n\t\t\t// API\n\t\n\t\t\tObject.defineProperty( this, 'constraint', {\n\t\n\t\t\t\tget: function() {\n\t\n\t\t\t\t\treturn constraint;\n\t\n\t\t\t\t}\n\t\n\t\t\t} );\n\t\n\t\t\tthis.getPolarAngle = function () {\n\t\n\t\t\t\treturn constraint.getPolarAngle();\n\t\n\t\t\t};\n\t\n\t\t\tthis.getAzimuthalAngle = function () {\n\t\n\t\t\t\treturn constraint.getAzimuthalAngle();\n\t\n\t\t\t};\n\t\n\t\t\t// Set to false to disable this control\n\t\t\tthis.enabled = true;\n\t\n\t\t\t// center is old, deprecated; use \"target\" instead\n\t\t\tthis.center = this.target;\n\t\n\t\t\t// This option actually enables dollying in and out; left as \"zoom\" for\n\t\t\t// backwards compatibility.\n\t\t\t// Set to false to disable zooming\n\t\t\tthis.enableZoom = true;\n\t\t\tthis.zoomSpeed = 1.0;\n\t\n\t\t\t// Set to false to disable rotating\n\t\t\tthis.enableRotate = true;\n\t\t\tthis.rotateSpeed = 1.0;\n\t\n\t\t\t// Set to false to disable panning\n\t\t\tthis.enablePan = true;\n\t\t\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\t\n\t\t\t// Set to true to automatically rotate around the target\n\t\t\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\t\t\tthis.autoRotate = false;\n\t\t\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\t\n\t\t\t// Set to false to disable use of the keys\n\t\t\tthis.enableKeys = true;\n\t\n\t\t\t// The four arrow keys\n\t\t\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\t\n\t\t\t// Mouse buttons\n\t\t\tthis.mouseButtons = { ORBIT: THREE.MOUSE.LEFT, ZOOM: THREE.MOUSE.MIDDLE, PAN: THREE.MOUSE.RIGHT };\n\t\n\t\t\t////////////\n\t\t\t// internals\n\t\n\t\t\tvar scope = this;\n\t\n\t\t\tvar rotateStart = new THREE.Vector2();\n\t\t\tvar rotateEnd = new THREE.Vector2();\n\t\t\tvar rotateDelta = new THREE.Vector2();\n\t\n\t\t\tvar panStart = new THREE.Vector2();\n\t\t\tvar panEnd = new THREE.Vector2();\n\t\t\tvar panDelta = new THREE.Vector2();\n\t\n\t\t\tvar dollyStart = new THREE.Vector2();\n\t\t\tvar dollyEnd = new THREE.Vector2();\n\t\t\tvar dollyDelta = new THREE.Vector2();\n\t\n\t\t\tvar STATE = { NONE : - 1, ROTATE : 0, DOLLY : 1, PAN : 2, TOUCH_ROTATE : 3, TOUCH_DOLLY : 4, TOUCH_PAN : 5 };\n\t\n\t\t\tvar state = STATE.NONE;\n\t\n\t\t\t// for reset\n\t\n\t\t\tthis.target0 = this.target.clone();\n\t\t\tthis.position0 = this.object.position.clone();\n\t\t\tthis.zoom0 = this.object.zoom;\n\t\n\t\t\t// events\n\t\n\t\t\tvar changeEvent = { type: 'change' };\n\t\t\tvar startEvent = { type: 'start' };\n\t\t\tvar endEvent = { type: 'end' };\n\t\n\t\t\t// pass in x,y of change desired in pixel space,\n\t\t\t// right and down are positive\n\t\t\tfunction pan( deltaX, deltaY ) {\n\t\n\t\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\t\n\t\t\t\tconstraint.pan( deltaX, deltaY, element.clientWidth, element.clientHeight );\n\t\n\t\t\t}\n\t\n\t\t\tthis.update = function () {\n\t\n\t\t\t\tif ( this.autoRotate && state === STATE.NONE ) {\n\t\n\t\t\t\t\tconstraint.rotateLeft( getAutoRotationAngle() );\n\t\n\t\t\t\t}\n\t\n\t\t\t\tif ( constraint.update() === true ) {\n\t\n\t\t\t\t\tthis.dispatchEvent( changeEvent );\n\t\n\t\t\t\t}\n\t\n\t\t\t};\n\t\n\t\t\tthis.reset = function () {\n\t\n\t\t\t\tstate = STATE.NONE;\n\t\n\t\t\t\tthis.target.copy( this.target0 );\n\t\t\t\tthis.object.position.copy( this.position0 );\n\t\t\t\tthis.object.zoom = this.zoom0;\n\t\n\t\t\t\tthis.object.updateProjectionMatrix();\n\t\t\t\tthis.dispatchEvent( changeEvent );\n\t\n\t\t\t\tthis.update();\n\t\n\t\t\t};\n\t\n\t\t\tfunction getAutoRotationAngle() {\n\t\n\t\t\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\t\n\t\t\t}\n\t\n\t\t\tfunction getZoomScale() {\n\t\n\t\t\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\t\n\t\t\t}\n\t\n\t\t\tfunction onMouseDown( event ) {\n\t\n\t\t\t\tif ( scope.enabled === false ) return;\n\t\n\t\t\t\tevent.preventDefault();\n\t\n\t\t\t\tif ( event.button === scope.mouseButtons.ORBIT ) {\n\t\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\t\n\t\t\t\t\tstate = STATE.ROTATE;\n\t\n\t\t\t\t\trotateStart.set( event.clientX, event.clientY );\n\t\n\t\t\t\t} else if ( event.button === scope.mouseButtons.ZOOM ) {\n\t\n\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\t\n\t\t\t\t\tstate = STATE.DOLLY;\n\t\n\t\t\t\t\tdollyStart.set( event.clientX, event.clientY );\n\t\n\t\t\t\t} else if ( event.button === scope.mouseButtons.PAN ) {\n\t\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\t\n\t\t\t\t\tstate = STATE.PAN;\n\t\n\t\t\t\t\tpanStart.set( event.clientX, event.clientY );\n\t\n\t\t\t\t}\n\t\n\t\t\t\tif ( state !== STATE.NONE ) {\n\t\n\t\t\t\t\tdocument.addEventListener( 'mousemove', onMouseMove, false );\n\t\t\t\t\tdocument.addEventListener( 'mouseup', onMouseUp, false );\n\t\t\t\t\tscope.dispatchEvent( startEvent );\n\t\n\t\t\t\t}\n\t\n\t\t\t}\n\t\n\t\t\tfunction onMouseMove( event ) {\n\t\n\t\t\t\tif ( scope.enabled === false ) return;\n\t\n\t\t\t\tevent.preventDefault();\n\t\n\t\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\t\n\t\t\t\tif ( state === STATE.ROTATE ) {\n\t\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\t\n\t\t\t\t\trotateEnd.set( event.clientX, event.clientY );\n\t\t\t\t\trotateDelta.subVectors( rotateEnd, rotateStart );\n\t\n\t\t\t\t\t// rotating across whole screen goes 360 degrees around\n\t\t\t\t\tconstraint.rotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\n\t\n\t\t\t\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\n\t\t\t\t\tconstraint.rotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\n\t\n\t\t\t\t\trotateStart.copy( rotateEnd );\n\t\n\t\t\t\t} else if ( state === STATE.DOLLY ) {\n\t\n\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\t\n\t\t\t\t\tdollyEnd.set( event.clientX, event.clientY );\n\t\t\t\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\t\n\t\t\t\t\tif ( dollyDelta.y > 0 ) {\n\t\n\t\t\t\t\t\tconstraint.dollyIn( getZoomScale() );\n\t\n\t\t\t\t\t} else if ( dollyDelta.y < 0 ) {\n\t\n\t\t\t\t\t\tconstraint.dollyOut( getZoomScale() );\n\t\n\t\t\t\t\t}\n\t\n\t\t\t\t\tdollyStart.copy( dollyEnd );\n\t\n\t\t\t\t} else if ( state === STATE.PAN ) {\n\t\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\t\n\t\t\t\t\tpanEnd.set( event.clientX, event.clientY );\n\t\t\t\t\tpanDelta.subVectors( panEnd, panStart );\n\t\n\t\t\t\t\tpan( panDelta.x, panDelta.y );\n\t\n\t\t\t\t\tpanStart.copy( panEnd );\n\t\n\t\t\t\t}\n\t\n\t\t\t\tif ( state !== STATE.NONE ) scope.update();\n\t\n\t\t\t}\n\t\n\t\t\tfunction onMouseUp( /* event */ ) {\n\t\n\t\t\t\tif ( scope.enabled === false ) return;\n\t\n\t\t\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\t\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\t\t\t\tscope.dispatchEvent( endEvent );\n\t\t\t\tstate = STATE.NONE;\n\t\n\t\t\t}\n\t\n\t\t\tfunction onMouseWheel( event ) {\n\t\n\t\t\t\tif ( scope.enabled === false || scope.enableZoom === false || state !== STATE.NONE ) return;\n\t\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\n\t\t\t\tvar delta = 0;\n\t\n\t\t\t\tif ( event.wheelDelta !== undefined ) {\n\t\n\t\t\t\t\t// WebKit / Opera / Explorer 9\n\t\n\t\t\t\t\tdelta = event.wheelDelta;\n\t\n\t\t\t\t} else if ( event.detail !== undefined ) {\n\t\n\t\t\t\t\t// Firefox\n\t\n\t\t\t\t\tdelta = - event.detail;\n\t\n\t\t\t\t}\n\t\n\t\t\t\tif ( delta > 0 ) {\n\t\n\t\t\t\t\tconstraint.dollyOut( getZoomScale() );\n\t\n\t\t\t\t} else if ( delta < 0 ) {\n\t\n\t\t\t\t\tconstraint.dollyIn( getZoomScale() );\n\t\n\t\t\t\t}\n\t\n\t\t\t\tscope.update();\n\t\t\t\tscope.dispatchEvent( startEvent );\n\t\t\t\tscope.dispatchEvent( endEvent );\n\t\n\t\t\t}\n\t\n\t\t\tfunction onKeyDown( event ) {\n\t\n\t\t\t\tif ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\n\t\n\t\t\t\tswitch ( event.keyCode ) {\n\t\n\t\t\t\t\tcase scope.keys.UP:\n\t\t\t\t\t\tpan( 0, scope.keyPanSpeed );\n\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\tcase scope.keys.LEFT:\n\t\t\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\tcase scope.keys.RIGHT:\n\t\t\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t}\n\t\n\t\t\t}\n\t\n\t\t\tfunction touchstart( event ) {\n\t\n\t\t\t\tif ( scope.enabled === false ) return;\n\t\n\t\t\t\tswitch ( event.touches.length ) {\n\t\n\t\t\t\t\tcase 1:\t// one-fingered touch: rotate\n\t\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\t\n\t\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\t\n\t\t\t\t\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\tcase 2:\t// two-fingered touch: dolly\n\t\n\t\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\t\n\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY;\n\t\n\t\t\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t\t\t\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\t\t\t\t\t\tdollyStart.set( 0, distance );\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\tcase 3: // three-fingered touch: pan\n\t\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\t\n\t\t\t\t\t\tstate = STATE.TOUCH_PAN;\n\t\n\t\t\t\t\t\tpanStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\tdefault:\n\t\n\t\t\t\t\t\tstate = STATE.NONE;\n\t\n\t\t\t\t}\n\t\n\t\t\t\tif ( state !== STATE.NONE ) scope.dispatchEvent( startEvent );\n\t\n\t\t\t}\n\t\n\t\t\tfunction touchmove( event ) {\n\t\n\t\t\t\tif ( scope.enabled === false ) return;\n\t\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\n\t\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\t\n\t\t\t\tswitch ( event.touches.length ) {\n\t\n\t\t\t\t\tcase 1: // one-fingered touch: rotate\n\t\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\t\t\t\t\t\tif ( state !== STATE.TOUCH_ROTATE ) return;\n\t\n\t\t\t\t\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t\t\t\t\t\trotateDelta.subVectors( rotateEnd, rotateStart );\n\t\n\t\t\t\t\t\t// rotating across whole screen goes 360 degrees around\n\t\t\t\t\t\tconstraint.rotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\n\t\t\t\t\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\n\t\t\t\t\t\tconstraint.rotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\n\t\n\t\t\t\t\t\trotateStart.copy( rotateEnd );\n\t\n\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\tcase 2: // two-fingered touch: dolly\n\t\n\t\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\t\t\t\t\t\tif ( state !== STATE.TOUCH_DOLLY ) return;\n\t\n\t\t\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t\t\t\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\t\n\t\t\t\t\t\tdollyEnd.set( 0, distance );\n\t\t\t\t\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\t\n\t\t\t\t\t\tif ( dollyDelta.y > 0 ) {\n\t\n\t\t\t\t\t\t\tconstraint.dollyOut( getZoomScale() );\n\t\n\t\t\t\t\t\t} else if ( dollyDelta.y < 0 ) {\n\t\n\t\t\t\t\t\t\tconstraint.dollyIn( getZoomScale() );\n\t\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\tdollyStart.copy( dollyEnd );\n\t\n\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\tcase 3: // three-fingered touch: pan\n\t\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\t\t\t\t\t\tif ( state !== STATE.TOUCH_PAN ) return;\n\t\n\t\t\t\t\t\tpanEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t\t\t\t\t\tpanDelta.subVectors( panEnd, panStart );\n\t\n\t\t\t\t\t\tpan( panDelta.x, panDelta.y );\n\t\n\t\t\t\t\t\tpanStart.copy( panEnd );\n\t\n\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\tdefault:\n\t\n\t\t\t\t\t\tstate = STATE.NONE;\n\t\n\t\t\t\t}\n\t\n\t\t\t}\n\t\n\t\t\tfunction touchend( /* event */ ) {\n\t\n\t\t\t\tif ( scope.enabled === false ) return;\n\t\n\t\t\t\tscope.dispatchEvent( endEvent );\n\t\t\t\tstate = STATE.NONE;\n\t\n\t\t\t}\n\t\n\t\t\tfunction contextmenu( event ) {\n\t\n\t\t\t\tevent.preventDefault();\n\t\n\t\t\t}\n\t\n\t\t\tthis.dispose = function() {\n\t\n\t\t\t\tthis.domElement.removeEventListener( 'contextmenu', contextmenu, false );\n\t\t\t\tthis.domElement.removeEventListener( 'mousedown', onMouseDown, false );\n\t\t\t\tthis.domElement.removeEventListener( 'mousewheel', onMouseWheel, false );\n\t\t\t\tthis.domElement.removeEventListener( 'MozMousePixelScroll', onMouseWheel, false ); // firefox\n\t\n\t\t\t\tthis.domElement.removeEventListener( 'touchstart', touchstart, false );\n\t\t\t\tthis.domElement.removeEventListener( 'touchend', touchend, false );\n\t\t\t\tthis.domElement.removeEventListener( 'touchmove', touchmove, false );\n\t\n\t\t\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\t\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\t\n\t\t\t\twindow.removeEventListener( 'keydown', onKeyDown, false );\n\t\n\t\t\t}\n\t\n\t\t\tthis.domElement.addEventListener( 'contextmenu', contextmenu, false );\n\t\n\t\t\tthis.domElement.addEventListener( 'mousedown', onMouseDown, false );\n\t\t\tthis.domElement.addEventListener( 'mousewheel', onMouseWheel, false );\n\t\t\tthis.domElement.addEventListener( 'MozMousePixelScroll', onMouseWheel, false ); // firefox\n\t\n\t\t\tthis.domElement.addEventListener( 'touchstart', touchstart, false );\n\t\t\tthis.domElement.addEventListener( 'touchend', touchend, false );\n\t\t\tthis.domElement.addEventListener( 'touchmove', touchmove, false );\n\t\n\t\t\twindow.addEventListener( 'keydown', onKeyDown, false );\n\t\n\t\t\t// force an update at start\n\t\t\tthis.update();\n\t\n\t\t};\n\t\n\t\tOrbitControls.prototype = Object.create( THREE.EventDispatcher.prototype );\n\t\tOrbitControls.prototype.constructor = OrbitControls;\n\t\n\t\tObject.defineProperties( OrbitControls.prototype, {\n\t\n\t\t\tobject: {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\treturn this.constraint.object;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\ttarget: {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\treturn this.constraint.target;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tconsole.warn( 'THREE.OrbitControls: target is now immutable. Use target.set() instead.' );\n\t\t\t\t\tthis.constraint.target.copy( value );\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tminDistance : {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\treturn this.constraint.minDistance;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tthis.constraint.minDistance = value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tmaxDistance : {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\treturn this.constraint.maxDistance;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tthis.constraint.maxDistance = value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tminZoom : {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\treturn this.constraint.minZoom;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tthis.constraint.minZoom = value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tmaxZoom : {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\treturn this.constraint.maxZoom;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tthis.constraint.maxZoom = value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tminPolarAngle : {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\treturn this.constraint.minPolarAngle;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tthis.constraint.minPolarAngle = value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tmaxPolarAngle : {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\treturn this.constraint.maxPolarAngle;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tthis.constraint.maxPolarAngle = value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tminAzimuthAngle : {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\treturn this.constraint.minAzimuthAngle;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tthis.constraint.minAzimuthAngle = value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tmaxAzimuthAngle : {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\treturn this.constraint.maxAzimuthAngle;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tthis.constraint.maxAzimuthAngle = value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tenableDamping : {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\treturn this.constraint.enableDamping;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tthis.constraint.enableDamping = value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tdampingFactor : {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\treturn this.constraint.dampingFactor;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tthis.constraint.dampingFactor = value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\t// backward compatibility\n\t\n\t\t\tnoZoom: {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\n\t\t\t\t\treturn ! this.enableZoom;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\n\t\t\t\t\tthis.enableZoom = ! value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tnoRotate: {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\n\t\t\t\t\treturn ! this.enableRotate;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\n\t\t\t\t\tthis.enableRotate = ! value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tnoPan: {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\n\t\t\t\t\treturn ! this.enablePan;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\n\t\t\t\t\tthis.enablePan = ! value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tnoKeys: {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\n\t\t\t\t\treturn ! this.enableKeys;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\n\t\t\t\t\tthis.enableKeys = ! value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tstaticMoving : {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\n\t\t\t\t\treturn ! this.constraint.enableDamping;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\n\t\t\t\t\tthis.constraint.enableDamping = ! value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tdynamicDampingFactor : {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\n\t\t\t\t\treturn this.constraint.dampingFactor;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\n\t\t\t\t\tthis.constraint.dampingFactor = value;\n\t\n\t\t\t\t}\n\t\n\t\t\t}\n\t\n\t\t} );\n\t\n\t\treturn OrbitControls;\n\t}\n\n\n/***/ },\n/* 31 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar _Layer2 = __webpack_require__(32);\n\t\n\tvar _Layer3 = _interopRequireDefault(_Layer2);\n\t\n\tvar _three = __webpack_require__(24);\n\t\n\tvar _three2 = _interopRequireDefault(_three);\n\t\n\tvar EnvironmentLayer = (function (_Layer) {\n\t  _inherits(EnvironmentLayer, _Layer);\n\t\n\t  function EnvironmentLayer() {\n\t    _classCallCheck(this, EnvironmentLayer);\n\t\n\t    _get(Object.getPrototypeOf(EnvironmentLayer.prototype), 'constructor', this).call(this);\n\t\n\t    this._initLights();\n\t    // this._initGrid();\n\t  }\n\t\n\t  // Initialise without requiring new keyword\n\t\n\t  _createClass(EnvironmentLayer, [{\n\t    key: '_onAdd',\n\t    value: function _onAdd() {}\n\t\n\t    // Not fleshed out or thought through yet\n\t    //\n\t    // Lights could potentially be put it their own 'layer' to keep this class\n\t    // much simpler and less messy\n\t  }, {\n\t    key: '_initLights',\n\t    value: function _initLights() {\n\t      // Position doesn't really matter (the angle is important), however it's\n\t      // used here so the helpers look more natural.\n\t\n\t      var directionalLight = new _three2['default'].DirectionalLight(0x999999);\n\t      directionalLight.intesity = 0.1;\n\t      directionalLight.position.x = 100;\n\t      directionalLight.position.y = 100;\n\t      directionalLight.position.z = 100;\n\t\n\t      var directionalLight2 = new _three2['default'].DirectionalLight(0x999999);\n\t      directionalLight2.intesity = 0.1;\n\t      directionalLight2.position.x = -100;\n\t      directionalLight2.position.y = 100;\n\t      directionalLight2.position.z = -100;\n\t\n\t      var helper = new _three2['default'].DirectionalLightHelper(directionalLight, 10);\n\t      var helper2 = new _three2['default'].DirectionalLightHelper(directionalLight2, 10);\n\t\n\t      this._layer.add(directionalLight);\n\t      this._layer.add(directionalLight2);\n\t\n\t      this._layer.add(helper);\n\t      this._layer.add(helper2);\n\t    }\n\t\n\t    // Add grid helper for context during initial development\n\t  }, {\n\t    key: '_initGrid',\n\t    value: function _initGrid() {\n\t      var size = 4000;\n\t      var step = 100;\n\t\n\t      var gridHelper = new _three2['default'].GridHelper(size, step);\n\t      this._layer.add(gridHelper);\n\t    }\n\t  }]);\n\t\n\t  return EnvironmentLayer;\n\t})(_Layer3['default']);\n\t\n\texports['default'] = function () {\n\t  return new EnvironmentLayer();\n\t};\n\t\n\t;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 32 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar _eventemitter3 = __webpack_require__(2);\n\t\n\tvar _eventemitter32 = _interopRequireDefault(_eventemitter3);\n\t\n\tvar _three = __webpack_require__(24);\n\t\n\tvar _three2 = _interopRequireDefault(_three);\n\t\n\tvar _engineScene = __webpack_require__(25);\n\t\n\tvar _engineScene2 = _interopRequireDefault(_engineScene);\n\t\n\tvar Layer = (function (_EventEmitter) {\n\t  _inherits(Layer, _EventEmitter);\n\t\n\t  function Layer() {\n\t    _classCallCheck(this, Layer);\n\t\n\t    _get(Object.getPrototypeOf(Layer.prototype), 'constructor', this).call(this);\n\t\n\t    this._layer = new _three2['default'].Object3D();\n\t  }\n\t\n\t  // Add layer to world instance and store world reference\n\t\n\t  _createClass(Layer, [{\n\t    key: 'addTo',\n\t    value: function addTo(world) {\n\t      world.addLayer(this);\n\t      return this;\n\t    }\n\t\n\t    // Internal method called by World.addLayer to actually add the layer\n\t  }, {\n\t    key: '_addToWorld',\n\t    value: function _addToWorld(world) {\n\t      this._world = world;\n\t      this._onAdd(world);\n\t      this.emit('added');\n\t    }\n\t  }]);\n\t\n\t  return Layer;\n\t})(_eventemitter32['default']);\n\t\n\texports['default'] = Layer;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 33 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar _Layer2 = __webpack_require__(32);\n\t\n\tvar _Layer3 = _interopRequireDefault(_Layer2);\n\t\n\tvar _TileCache = __webpack_require__(34);\n\t\n\tvar _TileCache2 = _interopRequireDefault(_TileCache);\n\t\n\tvar _GridBaseMaterial = __webpack_require__(45);\n\t\n\tvar _GridBaseMaterial2 = _interopRequireDefault(_GridBaseMaterial);\n\t\n\tvar _lodashThrottle = __webpack_require__(46);\n\t\n\tvar _lodashThrottle2 = _interopRequireDefault(_lodashThrottle);\n\t\n\tvar _three = __webpack_require__(24);\n\t\n\tvar _three2 = _interopRequireDefault(_three);\n\t\n\t// DONE: Prevent tiles from being loaded if they are further than a certain\n\t// distance from the camera and are unlikely to be seen anyway\n\t\n\t// DONE: Find a way to avoid the flashing caused by the gap between old tiles\n\t// being removed and the new tiles being ready for display\n\t//\n\t// DONE: Simplest first step for MVP would be to give each tile mesh the colour\n\t// of the basemap ground so it blends in a little more, or have a huge ground\n\t// plane underneath all the tiles that shows through between tile updates.\n\t//\n\t// Could keep the old tiles around until the new ones are ready, though they'd\n\t// probably need to be layered in a way so the old tiles don't overlap new ones,\n\t// which is similar to how Leaflet approaches this (it has 2 layers)\n\t//\n\t// Could keep the tile from the previous quadtree level visible until all 4\n\t// tiles at the new / current level have finished loading and are displayed.\n\t// Perhaps by keeping a map of tiles by quadcode and a boolean for each of the\n\t// child quadcodes showing whether they are loaded and in view. If all true then\n\t// remove the parent tile, otherwise keep it on a lower layer.\n\t\n\t// TODO: Avoid performing LOD calculation when it isn't required. For example,\n\t// when nothing has changed since the last frame and there are no tiles to be\n\t// loaded or in need of rendering\n\t\n\t// TODO: Only remove tiles from the layer that aren't to be rendered in the\n\t// current frame it seems excessive to remove all tiles and re-add them on\n\t// every single frame, even if it's just array manipulation\n\t\n\t// TODO: Fix LOD calculation so min and max LOD can be changed without causing\n\t// problems (eg. making min above 5 causes all sorts of issues)\n\t\n\t// TODO: Reuse THREE objects where possible instead of creating new instances\n\t// on every LOD calculation\n\t\n\t// TODO: Consider not using THREE or LatLon / Point objects in LOD calculations\n\t// to avoid creating unnecessary memory for garbage collection\n\t\n\t// TODO: Load and display a base layer separate to the LOD grid that is at a low\n\t// resolution used as a backup / background to fill in empty areas / distance\n\t\n\t// DONE: Fix the issue where some tiles just don't load, or at least the texture\n\t// never shows up tends to happen if you quickly zoom in / out past it while\n\t// it's still loading, leaving a blank space\n\t\n\t// TODO: Optimise the request of many image tiles look at how Leaflet and\n\t// OpenWebGlobe approach this (eg. batching, queues, etc)\n\t\n\t// TODO: Cancel pending tile requests if they get removed from view before they\n\t// reach a ready state (eg. cancel image requests, etc). Need to ensure that the\n\t// images are re-requested when the tile is next in scene (even if from cache)\n\t\n\t// TODO: Prioritise loading of tiles at highest level in the quadtree (those\n\t// closest to the camera) so visual inconsistancies during loading are minimised\n\t\n\tvar GridLayer = (function (_Layer) {\n\t  _inherits(GridLayer, _Layer);\n\t\n\t  function GridLayer() {\n\t    _classCallCheck(this, GridLayer);\n\t\n\t    _get(Object.getPrototypeOf(GridLayer.prototype), 'constructor', this).call(this);\n\t\n\t    this._tileCache = new _TileCache2['default'](1000);\n\t\n\t    // TODO: Work out why changing the minLOD causes loads of issues\n\t    this._minLOD = 3;\n\t    this._maxLOD = 18;\n\t\n\t    this._frustum = new _three2['default'].Frustum();\n\t  }\n\t\n\t  // Initialise without requiring new keyword\n\t\n\t  _createClass(GridLayer, [{\n\t    key: '_onAdd',\n\t    value: function _onAdd(world) {\n\t      var _this = this;\n\t\n\t      this._initEvents();\n\t\n\t      // Add base layer\n\t      var geom = new _three2['default'].PlaneBufferGeometry(40000, 40000, 1);\n\t      var mesh = new _three2['default'].Mesh(geom, (0, _GridBaseMaterial2['default'])('#f5f5f3'));\n\t      mesh.rotation.x = -90 * Math.PI / 180;\n\t\n\t      this._baseLayer = mesh;\n\t      this._layer.add(mesh);\n\t\n\t      // Trigger initial quadtree calculation on the next frame\n\t      //\n\t      // TODO: This is a hack to ensure the camera is all set up - a better\n\t      // solution should be found\n\t      setTimeout(function () {\n\t        _this._calculateLOD();\n\t      }, 0);\n\t    }\n\t  }, {\n\t    key: '_initEvents',\n\t    value: function _initEvents() {\n\t      var _this2 = this;\n\t\n\t      // Run LOD calculations based on render calls\n\t      //\n\t      // Throttled to 1 LOD calculation per 100ms\n\t      this._world.on('preUpdate', (0, _lodashThrottle2['default'])(function () {\n\t        _this2._calculateLOD();\n\t      }, 100));\n\t\n\t      this._world.on('move', function (latlon, point) {\n\t        _this2._moveBaseLayer(point);\n\t      });\n\t    }\n\t  }, {\n\t    key: '_moveBaseLayer',\n\t    value: function _moveBaseLayer(point) {\n\t      this._baseLayer.position.x = point.x;\n\t      this._baseLayer.position.z = point.y;\n\t    }\n\t  }, {\n\t    key: '_updateFrustum',\n\t    value: function _updateFrustum() {\n\t      var camera = this._world.getCamera();\n\t      var projScreenMatrix = new _three2['default'].Matrix4();\n\t      projScreenMatrix.multiplyMatrices(camera.projectionMatrix, camera.matrixWorldInverse);\n\t\n\t      this._frustum.setFromMatrix(camera.projectionMatrix);\n\t      this._frustum.setFromMatrix(new _three2['default'].Matrix4().multiplyMatrices(camera.projectionMatrix, camera.matrixWorldInverse));\n\t    }\n\t  }, {\n\t    key: '_tileInFrustum',\n\t    value: function _tileInFrustum(tile) {\n\t      var bounds = tile.getBounds();\n\t      return this._frustum.intersectsBox(new _three2['default'].Box3(new _three2['default'].Vector3(bounds[0], 0, bounds[3]), new _three2['default'].Vector3(bounds[2], 0, bounds[1])));\n\t    }\n\t  }, {\n\t    key: '_calculateLOD',\n\t    value: function _calculateLOD() {\n\t      var _this3 = this;\n\t\n\t      if (this._stop) {\n\t        return;\n\t      }\n\t\n\t      // var start = performance.now();\n\t\n\t      var camera = this._world.getCamera();\n\t\n\t      // 1. Update and retrieve camera frustum\n\t      this._updateFrustum(this._frustum, camera);\n\t\n\t      // 2. Add the four root items of the quadtree to a check list\n\t      var checkList = this._checklist;\n\t      checkList = [];\n\t      checkList.push(this._tileCache.requestTile('0', this));\n\t      checkList.push(this._tileCache.requestTile('1', this));\n\t      checkList.push(this._tileCache.requestTile('2', this));\n\t      checkList.push(this._tileCache.requestTile('3', this));\n\t\n\t      // 3. Call Divide, passing in the check list\n\t      this._divide(checkList);\n\t\n\t      // 4. Remove all tiles from layer\n\t      this._removeTiles();\n\t\n\t      // 5. Render the tiles remaining in the check list\n\t      checkList.forEach(function (tile, index) {\n\t        // Skip tile if it's not in the current view frustum\n\t        if (!_this3._tileInFrustum(tile)) {\n\t          return;\n\t        }\n\t\n\t        // // TODO: Can probably speed this up\n\t        // var center = tile.getCenter();\n\t        // var dist = (new THREE.Vector3(center[0], 0, center[1])).sub(camera.position).length();\n\t\n\t        // Manual distance limit to cut down on tiles so far away\n\t        // if (dist > 8000) {\n\t        //   return;\n\t        // }\n\t\n\t        // Does the tile have a mesh?\n\t        //\n\t        // If yes, continue\n\t        // If no, generate tile mesh, request texture and skip\n\t        if (!tile.getMesh()) {\n\t          tile.requestTileAsync();\n\t          return;\n\t        }\n\t\n\t        // Are the mesh and texture ready?\n\t        //\n\t        // If yes, continue\n\t        // If no, skip\n\t        if (!tile.isReady()) {\n\t          return;\n\t        }\n\t\n\t        // Add tile to layer (and to scene)\n\t        _this3._layer.add(tile.getMesh());\n\t      });\n\t\n\t      // console.log(performance.now() - start);\n\t    }\n\t  }, {\n\t    key: '_divide',\n\t    value: function _divide(checkList) {\n\t      var count = 0;\n\t      var currentItem;\n\t      var quadcode;\n\t\n\t      // 1. Loop until count equals check list length\n\t      while (count != checkList.length) {\n\t        currentItem = checkList[count];\n\t        quadcode = currentItem.getQuadcode();\n\t\n\t        // 2. Increase count and continue loop if quadcode equals max LOD / zoom\n\t        if (currentItem.length === this._maxLOD) {\n\t          count++;\n\t          continue;\n\t        }\n\t\n\t        // 3. Else, calculate screen-space error metric for quadcode\n\t        if (this._screenSpaceError(currentItem)) {\n\t          // 4. If error is sufficient...\n\t\n\t          // 4a. Remove parent item from the check list\n\t          checkList.splice(count, 1);\n\t\n\t          // 4b. Add 4 child items to the check list\n\t          checkList.push(this._tileCache.requestTile(quadcode + '0', this));\n\t          checkList.push(this._tileCache.requestTile(quadcode + '1', this));\n\t          checkList.push(this._tileCache.requestTile(quadcode + '2', this));\n\t          checkList.push(this._tileCache.requestTile(quadcode + '3', this));\n\t\n\t          // 4d. Continue the loop without increasing count\n\t          continue;\n\t        } else {\n\t          // 5. Else, increase count and continue loop\n\t          count++;\n\t        }\n\t      }\n\t    }\n\t  }, {\n\t    key: '_screenSpaceError',\n\t    value: function _screenSpaceError(tile) {\n\t      var minDepth = this._minLOD;\n\t      var maxDepth = this._maxLOD;\n\t\n\t      var quadcode = tile.getQuadcode();\n\t\n\t      var camera = this._world.getCamera();\n\t\n\t      // Tweak this value to refine specific point that each quad is subdivided\n\t      //\n\t      // It's used to multiple the dimensions of the tile sides before\n\t      // comparing against the tile distance from camera\n\t      var quality = 3.0;\n\t\n\t      // 1. Return false if quadcode length is greater than maxDepth\n\t      if (quadcode.length > maxDepth) {\n\t        return false;\n\t      }\n\t\n\t      // 2. Return true if quadcode length is less than minDepth\n\t      if (quadcode.length < minDepth) {\n\t        return true;\n\t      }\n\t\n\t      // 3. Return false if quadcode bounds are not in view frustum\n\t      if (!this._tileInFrustum(tile)) {\n\t        return false;\n\t      }\n\t\n\t      var center = tile.getCenter();\n\t\n\t      // 4. Calculate screen-space error metric\n\t      // TODO: Use closest distance to one of the 4 tile corners\n\t      var dist = new _three2['default'].Vector3(center[0], 0, center[1]).sub(camera.position).length();\n\t\n\t      var error = quality * tile.getSide() / dist;\n\t\n\t      // 5. Return true if error is greater than 1.0, else return false\n\t      return error > 1.0;\n\t    }\n\t  }, {\n\t    key: '_removeTiles',\n\t    value: function _removeTiles() {\n\t      // i >= 1 (instead of 0) to skip the grid base layer\n\t      for (var i = this._layer.children.length - 1; i >= 1; i--) {\n\t        this._layer.remove(this._layer.children[i]);\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return GridLayer;\n\t})(_Layer3['default']);\n\t\n\texports['default'] = function () {\n\t  return new GridLayer();\n\t};\n\t\n\t;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 34 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar _lruCache = __webpack_require__(35);\n\t\n\tvar _lruCache2 = _interopRequireDefault(_lruCache);\n\t\n\tvar _Tile = __webpack_require__(43);\n\t\n\tvar _Tile2 = _interopRequireDefault(_Tile);\n\t\n\t// This process is based on a similar approach taken by OpenWebGlobe\n\t// See: https://github.com/OpenWebGlobe/WebViewer/blob/master/source/core/globecache.js\n\t\n\tvar TileCache = (function () {\n\t  function TileCache(cacheLimit) {\n\t    _classCallCheck(this, TileCache);\n\t\n\t    this._cache = (0, _lruCache2['default'])(cacheLimit);\n\t  }\n\t\n\t  // Returns true if all specified tile providers are ready to be used\n\t  // Otherwise, returns false\n\t\n\t  _createClass(TileCache, [{\n\t    key: 'isReady',\n\t    value: function isReady() {\n\t      return false;\n\t    }\n\t\n\t    // Get a cached tile or request a new one if not in cache\n\t  }, {\n\t    key: 'requestTile',\n\t    value: function requestTile(quadcode, layer) {\n\t      var tile = this._cache.get(quadcode);\n\t\n\t      if (!tile) {\n\t        // Set up a brand new tile\n\t        tile = new _Tile2['default'](quadcode, layer);\n\t\n\t        // Request data for various tile providers\n\t        // tile.requestData(imageProviders);\n\t\n\t        // Add tile to cache, though it won't be ready yet as the data is being\n\t        // requested from various places asynchronously\n\t        this._cache.set(quadcode, tile);\n\t      }\n\t\n\t      return tile;\n\t    }\n\t\n\t    // Get a cached tile without requesting a new one\n\t  }, {\n\t    key: 'getTile',\n\t    value: function getTile(quadcode) {\n\t      return this._cache.get(quadcode);\n\t    }\n\t\n\t    // Destroy the cache and remove it from memory\n\t    //\n\t    // TODO: Call destroy method on items in cache\n\t  }, {\n\t    key: 'destroy',\n\t    value: function destroy() {\n\t      this._cache.reset();\n\t    }\n\t  }]);\n\t\n\t  return TileCache;\n\t})();\n\t\n\texports['default'] = TileCache;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 35 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = LRUCache\n\t\n\t// This will be a proper iterable 'Map' in engines that support it,\n\t// or a fakey-fake PseudoMap in older versions.\n\tvar Map = __webpack_require__(36)\n\tvar util = __webpack_require__(39)\n\t\n\t// A linked list to keep track of recently-used-ness\n\tvar Yallist = __webpack_require__(42)\n\t\n\t// use symbols if possible, otherwise just _props\n\tvar symbols = {}\n\tvar hasSymbol = typeof Symbol === 'function'\n\tvar makeSymbol\n\tif (hasSymbol) {\n\t  makeSymbol = function (key) {\n\t    return Symbol.for(key)\n\t  }\n\t} else {\n\t  makeSymbol = function (key) {\n\t    return '_' + key\n\t  }\n\t}\n\t\n\tfunction priv (obj, key, val) {\n\t  var sym\n\t  if (symbols[key]) {\n\t    sym = symbols[key]\n\t  } else {\n\t    sym = makeSymbol(key)\n\t    symbols[key] = sym\n\t  }\n\t  if (arguments.length === 2) {\n\t    return obj[sym]\n\t  } else {\n\t    obj[sym] = val\n\t    return val\n\t  }\n\t}\n\t\n\tfunction naiveLength () { return 1 }\n\t\n\t// lruList is a yallist where the head is the youngest\n\t// item, and the tail is the oldest.  the list contains the Hit\n\t// objects as the entries.\n\t// Each Hit object has a reference to its Yallist.Node.  This\n\t// never changes.\n\t//\n\t// cache is a Map (or PseudoMap) that matches the keys to\n\t// the Yallist.Node object.\n\tfunction LRUCache (options) {\n\t  if (!(this instanceof LRUCache)) {\n\t    return new LRUCache(options)\n\t  }\n\t\n\t  if (typeof options === 'number') {\n\t    options = { max: options }\n\t  }\n\t\n\t  if (!options) {\n\t    options = {}\n\t  }\n\t\n\t  var max = priv(this, 'max', options.max)\n\t  // Kind of weird to have a default max of Infinity, but oh well.\n\t  if (!max ||\n\t      !(typeof max === 'number') ||\n\t      max <= 0) {\n\t    priv(this, 'max', Infinity)\n\t  }\n\t\n\t  var lc = options.length || naiveLength\n\t  if (typeof lc !== 'function') {\n\t    lc = naiveLength\n\t  }\n\t  priv(this, 'lengthCalculator', lc)\n\t\n\t  priv(this, 'allowStale', options.stale || false)\n\t  priv(this, 'maxAge', options.maxAge || 0)\n\t  priv(this, 'dispose', options.dispose)\n\t  this.reset()\n\t}\n\t\n\t// resize the cache when the max changes.\n\tObject.defineProperty(LRUCache.prototype, 'max', {\n\t  set: function (mL) {\n\t    if (!mL || !(typeof mL === 'number') || mL <= 0) {\n\t      mL = Infinity\n\t    }\n\t    priv(this, 'max', mL)\n\t    trim(this)\n\t  },\n\t  get: function () {\n\t    return priv(this, 'max')\n\t  },\n\t  enumerable: true\n\t})\n\t\n\tObject.defineProperty(LRUCache.prototype, 'allowStale', {\n\t  set: function (allowStale) {\n\t    priv(this, 'allowStale', !!allowStale)\n\t  },\n\t  get: function () {\n\t    return priv(this, 'allowStale')\n\t  },\n\t  enumerable: true\n\t})\n\t\n\tObject.defineProperty(LRUCache.prototype, 'maxAge', {\n\t  set: function (mA) {\n\t    if (!mA || !(typeof mA === 'number') || mA < 0) {\n\t      mA = 0\n\t    }\n\t    priv(this, 'maxAge', mA)\n\t    trim(this)\n\t  },\n\t  get: function () {\n\t    return priv(this, 'maxAge')\n\t  },\n\t  enumerable: true\n\t})\n\t\n\t// resize the cache when the lengthCalculator changes.\n\tObject.defineProperty(LRUCache.prototype, 'lengthCalculator', {\n\t  set: function (lC) {\n\t    if (typeof lC !== 'function') {\n\t      lC = naiveLength\n\t    }\n\t    if (lC !== priv(this, 'lengthCalculator')) {\n\t      priv(this, 'lengthCalculator', lC)\n\t      priv(this, 'length', 0)\n\t      priv(this, 'lruList').forEach(function (hit) {\n\t        hit.length = priv(this, 'lengthCalculator').call(this, hit.value, hit.key)\n\t        priv(this, 'length', priv(this, 'length') + hit.length)\n\t      }, this)\n\t    }\n\t    trim(this)\n\t  },\n\t  get: function () { return priv(this, 'lengthCalculator') },\n\t  enumerable: true\n\t})\n\t\n\tObject.defineProperty(LRUCache.prototype, 'length', {\n\t  get: function () { return priv(this, 'length') },\n\t  enumerable: true\n\t})\n\t\n\tObject.defineProperty(LRUCache.prototype, 'itemCount', {\n\t  get: function () { return priv(this, 'lruList').length },\n\t  enumerable: true\n\t})\n\t\n\tLRUCache.prototype.rforEach = function (fn, thisp) {\n\t  thisp = thisp || this\n\t  for (var walker = priv(this, 'lruList').tail; walker !== null;) {\n\t    var prev = walker.prev\n\t    forEachStep(this, fn, walker, thisp)\n\t    walker = prev\n\t  }\n\t}\n\t\n\tfunction forEachStep (self, fn, node, thisp) {\n\t  var hit = node.value\n\t  if (isStale(self, hit)) {\n\t    del(self, node)\n\t    if (!priv(self, 'allowStale')) {\n\t      hit = undefined\n\t    }\n\t  }\n\t  if (hit) {\n\t    fn.call(thisp, hit.value, hit.key, self)\n\t  }\n\t}\n\t\n\tLRUCache.prototype.forEach = function (fn, thisp) {\n\t  thisp = thisp || this\n\t  for (var walker = priv(this, 'lruList').head; walker !== null;) {\n\t    var next = walker.next\n\t    forEachStep(this, fn, walker, thisp)\n\t    walker = next\n\t  }\n\t}\n\t\n\tLRUCache.prototype.keys = function () {\n\t  return priv(this, 'lruList').toArray().map(function (k) {\n\t    return k.key\n\t  }, this)\n\t}\n\t\n\tLRUCache.prototype.values = function () {\n\t  return priv(this, 'lruList').toArray().map(function (k) {\n\t    return k.value\n\t  }, this)\n\t}\n\t\n\tLRUCache.prototype.reset = function () {\n\t  if (priv(this, 'dispose') &&\n\t      priv(this, 'lruList') &&\n\t      priv(this, 'lruList').length) {\n\t    priv(this, 'lruList').forEach(function (hit) {\n\t      priv(this, 'dispose').call(this, hit.key, hit.value)\n\t    }, this)\n\t  }\n\t\n\t  priv(this, 'cache', new Map()) // hash of items by key\n\t  priv(this, 'lruList', new Yallist()) // list of items in order of use recency\n\t  priv(this, 'length', 0) // length of items in the list\n\t}\n\t\n\tLRUCache.prototype.dump = function () {\n\t  return priv(this, 'lruList').map(function (hit) {\n\t    if (!isStale(this, hit)) {\n\t      return {\n\t        k: hit.key,\n\t        v: hit.value,\n\t        e: hit.now + (hit.maxAge || 0)\n\t      }\n\t    }\n\t  }, this).toArray().filter(function (h) {\n\t    return h\n\t  })\n\t}\n\t\n\tLRUCache.prototype.dumpLru = function () {\n\t  return priv(this, 'lruList')\n\t}\n\t\n\tLRUCache.prototype.inspect = function (n, opts) {\n\t  var str = 'LRUCache {'\n\t  var extras = false\n\t\n\t  var as = priv(this, 'allowStale')\n\t  if (as) {\n\t    str += '\\n  allowStale: true'\n\t    extras = true\n\t  }\n\t\n\t  var max = priv(this, 'max')\n\t  if (max && max !== Infinity) {\n\t    if (extras) {\n\t      str += ','\n\t    }\n\t    str += '\\n  max: ' + util.inspect(max, opts)\n\t    extras = true\n\t  }\n\t\n\t  var maxAge = priv(this, 'maxAge')\n\t  if (maxAge) {\n\t    if (extras) {\n\t      str += ','\n\t    }\n\t    str += '\\n  maxAge: ' + util.inspect(maxAge, opts)\n\t    extras = true\n\t  }\n\t\n\t  var lc = priv(this, 'lengthCalculator')\n\t  if (lc && lc !== naiveLength) {\n\t    if (extras) {\n\t      str += ','\n\t    }\n\t    str += '\\n  length: ' + util.inspect(priv(this, 'length'), opts)\n\t    extras = true\n\t  }\n\t\n\t  var didFirst = false\n\t  priv(this, 'lruList').forEach(function (item) {\n\t    if (didFirst) {\n\t      str += ',\\n  '\n\t    } else {\n\t      if (extras) {\n\t        str += ',\\n'\n\t      }\n\t      didFirst = true\n\t      str += '\\n  '\n\t    }\n\t    var key = util.inspect(item.key).split('\\n').join('\\n  ')\n\t    var val = { value: item.value }\n\t    if (item.maxAge !== maxAge) {\n\t      val.maxAge = item.maxAge\n\t    }\n\t    if (lc !== naiveLength) {\n\t      val.length = item.length\n\t    }\n\t    if (isStale(this, item)) {\n\t      val.stale = true\n\t    }\n\t\n\t    val = util.inspect(val, opts).split('\\n').join('\\n  ')\n\t    str += key + ' => ' + val\n\t  })\n\t\n\t  if (didFirst || extras) {\n\t    str += '\\n'\n\t  }\n\t  str += '}'\n\t\n\t  return str\n\t}\n\t\n\tLRUCache.prototype.set = function (key, value, maxAge) {\n\t  maxAge = maxAge || priv(this, 'maxAge')\n\t\n\t  var now = maxAge ? Date.now() : 0\n\t  var len = priv(this, 'lengthCalculator').call(this, value, key)\n\t\n\t  if (priv(this, 'cache').has(key)) {\n\t    if (len > priv(this, 'max')) {\n\t      del(this, priv(this, 'cache').get(key))\n\t      return false\n\t    }\n\t\n\t    var node = priv(this, 'cache').get(key)\n\t    var item = node.value\n\t\n\t    // dispose of the old one before overwriting\n\t    if (priv(this, 'dispose')) {\n\t      priv(this, 'dispose').call(this, key, item.value)\n\t    }\n\t\n\t    item.now = now\n\t    item.maxAge = maxAge\n\t    item.value = value\n\t    priv(this, 'length', priv(this, 'length') + (len - item.length))\n\t    item.length = len\n\t    this.get(key)\n\t    trim(this)\n\t    return true\n\t  }\n\t\n\t  var hit = new Entry(key, value, len, now, maxAge)\n\t\n\t  // oversized objects fall out of cache automatically.\n\t  if (hit.length > priv(this, 'max')) {\n\t    if (priv(this, 'dispose')) {\n\t      priv(this, 'dispose').call(this, key, value)\n\t    }\n\t    return false\n\t  }\n\t\n\t  priv(this, 'length', priv(this, 'length') + hit.length)\n\t  priv(this, 'lruList').unshift(hit)\n\t  priv(this, 'cache').set(key, priv(this, 'lruList').head)\n\t  trim(this)\n\t  return true\n\t}\n\t\n\tLRUCache.prototype.has = function (key) {\n\t  if (!priv(this, 'cache').has(key)) return false\n\t  var hit = priv(this, 'cache').get(key).value\n\t  if (isStale(this, hit)) {\n\t    return false\n\t  }\n\t  return true\n\t}\n\t\n\tLRUCache.prototype.get = function (key) {\n\t  return get(this, key, true)\n\t}\n\t\n\tLRUCache.prototype.peek = function (key) {\n\t  return get(this, key, false)\n\t}\n\t\n\tLRUCache.prototype.pop = function () {\n\t  var node = priv(this, 'lruList').tail\n\t  if (!node) return null\n\t  del(this, node)\n\t  return node.value\n\t}\n\t\n\tLRUCache.prototype.del = function (key) {\n\t  del(this, priv(this, 'cache').get(key))\n\t}\n\t\n\tLRUCache.prototype.load = function (arr) {\n\t  // reset the cache\n\t  this.reset()\n\t\n\t  var now = Date.now()\n\t  // A previous serialized cache has the most recent items first\n\t  for (var l = arr.length - 1; l >= 0; l--) {\n\t    var hit = arr[l]\n\t    var expiresAt = hit.e || 0\n\t    if (expiresAt === 0) {\n\t      // the item was created without expiration in a non aged cache\n\t      this.set(hit.k, hit.v)\n\t    } else {\n\t      var maxAge = expiresAt - now\n\t      // dont add already expired items\n\t      if (maxAge > 0) {\n\t        this.set(hit.k, hit.v, maxAge)\n\t      }\n\t    }\n\t  }\n\t}\n\t\n\tLRUCache.prototype.prune = function () {\n\t  var self = this\n\t  priv(this, 'cache').forEach(function (value, key) {\n\t    get(self, key, false)\n\t  })\n\t}\n\t\n\tfunction get (self, key, doUse) {\n\t  var node = priv(self, 'cache').get(key)\n\t  if (node) {\n\t    var hit = node.value\n\t    if (isStale(self, hit)) {\n\t      del(self, node)\n\t      if (!priv(self, 'allowStale')) hit = undefined\n\t    } else {\n\t      if (doUse) {\n\t        priv(self, 'lruList').unshiftNode(node)\n\t      }\n\t    }\n\t    if (hit) hit = hit.value\n\t  }\n\t  return hit\n\t}\n\t\n\tfunction isStale (self, hit) {\n\t  if (!hit || (!hit.maxAge && !priv(self, 'maxAge'))) {\n\t    return false\n\t  }\n\t  var stale = false\n\t  var diff = Date.now() - hit.now\n\t  if (hit.maxAge) {\n\t    stale = diff > hit.maxAge\n\t  } else {\n\t    stale = priv(self, 'maxAge') && (diff > priv(self, 'maxAge'))\n\t  }\n\t  return stale\n\t}\n\t\n\tfunction trim (self) {\n\t  if (priv(self, 'length') > priv(self, 'max')) {\n\t    for (var walker = priv(self, 'lruList').tail;\n\t         priv(self, 'length') > priv(self, 'max') && walker !== null;) {\n\t      // We know that we're about to delete this one, and also\n\t      // what the next least recently used key will be, so just\n\t      // go ahead and set it now.\n\t      var prev = walker.prev\n\t      del(self, walker)\n\t      walker = prev\n\t    }\n\t  }\n\t}\n\t\n\tfunction del (self, node) {\n\t  if (node) {\n\t    var hit = node.value\n\t    if (priv(self, 'dispose')) {\n\t      priv(self, 'dispose').call(this, hit.key, hit.value)\n\t    }\n\t    priv(self, 'length', priv(self, 'length') - hit.length)\n\t    priv(self, 'cache').delete(hit.key)\n\t    priv(self, 'lruList').removeNode(node)\n\t  }\n\t}\n\t\n\t// classy, since V8 prefers predictable objects.\n\tfunction Entry (key, value, length, now, maxAge) {\n\t  this.key = key\n\t  this.value = value\n\t  this.length = length\n\t  this.now = now\n\t  this.maxAge = maxAge || 0\n\t}\n\n\n/***/ },\n/* 36 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(process) {if (process.env.npm_package_name === 'pseudomap' &&\n\t    process.env.npm_lifecycle_script === 'test')\n\t  process.env.TEST_PSEUDOMAP = 'true'\n\t\n\tif (typeof Map === 'function' && !process.env.TEST_PSEUDOMAP) {\n\t  module.exports = Map\n\t} else {\n\t  module.exports = __webpack_require__(38)\n\t}\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(37)))\n\n/***/ },\n/* 37 */\n/***/ function(module, exports) {\n\n\t// shim for using process in browser\n\t\n\tvar process = module.exports = {};\n\tvar queue = [];\n\tvar draining = false;\n\tvar currentQueue;\n\tvar queueIndex = -1;\n\t\n\tfunction cleanUpNextTick() {\n\t    draining = false;\n\t    if (currentQueue.length) {\n\t        queue = currentQueue.concat(queue);\n\t    } else {\n\t        queueIndex = -1;\n\t    }\n\t    if (queue.length) {\n\t        drainQueue();\n\t    }\n\t}\n\t\n\tfunction drainQueue() {\n\t    if (draining) {\n\t        return;\n\t    }\n\t    var timeout = setTimeout(cleanUpNextTick);\n\t    draining = true;\n\t\n\t    var len = queue.length;\n\t    while(len) {\n\t        currentQueue = queue;\n\t        queue = [];\n\t        while (++queueIndex < len) {\n\t            if (currentQueue) {\n\t                currentQueue[queueIndex].run();\n\t            }\n\t        }\n\t        queueIndex = -1;\n\t        len = queue.length;\n\t    }\n\t    currentQueue = null;\n\t    draining = false;\n\t    clearTimeout(timeout);\n\t}\n\t\n\tprocess.nextTick = function (fun) {\n\t    var args = new Array(arguments.length - 1);\n\t    if (arguments.length > 1) {\n\t        for (var i = 1; i < arguments.length; i++) {\n\t            args[i - 1] = arguments[i];\n\t        }\n\t    }\n\t    queue.push(new Item(fun, args));\n\t    if (queue.length === 1 && !draining) {\n\t        setTimeout(drainQueue, 0);\n\t    }\n\t};\n\t\n\t// v8 likes predictible objects\n\tfunction Item(fun, array) {\n\t    this.fun = fun;\n\t    this.array = array;\n\t}\n\tItem.prototype.run = function () {\n\t    this.fun.apply(null, this.array);\n\t};\n\tprocess.title = 'browser';\n\tprocess.browser = true;\n\tprocess.env = {};\n\tprocess.argv = [];\n\tprocess.version = ''; // empty string to avoid regexp issues\n\tprocess.versions = {};\n\t\n\tfunction noop() {}\n\t\n\tprocess.on = noop;\n\tprocess.addListener = noop;\n\tprocess.once = noop;\n\tprocess.off = noop;\n\tprocess.removeListener = noop;\n\tprocess.removeAllListeners = noop;\n\tprocess.emit = noop;\n\t\n\tprocess.binding = function (name) {\n\t    throw new Error('process.binding is not supported');\n\t};\n\t\n\tprocess.cwd = function () { return '/' };\n\tprocess.chdir = function (dir) {\n\t    throw new Error('process.chdir is not supported');\n\t};\n\tprocess.umask = function() { return 0; };\n\n\n/***/ },\n/* 38 */\n/***/ function(module, exports) {\n\n\tvar hasOwnProperty = Object.prototype.hasOwnProperty\n\t\n\tmodule.exports = PseudoMap\n\t\n\tfunction PseudoMap (set) {\n\t  if (!(this instanceof PseudoMap)) // whyyyyyyy\n\t    throw new TypeError(\"Constructor PseudoMap requires 'new'\")\n\t\n\t  this.clear()\n\t\n\t  if (set) {\n\t    if ((set instanceof PseudoMap) ||\n\t        (typeof Map === 'function' && set instanceof Map))\n\t      set.forEach(function (value, key) {\n\t        this.set(key, value)\n\t      }, this)\n\t    else if (Array.isArray(set))\n\t      set.forEach(function (kv) {\n\t        this.set(kv[0], kv[1])\n\t      }, this)\n\t    else\n\t      throw new TypeError('invalid argument')\n\t  }\n\t}\n\t\n\tPseudoMap.prototype.forEach = function (fn, thisp) {\n\t  thisp = thisp || this\n\t  Object.keys(this._data).forEach(function (k) {\n\t    if (k !== 'size')\n\t      fn.call(thisp, this._data[k].value, this._data[k].key)\n\t  }, this)\n\t}\n\t\n\tPseudoMap.prototype.has = function (k) {\n\t  return !!find(this._data, k)\n\t}\n\t\n\tPseudoMap.prototype.get = function (k) {\n\t  var res = find(this._data, k)\n\t  return res && res.value\n\t}\n\t\n\tPseudoMap.prototype.set = function (k, v) {\n\t  set(this._data, k, v)\n\t}\n\t\n\tPseudoMap.prototype.delete = function (k) {\n\t  var res = find(this._data, k)\n\t  if (res) {\n\t    delete this._data[res._index]\n\t    this._data.size--\n\t  }\n\t}\n\t\n\tPseudoMap.prototype.clear = function () {\n\t  var data = Object.create(null)\n\t  data.size = 0\n\t\n\t  Object.defineProperty(this, '_data', {\n\t    value: data,\n\t    enumerable: false,\n\t    configurable: true,\n\t    writable: false\n\t  })\n\t}\n\t\n\tObject.defineProperty(PseudoMap.prototype, 'size', {\n\t  get: function () {\n\t    return this._data.size\n\t  },\n\t  set: function (n) {},\n\t  enumerable: true,\n\t  configurable: true\n\t})\n\t\n\tPseudoMap.prototype.values =\n\tPseudoMap.prototype.keys =\n\tPseudoMap.prototype.entries = function () {\n\t  throw new Error('iterators are not implemented in this version')\n\t}\n\t\n\t// Either identical, or both NaN\n\tfunction same (a, b) {\n\t  return a === b || a !== a && b !== b\n\t}\n\t\n\tfunction Entry (k, v, i) {\n\t  this.key = k\n\t  this.value = v\n\t  this._index = i\n\t}\n\t\n\tfunction find (data, k) {\n\t  for (var i = 0, s = '_' + k, key = s;\n\t       hasOwnProperty.call(data, key);\n\t       key = s + i++) {\n\t    if (same(data[key].key, k))\n\t      return data[key]\n\t  }\n\t}\n\t\n\tfunction set (data, k, v) {\n\t  for (var i = 0, s = '_' + k, key = s;\n\t       hasOwnProperty.call(data, key);\n\t       key = s + i++) {\n\t    if (same(data[key].key, k)) {\n\t      data[key].value = v\n\t      return\n\t    }\n\t  }\n\t  data.size++\n\t  data[key] = new Entry(k, v, key)\n\t}\n\n\n/***/ },\n/* 39 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(global, process) {// Copyright Joyent, Inc. and other Node contributors.\n\t//\n\t// Permission is hereby granted, free of charge, to any person obtaining a\n\t// copy of this software and associated documentation files (the\n\t// \"Software\"), to deal in the Software without restriction, including\n\t// without limitation the rights to use, copy, modify, merge, publish,\n\t// distribute, sublicense, and/or sell copies of the Software, and to permit\n\t// persons to whom the Software is furnished to do so, subject to the\n\t// following conditions:\n\t//\n\t// The above copyright notice and this permission notice shall be included\n\t// in all copies or substantial portions of the Software.\n\t//\n\t// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n\t// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n\t// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n\t// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n\t// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n\t// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\t\n\tvar formatRegExp = /%[sdj%]/g;\n\texports.format = function(f) {\n\t  if (!isString(f)) {\n\t    var objects = [];\n\t    for (var i = 0; i < arguments.length; i++) {\n\t      objects.push(inspect(arguments[i]));\n\t    }\n\t    return objects.join(' ');\n\t  }\n\t\n\t  var i = 1;\n\t  var args = arguments;\n\t  var len = args.length;\n\t  var str = String(f).replace(formatRegExp, function(x) {\n\t    if (x === '%%') return '%';\n\t    if (i >= len) return x;\n\t    switch (x) {\n\t      case '%s': return String(args[i++]);\n\t      case '%d': return Number(args[i++]);\n\t      case '%j':\n\t        try {\n\t          return JSON.stringify(args[i++]);\n\t        } catch (_) {\n\t          return '[Circular]';\n\t        }\n\t      default:\n\t        return x;\n\t    }\n\t  });\n\t  for (var x = args[i]; i < len; x = args[++i]) {\n\t    if (isNull(x) || !isObject(x)) {\n\t      str += ' ' + x;\n\t    } else {\n\t      str += ' ' + inspect(x);\n\t    }\n\t  }\n\t  return str;\n\t};\n\t\n\t\n\t// Mark that a method should not be used.\n\t// Returns a modified function which warns once by default.\n\t// If --no-deprecation is set, then it is a no-op.\n\texports.deprecate = function(fn, msg) {\n\t  // Allow for deprecating things in the process of starting up.\n\t  if (isUndefined(global.process)) {\n\t    return function() {\n\t      return exports.deprecate(fn, msg).apply(this, arguments);\n\t    };\n\t  }\n\t\n\t  if (process.noDeprecation === true) {\n\t    return fn;\n\t  }\n\t\n\t  var warned = false;\n\t  function deprecated() {\n\t    if (!warned) {\n\t      if (process.throwDeprecation) {\n\t        throw new Error(msg);\n\t      } else if (process.traceDeprecation) {\n\t        console.trace(msg);\n\t      } else {\n\t        console.error(msg);\n\t      }\n\t      warned = true;\n\t    }\n\t    return fn.apply(this, arguments);\n\t  }\n\t\n\t  return deprecated;\n\t};\n\t\n\t\n\tvar debugs = {};\n\tvar debugEnviron;\n\texports.debuglog = function(set) {\n\t  if (isUndefined(debugEnviron))\n\t    debugEnviron = process.env.NODE_DEBUG || '';\n\t  set = set.toUpperCase();\n\t  if (!debugs[set]) {\n\t    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n\t      var pid = process.pid;\n\t      debugs[set] = function() {\n\t        var msg = exports.format.apply(exports, arguments);\n\t        console.error('%s %d: %s', set, pid, msg);\n\t      };\n\t    } else {\n\t      debugs[set] = function() {};\n\t    }\n\t  }\n\t  return debugs[set];\n\t};\n\t\n\t\n\t/**\n\t * Echos the value of a value. Trys to print the value out\n\t * in the best way possible given the different types.\n\t *\n\t * @param {Object} obj The object to print out.\n\t * @param {Object} opts Optional options object that alters the output.\n\t */\n\t/* legacy: obj, showHidden, depth, colors*/\n\tfunction inspect(obj, opts) {\n\t  // default options\n\t  var ctx = {\n\t    seen: [],\n\t    stylize: stylizeNoColor\n\t  };\n\t  // legacy...\n\t  if (arguments.length >= 3) ctx.depth = arguments[2];\n\t  if (arguments.length >= 4) ctx.colors = arguments[3];\n\t  if (isBoolean(opts)) {\n\t    // legacy...\n\t    ctx.showHidden = opts;\n\t  } else if (opts) {\n\t    // got an \"options\" object\n\t    exports._extend(ctx, opts);\n\t  }\n\t  // set default options\n\t  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n\t  if (isUndefined(ctx.depth)) ctx.depth = 2;\n\t  if (isUndefined(ctx.colors)) ctx.colors = false;\n\t  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n\t  if (ctx.colors) ctx.stylize = stylizeWithColor;\n\t  return formatValue(ctx, obj, ctx.depth);\n\t}\n\texports.inspect = inspect;\n\t\n\t\n\t// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\n\tinspect.colors = {\n\t  'bold' : [1, 22],\n\t  'italic' : [3, 23],\n\t  'underline' : [4, 24],\n\t  'inverse' : [7, 27],\n\t  'white' : [37, 39],\n\t  'grey' : [90, 39],\n\t  'black' : [30, 39],\n\t  'blue' : [34, 39],\n\t  'cyan' : [36, 39],\n\t  'green' : [32, 39],\n\t  'magenta' : [35, 39],\n\t  'red' : [31, 39],\n\t  'yellow' : [33, 39]\n\t};\n\t\n\t// Don't use 'blue' not visible on cmd.exe\n\tinspect.styles = {\n\t  'special': 'cyan',\n\t  'number': 'yellow',\n\t  'boolean': 'yellow',\n\t  'undefined': 'grey',\n\t  'null': 'bold',\n\t  'string': 'green',\n\t  'date': 'magenta',\n\t  // \"name\": intentionally not styling\n\t  'regexp': 'red'\n\t};\n\t\n\t\n\tfunction stylizeWithColor(str, styleType) {\n\t  var style = inspect.styles[styleType];\n\t\n\t  if (style) {\n\t    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n\t           '\\u001b[' + inspect.colors[style][1] + 'm';\n\t  } else {\n\t    return str;\n\t  }\n\t}\n\t\n\t\n\tfunction stylizeNoColor(str, styleType) {\n\t  return str;\n\t}\n\t\n\t\n\tfunction arrayToHash(array) {\n\t  var hash = {};\n\t\n\t  array.forEach(function(val, idx) {\n\t    hash[val] = true;\n\t  });\n\t\n\t  return hash;\n\t}\n\t\n\t\n\tfunction formatValue(ctx, value, recurseTimes) {\n\t  // Provide a hook for user-specified inspect functions.\n\t  // Check that value is an object with an inspect function on it\n\t  if (ctx.customInspect &&\n\t      value &&\n\t      isFunction(value.inspect) &&\n\t      // Filter out the util module, it's inspect function is special\n\t      value.inspect !== exports.inspect &&\n\t      // Also filter out any prototype objects using the circular check.\n\t      !(value.constructor && value.constructor.prototype === value)) {\n\t    var ret = value.inspect(recurseTimes, ctx);\n\t    if (!isString(ret)) {\n\t      ret = formatValue(ctx, ret, recurseTimes);\n\t    }\n\t    return ret;\n\t  }\n\t\n\t  // Primitive types cannot have properties\n\t  var primitive = formatPrimitive(ctx, value);\n\t  if (primitive) {\n\t    return primitive;\n\t  }\n\t\n\t  // Look up the keys of the object.\n\t  var keys = Object.keys(value);\n\t  var visibleKeys = arrayToHash(keys);\n\t\n\t  if (ctx.showHidden) {\n\t    keys = Object.getOwnPropertyNames(value);\n\t  }\n\t\n\t  // IE doesn't make error fields non-enumerable\n\t  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n\t  if (isError(value)\n\t      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n\t    return formatError(value);\n\t  }\n\t\n\t  // Some type of object without properties can be shortcutted.\n\t  if (keys.length === 0) {\n\t    if (isFunction(value)) {\n\t      var name = value.name ? ': ' + value.name : '';\n\t      return ctx.stylize('[Function' + name + ']', 'special');\n\t    }\n\t    if (isRegExp(value)) {\n\t      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n\t    }\n\t    if (isDate(value)) {\n\t      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n\t    }\n\t    if (isError(value)) {\n\t      return formatError(value);\n\t    }\n\t  }\n\t\n\t  var base = '', array = false, braces = ['{', '}'];\n\t\n\t  // Make Array say that they are Array\n\t  if (isArray(value)) {\n\t    array = true;\n\t    braces = ['[', ']'];\n\t  }\n\t\n\t  // Make functions say that they are functions\n\t  if (isFunction(value)) {\n\t    var n = value.name ? ': ' + value.name : '';\n\t    base = ' [Function' + n + ']';\n\t  }\n\t\n\t  // Make RegExps say that they are RegExps\n\t  if (isRegExp(value)) {\n\t    base = ' ' + RegExp.prototype.toString.call(value);\n\t  }\n\t\n\t  // Make dates with properties first say the date\n\t  if (isDate(value)) {\n\t    base = ' ' + Date.prototype.toUTCString.call(value);\n\t  }\n\t\n\t  // Make error with message first say the error\n\t  if (isError(value)) {\n\t    base = ' ' + formatError(value);\n\t  }\n\t\n\t  if (keys.length === 0 && (!array || value.length == 0)) {\n\t    return braces[0] + base + braces[1];\n\t  }\n\t\n\t  if (recurseTimes < 0) {\n\t    if (isRegExp(value)) {\n\t      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n\t    } else {\n\t      return ctx.stylize('[Object]', 'special');\n\t    }\n\t  }\n\t\n\t  ctx.seen.push(value);\n\t\n\t  var output;\n\t  if (array) {\n\t    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n\t  } else {\n\t    output = keys.map(function(key) {\n\t      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n\t    });\n\t  }\n\t\n\t  ctx.seen.pop();\n\t\n\t  return reduceToSingleString(output, base, braces);\n\t}\n\t\n\t\n\tfunction formatPrimitive(ctx, value) {\n\t  if (isUndefined(value))\n\t    return ctx.stylize('undefined', 'undefined');\n\t  if (isString(value)) {\n\t    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n\t                                             .replace(/'/g, \"\\\\'\")\n\t                                             .replace(/\\\\\"/g, '\"') + '\\'';\n\t    return ctx.stylize(simple, 'string');\n\t  }\n\t  if (isNumber(value))\n\t    return ctx.stylize('' + value, 'number');\n\t  if (isBoolean(value))\n\t    return ctx.stylize('' + value, 'boolean');\n\t  // For some reason typeof null is \"object\", so special case here.\n\t  if (isNull(value))\n\t    return ctx.stylize('null', 'null');\n\t}\n\t\n\t\n\tfunction formatError(value) {\n\t  return '[' + Error.prototype.toString.call(value) + ']';\n\t}\n\t\n\t\n\tfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n\t  var output = [];\n\t  for (var i = 0, l = value.length; i < l; ++i) {\n\t    if (hasOwnProperty(value, String(i))) {\n\t      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n\t          String(i), true));\n\t    } else {\n\t      output.push('');\n\t    }\n\t  }\n\t  keys.forEach(function(key) {\n\t    if (!key.match(/^\\d+$/)) {\n\t      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n\t          key, true));\n\t    }\n\t  });\n\t  return output;\n\t}\n\t\n\t\n\tfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n\t  var name, str, desc;\n\t  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n\t  if (desc.get) {\n\t    if (desc.set) {\n\t      str = ctx.stylize('[Getter/Setter]', 'special');\n\t    } else {\n\t      str = ctx.stylize('[Getter]', 'special');\n\t    }\n\t  } else {\n\t    if (desc.set) {\n\t      str = ctx.stylize('[Setter]', 'special');\n\t    }\n\t  }\n\t  if (!hasOwnProperty(visibleKeys, key)) {\n\t    name = '[' + key + ']';\n\t  }\n\t  if (!str) {\n\t    if (ctx.seen.indexOf(desc.value) < 0) {\n\t      if (isNull(recurseTimes)) {\n\t        str = formatValue(ctx, desc.value, null);\n\t      } else {\n\t        str = formatValue(ctx, desc.value, recurseTimes - 1);\n\t      }\n\t      if (str.indexOf('\\n') > -1) {\n\t        if (array) {\n\t          str = str.split('\\n').map(function(line) {\n\t            return '  ' + line;\n\t          }).join('\\n').substr(2);\n\t        } else {\n\t          str = '\\n' + str.split('\\n').map(function(line) {\n\t            return '   ' + line;\n\t          }).join('\\n');\n\t        }\n\t      }\n\t    } else {\n\t      str = ctx.stylize('[Circular]', 'special');\n\t    }\n\t  }\n\t  if (isUndefined(name)) {\n\t    if (array && key.match(/^\\d+$/)) {\n\t      return str;\n\t    }\n\t    name = JSON.stringify('' + key);\n\t    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n\t      name = name.substr(1, name.length - 2);\n\t      name = ctx.stylize(name, 'name');\n\t    } else {\n\t      name = name.replace(/'/g, \"\\\\'\")\n\t                 .replace(/\\\\\"/g, '\"')\n\t                 .replace(/(^\"|\"$)/g, \"'\");\n\t      name = ctx.stylize(name, 'string');\n\t    }\n\t  }\n\t\n\t  return name + ': ' + str;\n\t}\n\t\n\t\n\tfunction reduceToSingleString(output, base, braces) {\n\t  var numLinesEst = 0;\n\t  var length = output.reduce(function(prev, cur) {\n\t    numLinesEst++;\n\t    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n\t    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n\t  }, 0);\n\t\n\t  if (length > 60) {\n\t    return braces[0] +\n\t           (base === '' ? '' : base + '\\n ') +\n\t           ' ' +\n\t           output.join(',\\n  ') +\n\t           ' ' +\n\t           braces[1];\n\t  }\n\t\n\t  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n\t}\n\t\n\t\n\t// NOTE: These type checking functions intentionally don't use `instanceof`\n\t// because it is fragile and can be easily faked with `Object.create()`.\n\tfunction isArray(ar) {\n\t  return Array.isArray(ar);\n\t}\n\texports.isArray = isArray;\n\t\n\tfunction isBoolean(arg) {\n\t  return typeof arg === 'boolean';\n\t}\n\texports.isBoolean = isBoolean;\n\t\n\tfunction isNull(arg) {\n\t  return arg === null;\n\t}\n\texports.isNull = isNull;\n\t\n\tfunction isNullOrUndefined(arg) {\n\t  return arg == null;\n\t}\n\texports.isNullOrUndefined = isNullOrUndefined;\n\t\n\tfunction isNumber(arg) {\n\t  return typeof arg === 'number';\n\t}\n\texports.isNumber = isNumber;\n\t\n\tfunction isString(arg) {\n\t  return typeof arg === 'string';\n\t}\n\texports.isString = isString;\n\t\n\tfunction isSymbol(arg) {\n\t  return typeof arg === 'symbol';\n\t}\n\texports.isSymbol = isSymbol;\n\t\n\tfunction isUndefined(arg) {\n\t  return arg === void 0;\n\t}\n\texports.isUndefined = isUndefined;\n\t\n\tfunction isRegExp(re) {\n\t  return isObject(re) && objectToString(re) === '[object RegExp]';\n\t}\n\texports.isRegExp = isRegExp;\n\t\n\tfunction isObject(arg) {\n\t  return typeof arg === 'object' && arg !== null;\n\t}\n\texports.isObject = isObject;\n\t\n\tfunction isDate(d) {\n\t  return isObject(d) && objectToString(d) === '[object Date]';\n\t}\n\texports.isDate = isDate;\n\t\n\tfunction isError(e) {\n\t  return isObject(e) &&\n\t      (objectToString(e) === '[object Error]' || e instanceof Error);\n\t}\n\texports.isError = isError;\n\t\n\tfunction isFunction(arg) {\n\t  return typeof arg === 'function';\n\t}\n\texports.isFunction = isFunction;\n\t\n\tfunction isPrimitive(arg) {\n\t  return arg === null ||\n\t         typeof arg === 'boolean' ||\n\t         typeof arg === 'number' ||\n\t         typeof arg === 'string' ||\n\t         typeof arg === 'symbol' ||  // ES6 symbol\n\t         typeof arg === 'undefined';\n\t}\n\texports.isPrimitive = isPrimitive;\n\t\n\texports.isBuffer = __webpack_require__(40);\n\t\n\tfunction objectToString(o) {\n\t  return Object.prototype.toString.call(o);\n\t}\n\t\n\t\n\tfunction pad(n) {\n\t  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n\t}\n\t\n\t\n\tvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n\t              'Oct', 'Nov', 'Dec'];\n\t\n\t// 26 Feb 16:19:34\n\tfunction timestamp() {\n\t  var d = new Date();\n\t  var time = [pad(d.getHours()),\n\t              pad(d.getMinutes()),\n\t              pad(d.getSeconds())].join(':');\n\t  return [d.getDate(), months[d.getMonth()], time].join(' ');\n\t}\n\t\n\t\n\t// log is just a thin wrapper to console.log that prepends a timestamp\n\texports.log = function() {\n\t  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n\t};\n\t\n\t\n\t/**\n\t * Inherit the prototype methods from one constructor into another.\n\t *\n\t * The Function.prototype.inherits from lang.js rewritten as a standalone\n\t * function (not on Function.prototype). NOTE: If this file is to be loaded\n\t * during bootstrapping this function needs to be rewritten using some native\n\t * functions as prototype setup using normal JavaScript does not work as\n\t * expected during bootstrapping (see mirror.js in r114903).\n\t *\n\t * @param {function} ctor Constructor function which needs to inherit the\n\t *     prototype.\n\t * @param {function} superCtor Constructor function to inherit prototype from.\n\t */\n\texports.inherits = __webpack_require__(41);\n\t\n\texports._extend = function(origin, add) {\n\t  // Don't do anything if add isn't an object\n\t  if (!add || !isObject(add)) return origin;\n\t\n\t  var keys = Object.keys(add);\n\t  var i = keys.length;\n\t  while (i--) {\n\t    origin[keys[i]] = add[keys[i]];\n\t  }\n\t  return origin;\n\t};\n\t\n\tfunction hasOwnProperty(obj, prop) {\n\t  return Object.prototype.hasOwnProperty.call(obj, prop);\n\t}\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }()), __webpack_require__(37)))\n\n/***/ },\n/* 40 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function isBuffer(arg) {\n\t  return arg && typeof arg === 'object'\n\t    && typeof arg.copy === 'function'\n\t    && typeof arg.fill === 'function'\n\t    && typeof arg.readUInt8 === 'function';\n\t}\n\n/***/ },\n/* 41 */\n/***/ function(module, exports) {\n\n\tif (typeof Object.create === 'function') {\n\t  // implementation from standard node.js 'util' module\n\t  module.exports = function inherits(ctor, superCtor) {\n\t    ctor.super_ = superCtor\n\t    ctor.prototype = Object.create(superCtor.prototype, {\n\t      constructor: {\n\t        value: ctor,\n\t        enumerable: false,\n\t        writable: true,\n\t        configurable: true\n\t      }\n\t    });\n\t  };\n\t} else {\n\t  // old school shim for old browsers\n\t  module.exports = function inherits(ctor, superCtor) {\n\t    ctor.super_ = superCtor\n\t    var TempCtor = function () {}\n\t    TempCtor.prototype = superCtor.prototype\n\t    ctor.prototype = new TempCtor()\n\t    ctor.prototype.constructor = ctor\n\t  }\n\t}\n\n\n/***/ },\n/* 42 */\n/***/ function(module, exports) {\n\n\tmodule.exports = Yallist\n\t\n\tYallist.Node = Node\n\tYallist.create = Yallist\n\t\n\tfunction Yallist (list) {\n\t  var self = this\n\t  if (!(self instanceof Yallist)) {\n\t    self = new Yallist()\n\t  }\n\t\n\t  self.tail = null\n\t  self.head = null\n\t  self.length = 0\n\t\n\t  if (list && typeof list.forEach === 'function') {\n\t    list.forEach(function (item) {\n\t      self.push(item)\n\t    })\n\t  } else if (arguments.length > 0) {\n\t    for (var i = 0, l = arguments.length; i < l; i++) {\n\t      self.push(arguments[i])\n\t    }\n\t  }\n\t\n\t  return self\n\t}\n\t\n\tYallist.prototype.removeNode = function (node) {\n\t  if (node.list !== this) {\n\t    throw new Error('removing node which does not belong to this list')\n\t  }\n\t\n\t  var next = node.next\n\t  var prev = node.prev\n\t\n\t  if (next) {\n\t    next.prev = prev\n\t  }\n\t\n\t  if (prev) {\n\t    prev.next = next\n\t  }\n\t\n\t  if (node === this.head) {\n\t    this.head = next\n\t  }\n\t  if (node === this.tail) {\n\t    this.tail = prev\n\t  }\n\t\n\t  node.list.length --\n\t  node.next = null\n\t  node.prev = null\n\t  node.list = null\n\t}\n\t\n\tYallist.prototype.unshiftNode = function (node) {\n\t  if (node === this.head) {\n\t    return\n\t  }\n\t\n\t  if (node.list) {\n\t    node.list.removeNode(node)\n\t  }\n\t\n\t  var head = this.head\n\t  node.list = this\n\t  node.next = head\n\t  if (head) {\n\t    head.prev = node\n\t  }\n\t\n\t  this.head = node\n\t  if (!this.tail) {\n\t    this.tail = node\n\t  }\n\t  this.length ++\n\t}\n\t\n\tYallist.prototype.pushNode = function (node) {\n\t  if (node === this.tail) {\n\t    return\n\t  }\n\t\n\t  if (node.list) {\n\t    node.list.removeNode(node)\n\t  }\n\t\n\t  var tail = this.tail\n\t  node.list = this\n\t  node.prev = tail\n\t  if (tail) {\n\t    tail.next = node\n\t  }\n\t\n\t  this.tail = node\n\t  if (!this.head) {\n\t    this.head = node\n\t  }\n\t  this.length ++\n\t}\n\t\n\tYallist.prototype.push = function () {\n\t  for (var i = 0, l = arguments.length; i < l; i++) {\n\t    push(this, arguments[i])\n\t  }\n\t  return this.length\n\t}\n\t\n\tYallist.prototype.unshift = function () {\n\t  for (var i = 0, l = arguments.length; i < l; i++) {\n\t    unshift(this, arguments[i])\n\t  }\n\t  return this.length\n\t}\n\t\n\tYallist.prototype.pop = function () {\n\t  if (!this.tail)\n\t    return undefined\n\t\n\t  var res = this.tail.value\n\t  this.tail = this.tail.prev\n\t  this.tail.next = null\n\t  this.length --\n\t  return res\n\t}\n\t\n\tYallist.prototype.shift = function () {\n\t  if (!this.head)\n\t    return undefined\n\t\n\t  var res = this.head.value\n\t  this.head = this.head.next\n\t  this.head.prev = null\n\t  this.length --\n\t  return res\n\t}\n\t\n\tYallist.prototype.forEach = function (fn, thisp) {\n\t  thisp = thisp || this\n\t  for (var walker = this.head, i = 0; walker !== null; i++) {\n\t    fn.call(thisp, walker.value, i, this)\n\t    walker = walker.next\n\t  }\n\t}\n\t\n\tYallist.prototype.forEachReverse = function (fn, thisp) {\n\t  thisp = thisp || this\n\t  for (var walker = this.tail, i = this.length - 1; walker !== null; i--) {\n\t    fn.call(thisp, walker.value, i, this)\n\t    walker = walker.prev\n\t  }\n\t}\n\t\n\tYallist.prototype.get = function (n) {\n\t  for (var i = 0, walker = this.head; walker !== null && i < n; i++) {\n\t    // abort out of the list early if we hit a cycle\n\t    walker = walker.next\n\t  }\n\t  if (i === n && walker !== null) {\n\t    return walker.value\n\t  }\n\t}\n\t\n\tYallist.prototype.getReverse = function (n) {\n\t  for (var i = 0, walker = this.tail; walker !== null && i < n; i++) {\n\t    // abort out of the list early if we hit a cycle\n\t    walker = walker.prev\n\t  }\n\t  if (i === n && walker !== null) {\n\t    return walker.value\n\t  }\n\t}\n\t\n\tYallist.prototype.map = function (fn, thisp) {\n\t  thisp = thisp || this\n\t  var res = new Yallist()\n\t  for (var walker = this.head; walker !== null; ) {\n\t    res.push(fn.call(thisp, walker.value, this))\n\t    walker = walker.next\n\t  }\n\t  return res\n\t}\n\t\n\tYallist.prototype.mapReverse = function (fn, thisp) {\n\t  thisp = thisp || this\n\t  var res = new Yallist()\n\t  for (var walker = this.tail; walker !== null;) {\n\t    res.push(fn.call(thisp, walker.value, this))\n\t    walker = walker.prev\n\t  }\n\t  return res\n\t}\n\t\n\tYallist.prototype.reduce = function (fn, initial) {\n\t  var acc\n\t  var walker = this.head\n\t  if (arguments.length > 1) {\n\t    acc = initial\n\t  } else if (this.head) {\n\t    walker = this.head.next\n\t    acc = this.head.value\n\t  } else {\n\t    throw new TypeError('Reduce of empty list with no initial value')\n\t  }\n\t\n\t  for (var i = 0; walker !== null; i++) {\n\t    acc = fn(acc, walker.value, i)\n\t    walker = walker.next\n\t  }\n\t\n\t  return acc\n\t}\n\t\n\tYallist.prototype.reduceReverse = function (fn, initial) {\n\t  var acc\n\t  var walker = this.tail\n\t  if (arguments.length > 1) {\n\t    acc = initial\n\t  } else if (this.tail) {\n\t    walker = this.tail.prev\n\t    acc = this.tail.value\n\t  } else {\n\t    throw new TypeError('Reduce of empty list with no initial value')\n\t  }\n\t\n\t  for (var i = this.length - 1; walker !== null; i--) {\n\t    acc = fn(acc, walker.value, i)\n\t    walker = walker.prev\n\t  }\n\t\n\t  return acc\n\t}\n\t\n\tYallist.prototype.toArray = function () {\n\t  var arr = new Array(this.length)\n\t  for (var i = 0, walker = this.head; walker !== null; i++) {\n\t    arr[i] = walker.value\n\t    walker = walker.next\n\t  }\n\t  return arr\n\t}\n\t\n\tYallist.prototype.toArrayReverse = function () {\n\t  var arr = new Array(this.length)\n\t  for (var i = 0, walker = this.tail; walker !== null; i++) {\n\t    arr[i] = walker.value\n\t    walker = walker.prev\n\t  }\n\t  return arr\n\t}\n\t\n\tYallist.prototype.slice = function (from, to) {\n\t  to = to || this.length\n\t  if (to < 0) {\n\t    to += this.length\n\t  }\n\t  from = from || 0\n\t  if (from < 0) {\n\t    from += this.length\n\t  }\n\t  var ret = new Yallist()\n\t  if (to < from || to < 0) {\n\t    return ret\n\t  }\n\t  if (from < 0) {\n\t    from = 0\n\t  }\n\t  if (to > this.length) {\n\t    to = this.length\n\t  }\n\t  for (var i = 0, walker = this.head; walker !== null && i < from; i++) {\n\t    walker = walker.next\n\t  }\n\t  for (; walker !== null && i < to; i++, walker = walker.next) {\n\t    ret.push(walker.value)\n\t  }\n\t  return ret\n\t}\n\t\n\tYallist.prototype.sliceReverse = function (from, to) {\n\t  to = to || this.length\n\t  if (to < 0) {\n\t    to += this.length\n\t  }\n\t  from = from || 0\n\t  if (from < 0) {\n\t    from += this.length\n\t  }\n\t  var ret = new Yallist()\n\t  if (to < from || to < 0) {\n\t    return ret\n\t  }\n\t  if (from < 0) {\n\t    from = 0\n\t  }\n\t  if (to > this.length) {\n\t    to = this.length\n\t  }\n\t  for (var i = this.length, walker = this.tail; walker !== null && i > to; i--) {\n\t    walker = walker.prev\n\t  }\n\t  for (; walker !== null && i > from; i--, walker = walker.prev) {\n\t    ret.push(walker.value)\n\t  }\n\t  return ret\n\t}\n\t\n\tYallist.prototype.reverse = function () {\n\t  var head = this.head\n\t  var tail = this.tail\n\t  for (var walker = head; walker !== null; walker = walker.prev) {\n\t    var p = walker.prev\n\t    walker.prev = walker.next\n\t    walker.next = p\n\t  }\n\t  this.head = tail\n\t  this.tail = head\n\t  return this\n\t}\n\t\n\tfunction push (self, item) {\n\t  self.tail = new Node(item, self.tail, null, self)\n\t  if (!self.head) {\n\t    self.head = self.tail\n\t  }\n\t  self.length ++\n\t}\n\t\n\tfunction unshift (self, item) {\n\t  self.head = new Node(item, null, self.head, self)\n\t  if (!self.tail) {\n\t    self.tail = self.head\n\t  }\n\t  self.length ++\n\t}\n\t\n\tfunction Node (value, prev, next, list) {\n\t  if (!(this instanceof Node)) {\n\t    return new Node(value, prev, next, list)\n\t  }\n\t\n\t  this.list = list\n\t  this.value = value\n\t\n\t  if (prev) {\n\t    prev.next = this\n\t    this.prev = prev\n\t  } else {\n\t    this.prev = null\n\t  }\n\t\n\t  if (next) {\n\t    next.prev = this\n\t    this.next = next\n\t  } else {\n\t    this.next = null\n\t  }\n\t}\n\n\n/***/ },\n/* 43 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\t\n\tvar _geoLatLon = __webpack_require__(10);\n\t\n\tvar _geoLatLon2 = _interopRequireDefault(_geoLatLon);\n\t\n\tvar _vendorBoxHelper = __webpack_require__(44);\n\t\n\tvar _vendorBoxHelper2 = _interopRequireDefault(_vendorBoxHelper);\n\t\n\tvar _three = __webpack_require__(24);\n\t\n\tvar _three2 = _interopRequireDefault(_three);\n\t\n\t// Manages a single tile and its layers\n\t\n\tvar r2d = 180 / Math.PI;\n\t\n\tvar Tile = (function () {\n\t  function Tile(quadcode, layer) {\n\t    _classCallCheck(this, Tile);\n\t\n\t    this._layer = layer;\n\t    this._quadcode = quadcode;\n\t\n\t    this._ready = false;\n\t\n\t    this._tile = this._quadcodeToTile(quadcode);\n\t\n\t    // Bottom-left and top-right bounds in WGS84 coordinates\n\t    this._boundsLatLon = this._tileBoundsWGS84(this._tile);\n\t\n\t    // Bottom-left and top-right bounds in world coordinates\n\t    this._boundsWorld = this._tileBoundsFromWGS84(this._boundsLatLon);\n\t\n\t    // Tile center in world coordinates\n\t    this._center = this._boundsToCenter(this._boundsWorld);\n\t\n\t    // Length of a tile side in world coorindates\n\t    this._side = this._getSide(this._boundsWorld);\n\t  }\n\t\n\t  // Returns true if the tile mesh and texture are ready to be used\n\t  // Otherwise, returns false\n\t\n\t  _createClass(Tile, [{\n\t    key: 'isReady',\n\t    value: function isReady() {\n\t      return this._ready;\n\t    }\n\t\n\t    // Request data for the various tile providers\n\t    //\n\t    // Providers are provided here and not on instantiation of the class so that\n\t    // providers can be easily changed in subsequent requests without heavy\n\t    // management\n\t    //\n\t    // If requestData is called more than once then the provider data will be\n\t    // re-downloaded and the mesh output will be changed\n\t    //\n\t    // Being able to update tile data and output like this on-the-fly makes it\n\t    // appealing for situations where tile data may be dynamic / realtime\n\t    // (eg. realtime traffic tiles)\n\t    //\n\t    // May need to be intelligent about what exactly is updated each time\n\t    // requestData is called as it doesn't make sense to re-request and\n\t    // re-generate a mesh each time when only the image provider needs updating,\n\t    // and likewise it doesn't make sense to update the imagery when only terrain\n\t    // provider changes\n\t  }, {\n\t    key: 'requestTileAsync',\n\t    value: function requestTileAsync(imageProviders) {\n\t      var _this = this;\n\t\n\t      // Making this asynchronous really speeds up the LOD framerate\n\t      setTimeout(function () {\n\t        if (!_this._mesh) {\n\t          _this._mesh = _this._createMesh();\n\t          _this._requestTextureAsync();\n\t        }\n\t      }, 0);\n\t    }\n\t  }, {\n\t    key: 'getQuadcode',\n\t    value: function getQuadcode() {\n\t      return this._quadcode;\n\t    }\n\t  }, {\n\t    key: 'getBounds',\n\t    value: function getBounds() {\n\t      return this._boundsWorld;\n\t    }\n\t  }, {\n\t    key: 'getCenter',\n\t    value: function getCenter() {\n\t      return this._center;\n\t    }\n\t  }, {\n\t    key: 'getSide',\n\t    value: function getSide() {\n\t      return this._side;\n\t    }\n\t  }, {\n\t    key: 'getMesh',\n\t    value: function getMesh() {\n\t      return this._mesh;\n\t    }\n\t\n\t    // Destroys the tile and removes it from the layer and memory\n\t    //\n\t    // Ensure that this leaves no trace of the tile no textures, no meshes,\n\t    // nothing in memory or the GPU\n\t  }, {\n\t    key: 'destroy',\n\t    value: function destroy() {}\n\t  }, {\n\t    key: '_createMesh',\n\t    value: function _createMesh() {\n\t      var mesh = new _three2['default'].Object3D();\n\t      var geom = new _three2['default'].PlaneBufferGeometry(this._side, this._side, 1);\n\t\n\t      var material = new _three2['default'].MeshBasicMaterial({\n\t        depthWrite: false\n\t      });\n\t\n\t      var localMesh = new _three2['default'].Mesh(geom, material);\n\t      localMesh.rotation.x = -90 * Math.PI / 180;\n\t\n\t      mesh.add(localMesh);\n\t\n\t      mesh.position.x = this._center[0];\n\t      mesh.position.z = this._center[1];\n\t\n\t      var box = new _vendorBoxHelper2['default'](localMesh);\n\t      mesh.add(box);\n\t\n\t      mesh.add(this._createDebugMesh());\n\t\n\t      return mesh;\n\t    }\n\t  }, {\n\t    key: '_createDebugMesh',\n\t    value: function _createDebugMesh() {\n\t      var canvas = document.createElement('canvas');\n\t      canvas.width = 256;\n\t      canvas.height = 256;\n\t\n\t      var context = canvas.getContext('2d');\n\t      context.font = 'Bold 20px Helvetica Neue, Verdana, Arial';\n\t      context.fillStyle = '#ff0000';\n\t      context.fillText(this._quadcode, 20, canvas.width / 2 - 5);\n\t      context.fillText(this._tile.toString(), 20, canvas.width / 2 + 25);\n\t\n\t      var texture = new _three2['default'].Texture(canvas);\n\t\n\t      // Silky smooth images when tilted\n\t      texture.magFilter = _three2['default'].LinearFilter;\n\t      texture.minFilter = _three2['default'].LinearMipMapLinearFilter;\n\t\n\t      // TODO: Set this to renderer.getMaxAnisotropy() / 4\n\t      texture.anisotropy = 4;\n\t\n\t      texture.needsUpdate = true;\n\t\n\t      var material = new _three2['default'].MeshBasicMaterial({\n\t        map: texture,\n\t        transparent: true,\n\t        depthWrite: false\n\t      });\n\t\n\t      var geom = new _three2['default'].PlaneBufferGeometry(this._side, this._side, 1);\n\t      var mesh = new _three2['default'].Mesh(geom, material);\n\t\n\t      mesh.rotation.x = -90 * Math.PI / 180;\n\t      mesh.position.y = 0.1;\n\t\n\t      return mesh;\n\t    }\n\t  }, {\n\t    key: '_requestTextureAsync',\n\t    value: function _requestTextureAsync() {\n\t      var _this2 = this;\n\t\n\t      // Pick a letter between a-c\n\t      var letter = String.fromCharCode(97 + Math.floor(Math.random() * 26));\n\t\n\t      // These tiles can be nearly 20 times larger in filesize than OSM tiles!\n\t      var url = 'http://' + letter + '.basemaps.cartocdn.com/light_nolabels/';\n\t      // var url = 'http://' + letter + '.tile.osm.org/';\n\t      // http://a.tiles.wmflabs.org/osm-no-labels/12/2200/1341.png\n\t\n\t      var image = document.createElement('img');\n\t\n\t      image.addEventListener('load', function (event) {\n\t        var texture = new _three2['default'].Texture();\n\t\n\t        texture.image = image;\n\t        texture.needsUpdate = true;\n\t\n\t        // Silky smooth images when tilted\n\t        texture.magFilter = _three2['default'].LinearFilter;\n\t        texture.minFilter = _three2['default'].LinearMipMapLinearFilter;\n\t\n\t        // TODO: Set this to renderer.getMaxAnisotropy() / 4\n\t        texture.anisotropy = 4;\n\t\n\t        texture.needsUpdate = true;\n\t\n\t        _this2._mesh.children[0].material.map = texture;\n\t        _this2._mesh.children[0].material.needsUpdate = true;\n\t\n\t        _this2._texture = texture;\n\t        _this2._ready = true;\n\t      }, false);\n\t\n\t      // image.addEventListener('progress', event => {\n\t      //\n\t      // }, false);\n\t\n\t      image.addEventListener('error', function (event) {\n\t        console.error(event);\n\t      }, false);\n\t\n\t      image.crossOrigin = '';\n\t\n\t      // Load image\n\t      image.src = url + this._tile[2] + '/' + this._tile[0] + '/' + this._tile[1] + '.png';\n\t    }\n\t\n\t    // Convert from quadcode to TMS tile coordinates\n\t  }, {\n\t    key: '_quadcodeToTile',\n\t    value: function _quadcodeToTile(quadcode) {\n\t      var x = 0;\n\t      var y = 0;\n\t      var z = quadcode.length;\n\t\n\t      for (var i = z; i > 0; i--) {\n\t        var mask = 1 << i - 1;\n\t        var q = +quadcode[z - i];\n\t        if (q === 1) {\n\t          x |= mask;\n\t        }\n\t        if (q === 2) {\n\t          y |= mask;\n\t        }\n\t        if (q === 3) {\n\t          x |= mask;\n\t          y |= mask;\n\t        }\n\t      }\n\t\n\t      return [x, y, z];\n\t    }\n\t\n\t    // Convert WGS84 tile bounds to world coordinates\n\t  }, {\n\t    key: '_tileBoundsFromWGS84',\n\t    value: function _tileBoundsFromWGS84(boundsWGS84) {\n\t      var sw = this._layer._world.latLonToPoint((0, _geoLatLon2['default'])(boundsWGS84[1], boundsWGS84[0]));\n\t      var ne = this._layer._world.latLonToPoint((0, _geoLatLon2['default'])(boundsWGS84[3], boundsWGS84[2]));\n\t\n\t      return [sw.x, sw.y, ne.x, ne.y];\n\t    }\n\t\n\t    // Get tile bounds in WGS84 coordinates\n\t  }, {\n\t    key: '_tileBoundsWGS84',\n\t    value: function _tileBoundsWGS84(tile) {\n\t      var e = this._tile2lon(tile[0] + 1, tile[2]);\n\t      var w = this._tile2lon(tile[0], tile[2]);\n\t      var s = this._tile2lat(tile[1] + 1, tile[2]);\n\t      var n = this._tile2lat(tile[1], tile[2]);\n\t      return [w, s, e, n];\n\t    }\n\t  }, {\n\t    key: '_tile2lon',\n\t    value: function _tile2lon(x, z) {\n\t      return x / Math.pow(2, z) * 360 - 180;\n\t    }\n\t  }, {\n\t    key: '_tile2lat',\n\t    value: function _tile2lat(y, z) {\n\t      var n = Math.PI - 2 * Math.PI * y / Math.pow(2, z);\n\t      return r2d * Math.atan(0.5 * (Math.exp(n) - Math.exp(-n)));\n\t    }\n\t  }, {\n\t    key: '_boundsToCenter',\n\t    value: function _boundsToCenter(bounds) {\n\t      var x = bounds[0] + (bounds[2] - bounds[0]) / 2;\n\t      var y = bounds[1] + (bounds[3] - bounds[1]) / 2;\n\t\n\t      return [x, y];\n\t    }\n\t  }, {\n\t    key: '_getSide',\n\t    value: function _getSide(bounds) {\n\t      return new _three2['default'].Vector3(bounds[0], 0, bounds[3]).sub(new _three2['default'].Vector3(bounds[0], 0, bounds[1])).length();\n\t    }\n\t  }]);\n\t\n\t  return Tile;\n\t})();\n\t\n\texports['default'] = Tile;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 44 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t\tvalue: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\t// jscs:disable\n\t/*eslint eqeqeq:0*/\n\t\n\tvar _three = __webpack_require__(24);\n\t\n\tvar _three2 = _interopRequireDefault(_three);\n\t\n\t/**\n\t * @author mrdoob / http://mrdoob.com/\n\t */\n\t\n\tBoxHelper = function (object) {\n\t\n\t\tvar indices = new Uint16Array([0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7]);\n\t\tvar positions = new Float32Array(8 * 3);\n\t\n\t\tvar geometry = new _three2['default'].BufferGeometry();\n\t\tgeometry.setIndex(new _three2['default'].BufferAttribute(indices, 1));\n\t\tgeometry.addAttribute('position', new _three2['default'].BufferAttribute(positions, 3));\n\t\n\t\t_three2['default'].LineSegments.call(this, geometry, new _three2['default'].LineBasicMaterial({ linewidth: 2, color: 0xff0000 }));\n\t\n\t\tif (object !== undefined) {\n\t\n\t\t\tthis.update(object);\n\t\t}\n\t};\n\t\n\tBoxHelper.prototype = Object.create(_three2['default'].LineSegments.prototype);\n\tBoxHelper.prototype.constructor = BoxHelper;\n\t\n\tBoxHelper.prototype.update = (function () {\n\t\n\t\tvar box = new _three2['default'].Box3();\n\t\n\t\treturn function (object) {\n\t\n\t\t\tbox.setFromObject(object);\n\t\n\t\t\tif (box.isEmpty()) return;\n\t\n\t\t\tvar min = box.min;\n\t\t\tvar max = box.max;\n\t\n\t\t\t/*\n\t    5____4\n\t  1/___0/|\n\t  | 6__|_7\n\t  2/___3/\n\t  \t0: max.x, max.y, max.z\n\t  1: min.x, max.y, max.z\n\t  2: min.x, min.y, max.z\n\t  3: max.x, min.y, max.z\n\t  4: max.x, max.y, min.z\n\t  5: min.x, max.y, min.z\n\t  6: min.x, min.y, min.z\n\t  7: max.x, min.y, min.z\n\t  */\n\t\n\t\t\tvar position = this.geometry.attributes.position;\n\t\t\tvar array = position.array;\n\t\n\t\t\tarray[0] = max.x;array[1] = max.y;array[2] = max.z;\n\t\t\tarray[3] = min.x;array[4] = max.y;array[5] = max.z;\n\t\t\tarray[6] = min.x;array[7] = min.y;array[8] = max.z;\n\t\t\tarray[9] = max.x;array[10] = min.y;array[11] = max.z;\n\t\t\tarray[12] = max.x;array[13] = max.y;array[14] = min.z;\n\t\t\tarray[15] = min.x;array[16] = max.y;array[17] = min.z;\n\t\t\tarray[18] = min.x;array[19] = min.y;array[20] = min.z;\n\t\t\tarray[21] = max.x;array[22] = min.y;array[23] = min.z;\n\t\n\t\t\tposition.needsUpdate = true;\n\t\n\t\t\tthis.geometry.computeBoundingSphere();\n\t\t};\n\t})();\n\t\n\texports['default'] = BoxHelper;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 45 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _three = __webpack_require__(24);\n\t\n\tvar _three2 = _interopRequireDefault(_three);\n\t\n\texports['default'] = function (colour) {\n\t  var canvas = document.createElement('canvas');\n\t  canvas.width = 1;\n\t  canvas.height = 1;\n\t\n\t  var context = canvas.getContext('2d');\n\t  context.fillStyle = colour;\n\t  context.fillRect(0, 0, canvas.width, canvas.height);\n\t  // context.strokeStyle = '#D0D0CF';\n\t  // context.strokeRect(0, 0, canvas.width, canvas.height);\n\t\n\t  var texture = new _three2['default'].Texture(canvas);\n\t\n\t  // // Silky smooth images when tilted\n\t  // texture.magFilter = THREE.LinearFilter;\n\t  // texture.minFilter = THREE.LinearMipMapLinearFilter;\n\t  // //\n\t  // // // TODO: Set this to renderer.getMaxAnisotropy() / 4\n\t  // texture.anisotropy = 4;\n\t\n\t  // texture.wrapS = THREE.RepeatWrapping;\n\t  // texture.wrapT = THREE.RepeatWrapping;\n\t  // texture.repeat.set(segments, segments);\n\t\n\t  texture.needsUpdate = true;\n\t\n\t  var material = new _three2['default'].MeshBasicMaterial({\n\t    map: texture,\n\t    depthWrite: false\n\t  });\n\t\n\t  return material;\n\t};\n\t\n\t;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 46 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\n\t * lodash 4.0.0 (Custom Build) <https://lodash.com/>\n\t * Build: `lodash modularize exports=\"npm\" -o ./`\n\t * Copyright 2012-2016 The Dojo Foundation <http://dojofoundation.org/>\n\t * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n\t * Copyright 2009-2016 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n\t * Available under MIT license <https://lodash.com/license>\n\t */\n\tvar debounce = __webpack_require__(47);\n\t\n\t/** Used as the `TypeError` message for \"Functions\" methods. */\n\tvar FUNC_ERROR_TEXT = 'Expected a function';\n\t\n\t/**\n\t * Creates a throttled function that only invokes `func` at most once per\n\t * every `wait` milliseconds. The throttled function comes with a `cancel`\n\t * method to cancel delayed `func` invocations and a `flush` method to\n\t * immediately invoke them. Provide an options object to indicate whether\n\t * `func` should be invoked on the leading and/or trailing edge of the `wait`\n\t * timeout. The `func` is invoked with the last arguments provided to the\n\t * throttled function. Subsequent calls to the throttled function return the\n\t * result of the last `func` invocation.\n\t *\n\t * **Note:** If `leading` and `trailing` options are `true`, `func` is invoked\n\t * on the trailing edge of the timeout only if the the throttled function is\n\t * invoked more than once during the `wait` timeout.\n\t *\n\t * See [David Corbacho's article](http://drupalmotion.com/article/debounce-and-throttle-visual-explanation)\n\t * for details over the differences between `_.throttle` and `_.debounce`.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @category Function\n\t * @param {Function} func The function to throttle.\n\t * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n\t * @param {Object} [options] The options object.\n\t * @param {boolean} [options.leading=true] Specify invoking on the leading\n\t *  edge of the timeout.\n\t * @param {boolean} [options.trailing=true] Specify invoking on the trailing\n\t *  edge of the timeout.\n\t * @returns {Function} Returns the new throttled function.\n\t * @example\n\t *\n\t * // avoid excessively updating the position while scrolling\n\t * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n\t *\n\t * // invoke `renewToken` when the click event is fired, but not more than once every 5 minutes\n\t * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n\t * jQuery(element).on('click', throttled);\n\t *\n\t * // cancel a trailing throttled invocation\n\t * jQuery(window).on('popstate', throttled.cancel);\n\t */\n\tfunction throttle(func, wait, options) {\n\t  var leading = true,\n\t      trailing = true;\n\t\n\t  if (typeof func != 'function') {\n\t    throw new TypeError(FUNC_ERROR_TEXT);\n\t  }\n\t  if (isObject(options)) {\n\t    leading = 'leading' in options ? !!options.leading : leading;\n\t    trailing = 'trailing' in options ? !!options.trailing : trailing;\n\t  }\n\t  return debounce(func, wait, { 'leading': leading, 'maxWait': wait, 'trailing': trailing });\n\t}\n\t\n\t/**\n\t * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.\n\t * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n\t *\n\t * @static\n\t * @memberOf _\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n\t * @example\n\t *\n\t * _.isObject({});\n\t * // => true\n\t *\n\t * _.isObject([1, 2, 3]);\n\t * // => true\n\t *\n\t * _.isObject(_.noop);\n\t * // => true\n\t *\n\t * _.isObject(null);\n\t * // => false\n\t */\n\tfunction isObject(value) {\n\t  // Avoid a V8 JIT bug in Chrome 19-20.\n\t  // See https://code.google.com/p/v8/issues/detail?id=2291 for more details.\n\t  var type = typeof value;\n\t  return !!value && (type == 'object' || type == 'function');\n\t}\n\t\n\tmodule.exports = throttle;\n\n\n/***/ },\n/* 47 */\n/***/ function(module, exports) {\n\n\t/**\n\t * lodash 4.0.1 (Custom Build) <https://lodash.com/>\n\t * Build: `lodash modularize exports=\"npm\" -o ./`\n\t * Copyright 2012-2016 The Dojo Foundation <http://dojofoundation.org/>\n\t * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n\t * Copyright 2009-2016 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n\t * Available under MIT license <https://lodash.com/license>\n\t */\n\t\n\t/** Used as the `TypeError` message for \"Functions\" methods. */\n\tvar FUNC_ERROR_TEXT = 'Expected a function';\n\t\n\t/** Used as references for various `Number` constants. */\n\tvar NAN = 0 / 0;\n\t\n\t/** `Object#toString` result references. */\n\tvar funcTag = '[object Function]',\n\t    genTag = '[object GeneratorFunction]';\n\t\n\t/** Used to match leading and trailing whitespace. */\n\tvar reTrim = /^\\s+|\\s+$/g;\n\t\n\t/** Used to detect bad signed hexadecimal string values. */\n\tvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\t\n\t/** Used to detect binary string values. */\n\tvar reIsBinary = /^0b[01]+$/i;\n\t\n\t/** Used to detect octal string values. */\n\tvar reIsOctal = /^0o[0-7]+$/i;\n\t\n\t/** Built-in method references without a dependency on `root`. */\n\tvar freeParseInt = parseInt;\n\t\n\t/** Used for built-in method references. */\n\tvar objectProto = Object.prototype;\n\t\n\t/**\n\t * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n\t * of values.\n\t */\n\tvar objectToString = objectProto.toString;\n\t\n\t/* Built-in method references for those with the same name as other `lodash` methods. */\n\tvar nativeMax = Math.max;\n\t\n\t/**\n\t * Gets the timestamp of the number of milliseconds that have elapsed since\n\t * the Unix epoch (1 January 1970 00:00:00 UTC).\n\t *\n\t * @static\n\t * @memberOf _\n\t * @type Function\n\t * @category Date\n\t * @returns {number} Returns the timestamp.\n\t * @example\n\t *\n\t * _.defer(function(stamp) {\n\t *   console.log(_.now() - stamp);\n\t * }, _.now());\n\t * // => logs the number of milliseconds it took for the deferred function to be invoked\n\t */\n\tvar now = Date.now;\n\t\n\t/**\n\t * Creates a debounced function that delays invoking `func` until after `wait`\n\t * milliseconds have elapsed since the last time the debounced function was\n\t * invoked. The debounced function comes with a `cancel` method to cancel\n\t * delayed `func` invocations and a `flush` method to immediately invoke them.\n\t * Provide an options object to indicate whether `func` should be invoked on\n\t * the leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n\t * with the last arguments provided to the debounced function. Subsequent calls\n\t * to the debounced function return the result of the last `func` invocation.\n\t *\n\t * **Note:** If `leading` and `trailing` options are `true`, `func` is invoked\n\t * on the trailing edge of the timeout only if the the debounced function is\n\t * invoked more than once during the `wait` timeout.\n\t *\n\t * See [David Corbacho's article](http://drupalmotion.com/article/debounce-and-throttle-visual-explanation)\n\t * for details over the differences between `_.debounce` and `_.throttle`.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @category Function\n\t * @param {Function} func The function to debounce.\n\t * @param {number} [wait=0] The number of milliseconds to delay.\n\t * @param {Object} [options] The options object.\n\t * @param {boolean} [options.leading=false] Specify invoking on the leading\n\t *  edge of the timeout.\n\t * @param {number} [options.maxWait] The maximum time `func` is allowed to be\n\t *  delayed before it's invoked.\n\t * @param {boolean} [options.trailing=true] Specify invoking on the trailing\n\t *  edge of the timeout.\n\t * @returns {Function} Returns the new debounced function.\n\t * @example\n\t *\n\t * // Avoid costly calculations while the window size is in flux.\n\t * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n\t *\n\t * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n\t * jQuery(element).on('click', _.debounce(sendMail, 300, {\n\t *   'leading': true,\n\t *   'trailing': false\n\t * }));\n\t *\n\t * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n\t * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n\t * var source = new EventSource('/stream');\n\t * jQuery(source).on('message', debounced);\n\t *\n\t * // Cancel the trailing debounced invocation.\n\t * jQuery(window).on('popstate', debounced.cancel);\n\t */\n\tfunction debounce(func, wait, options) {\n\t  var args,\n\t      maxTimeoutId,\n\t      result,\n\t      stamp,\n\t      thisArg,\n\t      timeoutId,\n\t      trailingCall,\n\t      lastCalled = 0,\n\t      leading = false,\n\t      maxWait = false,\n\t      trailing = true;\n\t\n\t  if (typeof func != 'function') {\n\t    throw new TypeError(FUNC_ERROR_TEXT);\n\t  }\n\t  wait = toNumber(wait) || 0;\n\t  if (isObject(options)) {\n\t    leading = !!options.leading;\n\t    maxWait = 'maxWait' in options && nativeMax(toNumber(options.maxWait) || 0, wait);\n\t    trailing = 'trailing' in options ? !!options.trailing : trailing;\n\t  }\n\t\n\t  function cancel() {\n\t    if (timeoutId) {\n\t      clearTimeout(timeoutId);\n\t    }\n\t    if (maxTimeoutId) {\n\t      clearTimeout(maxTimeoutId);\n\t    }\n\t    lastCalled = 0;\n\t    args = maxTimeoutId = thisArg = timeoutId = trailingCall = undefined;\n\t  }\n\t\n\t  function complete(isCalled, id) {\n\t    if (id) {\n\t      clearTimeout(id);\n\t    }\n\t    maxTimeoutId = timeoutId = trailingCall = undefined;\n\t    if (isCalled) {\n\t      lastCalled = now();\n\t      result = func.apply(thisArg, args);\n\t      if (!timeoutId && !maxTimeoutId) {\n\t        args = thisArg = undefined;\n\t      }\n\t    }\n\t  }\n\t\n\t  function delayed() {\n\t    var remaining = wait - (now() - stamp);\n\t    if (remaining <= 0 || remaining > wait) {\n\t      complete(trailingCall, maxTimeoutId);\n\t    } else {\n\t      timeoutId = setTimeout(delayed, remaining);\n\t    }\n\t  }\n\t\n\t  function flush() {\n\t    if ((timeoutId && trailingCall) || (maxTimeoutId && trailing)) {\n\t      result = func.apply(thisArg, args);\n\t    }\n\t    cancel();\n\t    return result;\n\t  }\n\t\n\t  function maxDelayed() {\n\t    complete(trailing, timeoutId);\n\t  }\n\t\n\t  function debounced() {\n\t    args = arguments;\n\t    stamp = now();\n\t    thisArg = this;\n\t    trailingCall = trailing && (timeoutId || !leading);\n\t\n\t    if (maxWait === false) {\n\t      var leadingCall = leading && !timeoutId;\n\t    } else {\n\t      if (!maxTimeoutId && !leading) {\n\t        lastCalled = stamp;\n\t      }\n\t      var remaining = maxWait - (stamp - lastCalled),\n\t          isCalled = remaining <= 0 || remaining > maxWait;\n\t\n\t      if (isCalled) {\n\t        if (maxTimeoutId) {\n\t          maxTimeoutId = clearTimeout(maxTimeoutId);\n\t        }\n\t        lastCalled = stamp;\n\t        result = func.apply(thisArg, args);\n\t      }\n\t      else if (!maxTimeoutId) {\n\t        maxTimeoutId = setTimeout(maxDelayed, remaining);\n\t      }\n\t    }\n\t    if (isCalled && timeoutId) {\n\t      timeoutId = clearTimeout(timeoutId);\n\t    }\n\t    else if (!timeoutId && wait !== maxWait) {\n\t      timeoutId = setTimeout(delayed, wait);\n\t    }\n\t    if (leadingCall) {\n\t      isCalled = true;\n\t      result = func.apply(thisArg, args);\n\t    }\n\t    if (isCalled && !timeoutId && !maxTimeoutId) {\n\t      args = thisArg = undefined;\n\t    }\n\t    return result;\n\t  }\n\t  debounced.cancel = cancel;\n\t  debounced.flush = flush;\n\t  return debounced;\n\t}\n\t\n\t/**\n\t * Checks if `value` is classified as a `Function` object.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n\t * @example\n\t *\n\t * _.isFunction(_);\n\t * // => true\n\t *\n\t * _.isFunction(/abc/);\n\t * // => false\n\t */\n\tfunction isFunction(value) {\n\t  // The use of `Object#toString` avoids issues with the `typeof` operator\n\t  // in Safari 8 which returns 'object' for typed array constructors, and\n\t  // PhantomJS 1.9 which returns 'function' for `NodeList` instances.\n\t  var tag = isObject(value) ? objectToString.call(value) : '';\n\t  return tag == funcTag || tag == genTag;\n\t}\n\t\n\t/**\n\t * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.\n\t * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n\t *\n\t * @static\n\t * @memberOf _\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n\t * @example\n\t *\n\t * _.isObject({});\n\t * // => true\n\t *\n\t * _.isObject([1, 2, 3]);\n\t * // => true\n\t *\n\t * _.isObject(_.noop);\n\t * // => true\n\t *\n\t * _.isObject(null);\n\t * // => false\n\t */\n\tfunction isObject(value) {\n\t  var type = typeof value;\n\t  return !!value && (type == 'object' || type == 'function');\n\t}\n\t\n\t/**\n\t * Converts `value` to a number.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @category Lang\n\t * @param {*} value The value to process.\n\t * @returns {number} Returns the number.\n\t * @example\n\t *\n\t * _.toNumber(3);\n\t * // => 3\n\t *\n\t * _.toNumber(Number.MIN_VALUE);\n\t * // => 5e-324\n\t *\n\t * _.toNumber(Infinity);\n\t * // => Infinity\n\t *\n\t * _.toNumber('3');\n\t * // => 3\n\t */\n\tfunction toNumber(value) {\n\t  if (isObject(value)) {\n\t    var other = isFunction(value.valueOf) ? value.valueOf() : value;\n\t    value = isObject(other) ? (other + '') : other;\n\t  }\n\t  if (typeof value != 'string') {\n\t    return value === 0 ? value : +value;\n\t  }\n\t  value = value.replace(reTrim, '');\n\t  var isBinary = reIsBinary.test(value);\n\t  return (isBinary || reIsOctal.test(value))\n\t    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n\t    : (reIsBadHex.test(value) ? NAN : +value);\n\t}\n\t\n\tmodule.exports = debounce;\n\n\n/***/ }\n/******/ ])\n});\n;"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 41f8aeda1be197d860f6\n **/","import World from './World';\nimport Controls from './controls/index';\nimport EnvironmentLayer from './layer/environment/EnvironmentLayer';\nimport GridLayer from './layer/tile/GridLayer';\nimport Point from './geo/Point';\nimport LatLon from './geo/LatLon';\n\nconst VIZI = {\n  version: '0.3',\n\n  // Public API\n  World: World,\n  Controls: Controls,\n  EnvironmentLayer: EnvironmentLayer,\n  GridLayer: GridLayer,\n  Point: Point,\n  LatLon: LatLon\n};\n\nexport default VIZI;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/vizicities.js\n **/","import EventEmitter from 'eventemitter3';\nimport extend from 'lodash.assign';\nimport CRS from './geo/CRS/index';\nimport Point from './geo/Point';\nimport LatLon from './geo/LatLon';\nimport Engine from './engine/Engine';\n\n// Pretty much any event someone using ViziCities would need will be emitted or\n// proxied by World (eg. render events, etc)\n\nclass World extends EventEmitter {\n  constructor(domId, options) {\n    super();\n\n    var defaults = {\n      crs: CRS.EPSG3857\n    };\n\n    this.options = extend(defaults, options);\n\n    this._layers = [];\n    this._controls = [];\n\n    this._initContainer(domId);\n    this._initEngine();\n    this._initEvents();\n\n    // Kick off the update and render loop\n    this._update();\n  }\n\n  _initContainer(domId) {\n    this._container = document.getElementById(domId);\n  }\n\n  _initEngine() {\n    this._engine = Engine(this._container);\n\n    // Engine events\n    //\n    // Consider proxying these through events on World for public access\n    // this._engine.on('preRender', () => {});\n    // this._engine.on('postRender', () => {});\n  }\n\n  _initEvents() {\n    this.on('controlsMoveEnd', this._onControlsMoveEnd);\n  }\n\n  _onControlsMoveEnd(point) {\n    var _point = Point(point.x, point.z);\n    this._resetView(this.pointToLatLon(_point), _point);\n  }\n\n  // Reset world view\n  _resetView(latlon, point) {\n    this.emit('preResetView');\n\n    this._moveStart();\n    this._move(latlon, point);\n    this._moveEnd();\n\n    this.emit('postResetView');\n  }\n\n  _moveStart() {\n    this.emit('moveStart');\n  }\n\n  _move(latlon, point) {\n    this._lastPosition = latlon;\n    this.emit('move', latlon, point);\n  }\n  _moveEnd() {\n    this.emit('moveEnd');\n  }\n\n  _update() {\n    var delta = this._engine.clock.getDelta();\n\n    // Once _update is called it will run forever, for now\n    window.requestAnimationFrame(this._update.bind(this));\n\n    // Update controls\n    this._controls.forEach(controls => {\n      controls.update();\n    });\n\n    this.emit('preUpdate');\n    this._engine.update(delta);\n    this.emit('postUpdate');\n  }\n\n  // Set world view\n  setView(latlon) {\n    // Store initial geographic coordinate for the [0,0,0] world position\n    //\n    // The origin point doesn't move in three.js / 3D space so only set it once\n    // here instead of every time _resetView is called\n    //\n    // If it was updated every time then coorindates would shift over time and\n    // would be out of place / context with previously-placed points (0,0 would\n    // refer to a different point each time)\n    this._originLatlon = latlon;\n    this._originPoint = this.project(latlon);\n\n    this._resetView(latlon);\n    return this;\n  }\n\n  // Return world geographic position\n  getPosition() {\n    return this._lastPosition;\n  }\n\n  // Transform geographic coordinate to world point\n  //\n  // This doesn't take into account the origin offset\n  //\n  // For example, this takes a geographic coordinate and returns a point\n  // relative to the origin point of the projection (not the world)\n  project(latlon) {\n    return this.options.crs.latLonToPoint(LatLon(latlon));\n  }\n\n  // Transform world point to geographic coordinate\n  //\n  // This doesn't take into account the origin offset\n  //\n  // For example, this takes a point relative to the origin point of the\n  // projection (not the world) and returns a geographic coordinate\n  unproject(point) {\n    return this.options.crs.pointToLatLon(Point(point));\n  }\n\n  // Takes into account the origin offset\n  //\n  // For example, this takes a geographic coordinate and returns a point\n  // relative to the three.js / 3D origin (0,0)\n  latLonToPoint(latlon) {\n    var projectedPoint = this.project(LatLon(latlon));\n    return projectedPoint._subtract(this._originPoint);\n  }\n\n  // Takes into account the origin offset\n  //\n  // For example, this takes a point relative to the three.js / 3D origin (0,0)\n  // and returns the exact geographic coordinate at that point\n  pointToLatLon(point) {\n    var projectedPoint = Point(point).add(this._originPoint);\n    return this.unproject(projectedPoint);\n  }\n\n  // Unsure if it's a good idea to expose this here for components like\n  // GridLayer to use (eg. to keep track of a frustum)\n  getCamera() {\n    return this._engine._camera;\n  }\n\n  addLayer(layer) {\n    layer._addToWorld(this);\n\n    this._layers.push(layer);\n\n    // Could move this into Layer but it'll do here for now\n    this._engine._scene.add(layer._layer);\n\n    this.emit('layerAdded', layer);\n    return this;\n  }\n\n  // Remove layer and perform clean up operations\n  removeLayer(layer) {}\n\n  addControls(controls) {\n    controls._addToWorld(this);\n\n    this._controls.push(controls);\n\n    this.emit('controlsAdded', controls);\n    return this;\n  }\n\n  removeControls(controls) {}\n}\n\n// Initialise without requiring new keyword\nexport default function(domId, options) {\n  return new World(domId, options);\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/World.js\n **/","'use strict';\n\n//\n// We store our EE objects in a plain object whose properties are event names.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// `~` to make sure that the built-in object properties are not overridden or\n// used as an attack vector.\n// We also assume that `Object.create(null)` is available when the event name\n// is an ES6 Symbol.\n//\nvar prefix = typeof Object.create !== 'function' ? '~' : false;\n\n/**\n * Representation of a single EventEmitter function.\n *\n * @param {Function} fn Event handler to be called.\n * @param {Mixed} context Context for function execution.\n * @param {Boolean} once Only emit once\n * @api private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Minimal EventEmitter interface that is molded against the Node.js\n * EventEmitter interface.\n *\n * @constructor\n * @api public\n */\nfunction EventEmitter() { /* Nothing to set */ }\n\n/**\n * Holds the assigned EventEmitters by name.\n *\n * @type {Object}\n * @private\n */\nEventEmitter.prototype._events = undefined;\n\n/**\n * Return a list of assigned event listeners.\n *\n * @param {String} event The events that should be listed.\n * @param {Boolean} exists We only need to know if there are listeners.\n * @returns {Array|Boolean}\n * @api public\n */\nEventEmitter.prototype.listeners = function listeners(event, exists) {\n  var evt = prefix ? prefix + event : event\n    , available = this._events && this._events[evt];\n\n  if (exists) return !!available;\n  if (!available) return [];\n  if (available.fn) return [available.fn];\n\n  for (var i = 0, l = available.length, ee = new Array(l); i < l; i++) {\n    ee[i] = available[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Emit an event to all registered event listeners.\n *\n * @param {String} event The name of the event.\n * @returns {Boolean} Indication if we've emitted an event.\n * @api public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events || !this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if ('function' === typeof listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Register a new EventListener for the given event.\n *\n * @param {String} event Name of the event.\n * @param {Functon} fn Callback function.\n * @param {Mixed} context The context of the function.\n * @api public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  var listener = new EE(fn, context || this)\n    , evt = prefix ? prefix + event : event;\n\n  if (!this._events) this._events = prefix ? {} : Object.create(null);\n  if (!this._events[evt]) this._events[evt] = listener;\n  else {\n    if (!this._events[evt].fn) this._events[evt].push(listener);\n    else this._events[evt] = [\n      this._events[evt], listener\n    ];\n  }\n\n  return this;\n};\n\n/**\n * Add an EventListener that's only called once.\n *\n * @param {String} event Name of the event.\n * @param {Function} fn Callback function.\n * @param {Mixed} context The context of the function.\n * @api public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  var listener = new EE(fn, context || this, true)\n    , evt = prefix ? prefix + event : event;\n\n  if (!this._events) this._events = prefix ? {} : Object.create(null);\n  if (!this._events[evt]) this._events[evt] = listener;\n  else {\n    if (!this._events[evt].fn) this._events[evt].push(listener);\n    else this._events[evt] = [\n      this._events[evt], listener\n    ];\n  }\n\n  return this;\n};\n\n/**\n * Remove event listeners.\n *\n * @param {String} event The event we want to remove.\n * @param {Function} fn The listener that we need to find.\n * @param {Mixed} context Only remove listeners matching this context.\n * @param {Boolean} once Only remove once listeners.\n * @api public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events || !this._events[evt]) return this;\n\n  var listeners = this._events[evt]\n    , events = [];\n\n  if (fn) {\n    if (listeners.fn) {\n      if (\n           listeners.fn !== fn\n        || (once && !listeners.once)\n        || (context && listeners.context !== context)\n      ) {\n        events.push(listeners);\n      }\n    } else {\n      for (var i = 0, length = listeners.length; i < length; i++) {\n        if (\n             listeners[i].fn !== fn\n          || (once && !listeners[i].once)\n          || (context && listeners[i].context !== context)\n        ) {\n          events.push(listeners[i]);\n        }\n      }\n    }\n  }\n\n  //\n  // Reset the array, or remove it completely if we have no more listeners.\n  //\n  if (events.length) {\n    this._events[evt] = events.length === 1 ? events[0] : events;\n  } else {\n    delete this._events[evt];\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners or only the listeners for the specified event.\n *\n * @param {String} event The event want to remove all listeners for.\n * @api public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  if (!this._events) return this;\n\n  if (event) delete this._events[prefix ? prefix + event : event];\n  else this._events = prefix ? {} : Object.create(null);\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// This function doesn't apply anymore.\n//\nEventEmitter.prototype.setMaxListeners = function setMaxListeners() {\n  return this;\n};\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/eventemitter3/index.js\n ** module id = 2\n ** module chunks = 0\n **/","/**\n * lodash 4.0.2 (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright 2012-2016 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2016 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\nvar keys = require('lodash.keys'),\n    rest = require('lodash.rest');\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]';\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  value = (typeof value == 'number' || reIsUint.test(value)) ? +value : -1;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return value > -1 && value % 1 == 0 && value < length;\n}\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if ((!eq(objValue, value) ||\n        (eq(objValue, objectProto[key]) && !hasOwnProperty.call(object, key))) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\n/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property names to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object) {\n  return copyObjectWith(source, props, object);\n}\n\n/**\n * This function is like `copyObject` except that it accepts a function to\n * customize copied values.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property names to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObjectWith(source, props, object, customizer) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index],\n        newValue = customizer ? customizer(object[key], source[key], key, object, source) : source[key];\n\n    assignValue(object, key, newValue);\n  }\n  return object;\n}\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return rest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = typeof customizer == 'function' ? (length--, customizer) : undefined;\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\n/**\n * Gets the \"length\" property value of `object`.\n *\n * **Note:** This function is used to avoid a [JIT bug](https://bugs.webkit.org/show_bug.cgi?id=142792)\n * that affects Safari on at least iOS 8.1-8.3 ARM64.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {*} Returns the \"length\" value.\n */\nvar getLength = baseProperty('length');\n\n/**\n * Checks if the provided arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call, else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n      ? (isArrayLike(object) && isIndex(index, object.length))\n      : (type == 'string' && index in object)) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\n/**\n * Performs a [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'user': 'fred' };\n * var other = { 'user': 'fred' };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @type Function\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null &&\n    !(typeof value == 'function' && isFunction(value)) && isLength(getLength(value));\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8 which returns 'object' for typed array constructors, and\n  // PhantomJS 1.9 which returns 'function' for `NodeList` instances.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This function is loosely based on [`ToLength`](http://ecma-international.org/ecma-262/6.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.\n * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Assigns own enumerable properties of source objects to the destination\n * object. Source objects are applied from left to right. Subsequent sources\n * overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object` and is loosely based on\n * [`Object.assign`](https://mdn.io/Object/assign).\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * function Foo() {\n *   this.c = 3;\n * }\n *\n * function Bar() {\n *   this.e = 5;\n * }\n *\n * Foo.prototype.d = 4;\n * Bar.prototype.f = 6;\n *\n * _.assign({ 'a': 1 }, new Foo, new Bar);\n * // => { 'a': 1, 'c': 3, 'e': 5 }\n */\nvar assign = createAssigner(function(object, source) {\n  copyObject(source, keys(source), object);\n});\n\nmodule.exports = assign;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash.assign/index.js\n ** module id = 3\n ** module chunks = 0\n **/","/**\n * lodash 4.0.2 (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright 2012-2016 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2016 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    stringTag = '[object String]';\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  value = (typeof value == 'number' || reIsUint.test(value)) ? +value : -1;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return value > -1 && value % 1 == 0 && value < length;\n}\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar getPrototypeOf = Object.getPrototypeOf,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = Object.keys;\n\n/**\n * The base implementation of `_.has` without support for deep paths.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHas(object, key) {\n  // Avoid a bug in IE 10-11 where objects with a [[Prototype]] of `null`,\n  // that are composed entirely of index properties, return `false` for\n  // `hasOwnProperty` checks of them.\n  return hasOwnProperty.call(object, key) ||\n    (typeof object == 'object' && key in object && getPrototypeOf(object) === null);\n}\n\n/**\n * The base implementation of `_.keys` which doesn't skip the constructor\n * property of prototypes or treat sparse arrays as dense.\n *\n * @private\n * @type Function\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  return nativeKeys(Object(object));\n}\n\n/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\n/**\n * Gets the \"length\" property value of `object`.\n *\n * **Note:** This function is used to avoid a [JIT bug](https://bugs.webkit.org/show_bug.cgi?id=142792)\n * that affects Safari on at least iOS 8.1-8.3 ARM64.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {*} Returns the \"length\" value.\n */\nvar getLength = baseProperty('length');\n\n/**\n * Creates an array of index keys for `object` values of arrays,\n * `arguments` objects, and strings, otherwise `null` is returned.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array|null} Returns index keys, else `null`.\n */\nfunction indexKeys(object) {\n  var length = object ? object.length : undefined;\n  if (isLength(length) &&\n      (isArray(object) || isString(object) || isArguments(object))) {\n    return baseTimes(length, String);\n  }\n  return null;\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 incorrectly makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @type Function\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @type Function\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null &&\n    !(typeof value == 'function' && isFunction(value)) && isLength(getLength(value));\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @type Function\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object, else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8 which returns 'object' for typed array constructors, and\n  // PhantomJS 1.9 which returns 'function' for `NodeList` instances.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This function is loosely based on [`ToLength`](http://ecma-international.org/ecma-262/6.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.\n * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `String` primitive or object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isString('abc');\n * // => true\n *\n * _.isString(1);\n * // => false\n */\nfunction isString(value) {\n  return typeof value == 'string' ||\n    (!isArray(value) && isObjectLike(value) && objectToString.call(value) == stringTag);\n}\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/6.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  var isProto = isPrototype(object);\n  if (!(isProto || isArrayLike(object))) {\n    return baseKeys(object);\n  }\n  var indexes = indexKeys(object),\n      skipIndexes = !!indexes,\n      result = indexes || [],\n      length = result.length;\n\n  for (var key in object) {\n    if (baseHas(object, key) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length))) &&\n        !(isProto && key == 'constructor')) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = keys;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash.keys/index.js\n ** module id = 4\n ** module chunks = 0\n **/","/**\n * lodash 4.0.1 (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright 2012-2016 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2016 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308,\n    NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {...*} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  var length = args.length;\n  switch (length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Creates a function that invokes `func` with the `this` binding of the\n * created function and arguments from `start` and beyond provided as an array.\n *\n * **Note:** This method is based on the [rest parameter](https://mdn.io/rest_parameters).\n *\n * @static\n * @memberOf _\n * @category Function\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n * @example\n *\n * var say = _.rest(function(what, names) {\n *   return what + ' ' + _.initial(names).join(', ') +\n *     (_.size(names) > 1 ? ', & ' : '') + _.last(names);\n * });\n *\n * say('hello', 'fred', 'barney', 'pebbles');\n * // => 'hello fred, barney, & pebbles'\n */\nfunction rest(func, start) {\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  start = nativeMax(start === undefined ? (func.length - 1) : toInteger(start), 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    switch (start) {\n      case 0: return func.call(this, array);\n      case 1: return func.call(this, args[0], array);\n      case 2: return func.call(this, args[0], args[1], array);\n    }\n    var otherArgs = Array(start + 1);\n    index = -1;\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = array;\n    return apply(func, this, otherArgs);\n  };\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8 which returns 'object' for typed array constructors, and\n  // PhantomJS 1.9 which returns 'function' for `NodeList` instances.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.\n * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This function is loosely based on [`ToInteger`](http://www.ecma-international.org/ecma-262/6.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3');\n * // => 3\n */\nfunction toInteger(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  var remainder = value % 1;\n  return value === value ? (remainder ? value - remainder : value) : 0;\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3);\n * // => 3\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3');\n * // => 3\n */\nfunction toNumber(value) {\n  if (isObject(value)) {\n    var other = isFunction(value.valueOf) ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = rest;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash.rest/index.js\n ** module id = 5\n ** module chunks = 0\n **/","import EPSG3857 from './CRS.EPSG3857';\nimport {EPSG900913} from './CRS.EPSG3857';\nimport EPSG3395 from './CRS.EPSG3395';\nimport EPSG4326 from './CRS.EPSG4326';\nimport Simple from './CRS.Simple';\nimport Proj4 from './CRS.Proj4';\n\nconst CRS = {};\n\nCRS.EPSG3857 = EPSG3857;\nCRS.EPSG900913 = EPSG900913;\nCRS.EPSG3395 = EPSG3395;\nCRS.EPSG4326 = EPSG4326;\nCRS.Simple = Simple;\nCRS.Proj4 = Proj4;\n\nexport default CRS;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geo/CRS/index.js\n **/","/*\n * CRS.EPSG3857 (WGS 84 / Pseudo-Mercator) CRS implementation.\n *\n * Based on:\n * https://github.com/Leaflet/Leaflet/blob/master/src/geo/crs/CRS.EPSG3857.js\n */\n\nimport extend from 'lodash.assign';\nimport Earth from './CRS.Earth';\nimport SphericalMercator from '../projection/Projection.SphericalMercator';\nimport Transformation from '../../util/Transformation';\n\nvar _EPSG3857 = {\n  code: 'EPSG:3857',\n  projection: SphericalMercator,\n\n  // Work out how to de-dupe this (scoping issue)\n  transformScale: 1 / (Math.PI * SphericalMercator.R),\n\n  // Scale and transformation inputs changed to account for central origin in\n  // WebGL, instead of top-left origin used in Leaflet\n  transformation: (function() {\n    // TODO: Cannot use this.transformScale due to scope\n    var scale = 1 / (Math.PI * SphericalMercator.R);\n\n    return new Transformation(scale, 0, -scale, 0);\n  }())\n};\n\nconst EPSG3857 = extend({}, Earth, _EPSG3857);\n\nconst EPSG900913 = extend({}, EPSG3857, {\n  code: 'EPSG:900913'\n});\n\nexport {EPSG900913};\n\nexport default EPSG3857;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geo/CRS/CRS.EPSG3857.js\n **/","/*\n * CRS.Earth is the base class for all CRS representing Earth.\n *\n * Based on:\n * https://github.com/Leaflet/Leaflet/blob/master/src/geo/crs/CRS.Earth.js\n */\n\nimport extend from 'lodash.assign';\nimport CRS from './CRS';\nimport LatLon from '../LatLon';\n\nconst Earth = {\n  wrapLon: [-180, 180],\n\n  R: 6378137,\n\n  // Distance between two geographical points using spherical law of cosines\n  // approximation or Haversine\n  //\n  // See: http://www.movable-type.co.uk/scripts/latlong.html\n  distance: function(latlon1, latlon2, accurate) {\n    var rad = Math.PI / 180;\n\n    var lat1;\n    var lat2;\n\n    var a;\n\n    if (!accurate) {\n      lat1 = latlon1.lat * rad;\n      lat2 = latlon2.lat * rad;\n\n      a = Math.sin(lat1) * Math.sin(lat2) + Math.cos(lat1) * Math.cos(lat2) * Math.cos((latlon2.lon - latlon1.lon) * rad);\n\n      return this.R * Math.acos(Math.min(a, 1));\n    } else {\n      lat1 = latlon1.lat * rad;\n      lat2 = latlon2.lat * rad;\n\n      var lon1 = latlon1.lon * rad;\n      var lon2 = latlon2.lon * rad;\n\n      var deltaLat = lat2 - lat1;\n      var deltaLon = lon2 - lon1;\n\n      var halfDeltaLat = deltaLat / 2;\n      var halfDeltaLon = deltaLon / 2;\n\n      a = Math.sin(halfDeltaLat) * Math.sin(halfDeltaLat) + Math.cos(lat1) * Math.cos(lat2) * Math.sin(halfDeltaLon) * Math.sin(halfDeltaLon);\n\n      var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n\n      return this.R * c;\n    }\n  },\n\n  // Scale factor for converting between real metres and projected metres\n  //\n  // projectedMetres = realMetres * pointScale\n  // realMetres = projectedMetres / pointScale\n  //\n  // Defaults to a scale factor of 1 if no calculation method exists\n  //\n  // Probably need to run this through the CRS transformation or similar so the\n  // resulting scale is relative to the dimensions of the world space\n  // Eg. 1 metre in projected space is likly scaled up or down to some other\n  // number\n  pointScale: function(latlon, accurate) {\n    return (this.projection.pointScale) ? this.projection.pointScale(latlon, accurate) : [1, 1];\n  },\n\n  // Convert real metres to projected units\n  //\n  // Latitude scale is chosen because it fluctuates more than longitude\n  metresToProjected: function(metres, pointScale) {\n    return metres * pointScale[1];\n  },\n\n  // Convert projected units to real metres\n  //\n  // Latitude scale is chosen because it fluctuates more than longitude\n  projectedToMetres: function(projectedUnits, pointScale) {\n    return projectedUnits / pointScale[1];\n  },\n\n  // Convert real metres to a value in world (WebGL) units\n  metresToWorld: function(metres, pointScale, zoom) {\n    // Transform metres to projected metres using the latitude point scale\n    //\n    // Latitude scale is chosen because it fluctuates more than longitude\n    var projectedMetres = this.metresToProjected(metres, pointScale);\n\n    var scale = this.scale(zoom);\n\n    // Half scale if using zoom as WebGL origin is in the centre, not top left\n    if (zoom) {\n      scale /= 2;\n    }\n\n    // Scale projected metres\n    var scaledMetres = (scale * (this.transformScale * projectedMetres)) / pointScale[1];\n\n    return scaledMetres;\n  },\n\n  // Convert world (WebGL) units to a value in real metres\n  worldToMetres: function(worldUnits, pointScale, zoom) {\n    var scale = this.scale(zoom);\n\n    // Half scale if using zoom as WebGL origin is in the centre, not top left\n    if (zoom) {\n      scale /= 2;\n    }\n\n    var projectedUnits = ((worldUnits / scale) / this.transformScale) * pointScale[1];\n    var realMetres = this.projectedToMetres(projectedUnits, pointScale);\n\n    return realMetres;\n  }\n};\n\nexport default extend({}, CRS, Earth);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geo/CRS/CRS.Earth.js\n **/","/*\n * CRS is the base object for all defined CRS (Coordinate Reference Systems)\n *\n * Based on:\n * https://github.com/Leaflet/Leaflet/blob/master/src/geo/crs/CRS.js\n */\n\nimport LatLon from '../LatLon';\nimport Point from '../Point';\nimport wrapNum from '../../util/wrapNum';\n\nconst CRS = {\n  // Scale factor determines final dimensions of world space\n  //\n  // Projection transformation in range -1 to 1 is multiplied by scale factor to\n  // find final world coordinates\n  //\n  // Scale factor can be considered as half the amount of the desired dimension\n  // for the largest side when transformation is equal to 1 or -1, or as the\n  // distance between 0 and 1 on the largest side\n  //\n  // For example, if you want the world dimensions to be between -1000 and 1000\n  // then the scale factor will be 1000\n  scaleFactor: 1000000,\n\n  // Converts geo coords to pixel / WebGL ones\n  latLonToPoint: function(latlon, zoom) {\n    var projectedPoint = this.projection.project(latlon);\n    var scale = this.scale(zoom);\n\n    // Half scale if using zoom as WebGL origin is in the centre, not top left\n    if (zoom) {\n      scale /= 2;\n    }\n\n    return this.transformation._transform(projectedPoint, scale);\n  },\n\n  // Converts pixel / WebGL coords to geo coords\n  pointToLatLon: function(point, zoom) {\n    var scale = this.scale(zoom);\n\n    // Half scale if using zoom as WebGL origin is in the centre, not top left\n    if (zoom) {\n      scale /= 2;\n    }\n\n    var untransformedPoint = this.transformation.untransform(point, scale);\n\n    return this.projection.unproject(untransformedPoint);\n  },\n\n  // Converts geo coords to projection-specific coords (e.g. in meters)\n  project: function(latlon) {\n    return this.projection.project(latlon);\n  },\n\n  // Converts projected coords to geo coords\n  unproject: function(point) {\n    return this.projection.unproject(point);\n  },\n\n  // If zoom is provided, returns the map width in pixels for a given zoom\n  // Else, provides fixed scale value\n  scale: function(zoom) {\n    // If zoom is provided then return scale based on map tile zoom\n    if (zoom >= 0) {\n      return 256 * Math.pow(2, zoom);\n    // Else, return fixed scale value to expand projected coordinates from\n    // their 0 to 1 range into something more practical\n    } else {\n      return this.scaleFactor;\n    }\n  },\n\n  // Returns zoom level for a given scale value\n  // This only works with a scale value that is based on map pixel width\n  zoom: function(scale) {\n    return Math.log(scale / 256) / Math.LN2;\n  },\n\n  // Returns the bounds of the world in projected coords if applicable\n  getProjectedBounds: function(zoom) {\n    if (this.infinite) { return null; }\n\n    var b = this.projection.bounds;\n    var s = this.scale(zoom);\n\n    // Half scale if using zoom as WebGL origin is in the centre, not top left\n    if (zoom) {\n      s /= 2;\n    }\n\n    // Bottom left\n    var min = this.transformation.transform(Point(b[0]), s);\n\n    // Top right\n    var max = this.transformation.transform(Point(b[1]), s);\n\n    return [min, max];\n  },\n\n  // Whether a coordinate axis wraps in a given range (e.g. longitude from -180 to 180); depends on CRS\n  // wrapLon: [min, max],\n  // wrapLat: [min, max],\n\n  // If true, the coordinate space will be unbounded (infinite in all directions)\n  // infinite: false,\n\n  // Wraps geo coords in certain ranges if applicable\n  wrapLatLon: function(latlon) {\n    var lat = this.wrapLat ? wrapNum(latlon.lat, this.wrapLat, true) : latlon.lat;\n    var lon = this.wrapLon ? wrapNum(latlon.lon, this.wrapLon, true) : latlon.lon;\n    var alt = latlon.alt;\n\n    return LatLon(lat, lon, alt);\n  }\n};\n\nexport default CRS;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geo/CRS/CRS.js\n **/","/*\n * LatLon is a helper class for ensuring consistent geographic coordinates.\n *\n * Based on:\n * https://github.com/Leaflet/Leaflet/blob/master/src/geo/LatLng.js\n */\n\nclass LatLon {\n  constructor(lat, lon, alt) {\n    if (isNaN(lat) || isNaN(lon)) {\n      throw new Error('Invalid LatLon object: (' + lat + ', ' + lon + ')');\n    }\n\n    this.lat = +lat;\n    this.lon = +lon;\n\n    if (alt !== undefined) {\n      this.alt = +alt;\n    }\n  }\n\n  clone() {\n    return new LatLon(this.lat, this.lon, this.alt);\n  }\n}\n\n// Initialise without requiring new keyword\n//\n// Accepts (LatLon), ([lat, lon, alt]), ([lat, lon]) and (lat, lon, alt)\n// Also converts between lng and lon\nexport default function(a, b, c) {\n  if (a instanceof LatLon) {\n    return a;\n  }\n  if (Array.isArray(a) && typeof a[0] !== 'object') {\n    if (a.length === 3) {\n      return new LatLon(a[0], a[1], a[2]);\n    }\n    if (a.length === 2) {\n      return new LatLon(a[0], a[1]);\n    }\n    return null;\n  }\n  if (a === undefined || a === null) {\n    return a;\n  }\n  if (typeof a === 'object' && 'lat' in a) {\n    return new LatLon(a.lat, 'lng' in a ? a.lng : a.lon, a.alt);\n  }\n  if (b === undefined) {\n    return null;\n  }\n  return new LatLon(a, b, c);\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geo/LatLon.js\n **/","/*\n * Point is a helper class for ensuring consistent world positions.\n *\n * Based on:\n * https://github.com/Leaflet/Leaflet/blob/master/src/geo/Point.js\n */\n\nclass Point {\n  constructor(x, y, round) {\n    this.x = (round ? Math.round(x) : x);\n    this.y = (round ? Math.round(y) : y);\n  }\n\n  clone() {\n    return new Point(this.x, this.y);\n  }\n\n  // Non-destructive\n  add(point) {\n    return this.clone()._add(_point(point));\n  }\n\n  // Destructive\n  _add(point) {\n    this.x += point.x;\n    this.y += point.y;\n    return this;\n  }\n\n  // Non-destructive\n  subtract(point) {\n    return this.clone()._subtract(_point(point));\n  }\n\n  // Destructive\n  _subtract(point) {\n    this.x -= point.x;\n    this.y -= point.y;\n    return this;\n  }\n}\n\n// Accepts (point), ([x, y]) and (x, y, round)\nvar _point = function(x, y, round) {\n  if (x instanceof Point) {\n    return x;\n  }\n  if (Array.isArray(x)) {\n    return new Point(x[0], x[1]);\n  }\n  if (x === undefined || x === null) {\n    return x;\n  }\n  return new Point(x, y, round);\n};\n\n// Initialise without requiring new keyword\nexport default _point;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geo/Point.js\n **/","/*\n * Wrap the given number to lie within a certain range (eg. longitude)\n *\n * Based on:\n * https://github.com/Leaflet/Leaflet/blob/master/src/core/Util.js\n */\n\nconst wrapNum = function(x, range, includeMax) {\n  var max = range[1];\n  var min = range[0];\n  var d = max - min;\n  return x === max && includeMax ? x : ((x - min) % d + d) % d + min;\n};\n\nexport default wrapNum;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/util/wrapNum.js\n **/","/*\n * Spherical Mercator is the most popular map projection, used by EPSG:3857 CRS\n * used by default.\n *\n * Based on:\n * https://github.com/Leaflet/Leaflet/blob/master/src/geo/projection/Projection.SphericalMercator.js\n */\n\nimport LatLon from '../LatLon';\nimport Point from '../Point';\n\nconst SphericalMercator = {\n  // Radius / WGS84 semi-major axis\n  R: 6378137,\n  MAX_LATITUDE: 85.0511287798,\n\n  // WGS84 eccentricity\n  ECC: 0.081819191,\n  ECC2: 0.081819191 * 0.081819191,\n\n  project: function(latlon) {\n    var d = Math.PI / 180;\n    var max = this.MAX_LATITUDE;\n    var lat = Math.max(Math.min(max, latlon.lat), -max);\n    var sin = Math.sin(lat * d);\n\n    return Point(\n      this.R * latlon.lon * d,\n      this.R * Math.log((1 + sin) / (1 - sin)) / 2\n    );\n  },\n\n  unproject: function(point) {\n    var d = 180 / Math.PI;\n\n    return LatLon(\n      (2 * Math.atan(Math.exp(point.y / this.R)) - (Math.PI / 2)) * d,\n      point.x * d / this.R\n    );\n  },\n\n  // Scale factor for converting between real metres and projected metres\n  //\n  // projectedMetres = realMetres * pointScale\n  // realMetres = projectedMetres / pointScale\n  //\n  // Accurate scale factor uses proper Web Mercator scaling\n  // See pg.9: http://www.hydrometronics.com/downloads/Web%20Mercator%20-%20Non-Conformal,%20Non-Mercator%20(notes).pdf\n  // See: http://jsfiddle.net/robhawkes/yws924cf/\n  pointScale: function(latlon, accurate) {\n    var rad = Math.PI / 180;\n\n    var k;\n\n    if (!accurate) {\n      k = 1 / Math.cos(latlon.lat * rad);\n\n      // [scaleX, scaleY]\n      return [k, k];\n    } else {\n      var lat = latlon.lat * rad;\n      var lon = latlon.lon * rad;\n\n      var a = this.R;\n\n      var sinLat = Math.sin(lat);\n      var sinLat2 = sinLat * sinLat;\n\n      var cosLat = Math.cos(lat);\n\n      // Radius meridian\n      var p = a * (1 - this.ECC2) / Math.pow(1 - this.ECC2 * sinLat2, 3 / 2);\n\n      // Radius prime meridian\n      var v = a / Math.sqrt(1 - this.ECC2 * sinLat2);\n\n      // Scale N/S\n      var h = (a / p) / cosLat;\n\n      // Scale E/W\n      k = (a / v) / cosLat;\n\n      // [scaleX, scaleY]\n      return [k, h];\n    }\n  },\n\n  // Not using this.R due to scoping\n  bounds: (function() {\n    var d = 6378137 * Math.PI;\n    return [[-d, -d], [d, d]];\n  })()\n};\n\nexport default SphericalMercator;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geo/projection/Projection.SphericalMercator.js\n **/","/*\n * Transformation is an utility class to perform simple point transformations\n * through a 2d-matrix.\n *\n * Based on:\n * https://github.com/Leaflet/Leaflet/blob/master/src/geometry/Transformation.js\n */\n\nimport Point from '../geo/Point';\n\nclass Transformation {\n  constructor(a, b, c, d) {\n    this._a = a;\n    this._b = b;\n    this._c = c;\n    this._d = d;\n  }\n\n  transform(point, scale) {\n    // Copy input point as to not destroy the original data\n    return this._transform(point.clone(), scale);\n  }\n\n  // Destructive transform (faster)\n  _transform(point, scale) {\n    scale = scale || 1;\n\n    point.x = scale * (this._a * point.x + this._b);\n    point.y = scale * (this._c * point.y + this._d);\n    return point;\n  }\n\n  untransform(point, scale) {\n    scale = scale || 1;\n    return Point(\n      (point.x / scale - this._b) / this._a,\n      (point.y / scale - this._d) / this._c\n    );\n  }\n}\n\nexport default Transformation;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/util/Transformation.js\n **/","/*\n * CRS.EPSG3395 (WGS 84 / World Mercator) CRS implementation.\n *\n * Based on:\n * https://github.com/Leaflet/Leaflet/blob/master/src/geo/crs/CRS.EPSG3395.js\n */\n\nimport extend from 'lodash.assign';\nimport Earth from './CRS.Earth';\nimport Mercator from '../projection/Projection.Mercator';\nimport Transformation from '../../util/Transformation';\n\nvar _EPSG3395 = {\n  code: 'EPSG:3395',\n  projection: Mercator,\n\n  // Work out how to de-dupe this (scoping issue)\n  transformScale: 1 / (Math.PI * Mercator.R),\n\n  // Scale and transformation inputs changed to account for central origin in\n  // WebGL, instead of top-left origin used in Leaflet\n  transformation: (function() {\n    // TODO: Cannot use this.transformScale due to scope\n    var scale = 1 / (Math.PI * Mercator.R);\n\n    return new Transformation(scale, 0, -scale, 0);\n  }())\n};\n\nconst EPSG3395 = extend({}, Earth, _EPSG3395);\n\nexport default EPSG3395;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geo/CRS/CRS.EPSG3395.js\n **/","/*\n * Mercator projection that takes into account that the Earth is not a perfect\n * sphere. Less popular than spherical mercator; used by projections like\n * EPSG:3395.\n *\n * Based on:\n * https://github.com/Leaflet/Leaflet/blob/master/src/geo/projection/Projection.Mercator.js\n */\n\nimport LatLon from '../LatLon';\nimport Point from '../Point';\n\nconst Mercator = {\n  // Radius / WGS84 semi-major axis\n  R: 6378137,\n  R_MINOR: 6356752.314245179,\n\n  // WGS84 eccentricity\n  ECC: 0.081819191,\n  ECC2: 0.081819191 * 0.081819191,\n\n  project: function(latlon) {\n    var d = Math.PI / 180;\n    var r = this.R;\n    var y = latlon.lat * d;\n    var tmp = this.R_MINOR / r;\n    var e = Math.sqrt(1 - tmp * tmp);\n    var con = e * Math.sin(y);\n\n    var ts = Math.tan(Math.PI / 4 - y / 2) / Math.pow((1 - con) / (1 + con), e / 2);\n    y = -r * Math.log(Math.max(ts, 1E-10));\n\n    return Point(latlon.lon * d * r, y);\n  },\n\n  unproject: function(point) {\n    var d = 180 / Math.PI;\n    var r = this.R;\n    var tmp = this.R_MINOR / r;\n    var e = Math.sqrt(1 - tmp * tmp);\n    var ts = Math.exp(-point.y / r);\n    var phi = Math.PI / 2 - 2 * Math.atan(ts);\n\n    for (var i = 0, dphi = 0.1, con; i < 15 && Math.abs(dphi) > 1e-7; i++) {\n      con = e * Math.sin(phi);\n      con = Math.pow((1 - con) / (1 + con), e / 2);\n      dphi = Math.PI / 2 - 2 * Math.atan(ts * con) - phi;\n      phi += dphi;\n    }\n\n    return LatLon(phi * d, point.x * d / r);\n  },\n\n  // Scale factor for converting between real metres and projected metres\n  //\n  // projectedMetres = realMetres * pointScale\n  // realMetres = projectedMetres / pointScale\n  //\n  // See pg.8: http://www.hydrometronics.com/downloads/Web%20Mercator%20-%20Non-Conformal,%20Non-Mercator%20(notes).pdf\n  pointScale: function(latlon) {\n    var rad = Math.PI / 180;\n    var lat = latlon.lat * rad;\n    var sinLat = Math.sin(lat);\n    var sinLat2 = sinLat * sinLat;\n    var cosLat = Math.cos(lat);\n\n    var k = Math.sqrt(1 - this.ECC2 * sinLat2) / cosLat;\n\n    // [scaleX, scaleY]\n    return [k, k];\n  },\n\n  bounds: [[-20037508.34279, -15496570.73972], [20037508.34279, 18764656.23138]]\n};\n\nexport default Mercator;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geo/projection/Projection.Mercator.js\n **/","/*\n * CRS.EPSG4326 is a CRS popular among advanced GIS specialists.\n *\n * Based on:\n * https://github.com/Leaflet/Leaflet/blob/master/src/geo/crs/CRS.EPSG4326.js\n */\n\nimport extend from 'lodash.assign';\nimport Earth from './CRS.Earth';\nimport LatLonProjection from '../projection/Projection.LatLon';\nimport Transformation from '../../util/Transformation';\n\nvar _EPSG4326 = {\n  code: 'EPSG:4326',\n  projection: LatLonProjection,\n\n  // Work out how to de-dupe this (scoping issue)\n  transformScale: 1 / 180,\n\n  // Scale and transformation inputs changed to account for central origin in\n  // WebGL, instead of top-left origin used in Leaflet\n  //\n  // TODO: Cannot use this.transformScale due to scope\n  transformation: new Transformation(1 / 180, 0, -1 / 180, 0)\n};\n\nconst EPSG4326 = extend({}, Earth, _EPSG4326);\n\nexport default EPSG4326;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geo/CRS/CRS.EPSG4326.js\n **/","/*\n * Simple equirectangular (Plate Carree) projection, used by CRS like EPSG:4326\n * and Simple.\n *\n * Based on:\n * https://github.com/Leaflet/Leaflet/blob/master/src/geo/projection/Projection.LonLat.js\n */\n\nimport LatLon from '../LatLon';\nimport Point from '../Point';\n\nconst ProjectionLatLon = {\n  project: function(latlon) {\n    return Point(latlon.lon, latlon.lat);\n  },\n\n  unproject: function(point) {\n    return LatLon(point.y, point.x);\n  },\n\n  // Scale factor for converting between real metres and degrees\n  //\n  // degrees = realMetres * pointScale\n  // realMetres = degrees / pointScale\n  //\n  // See: http://stackoverflow.com/questions/639695/how-to-convert-latitude-or-longitude-to-meters\n  // See: http://gis.stackexchange.com/questions/75528/length-of-a-degree-where-do-the-terms-in-this-formula-come-from\n  pointScale: function(latlon) {\n    var m1 = 111132.92;\n    var m2 = -559.82;\n    var m3 = 1.175;\n    var m4 = -0.0023;\n    var p1 = 111412.84;\n    var p2 = -93.5;\n    var p3 = 0.118;\n\n    var rad = Math.PI / 180;\n    var lat = latlon.lat * rad;\n\n    var latlen = m1 + m2 * Math.cos(2 * lat) + m3 * Math.cos(4 * lat) + m4 * Math.cos(6 * lat);\n    var lonlen = p1 * Math.cos(lat) + p2 * Math.cos(3 * lat) + p3 * Math.cos(5 * lat);\n\n    return [1 / latlen, 1 / lonlen];\n  },\n\n  bounds: [[-180, -90], [180, 90]]\n};\n\nexport default ProjectionLatLon;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geo/projection/Projection.LatLon.js\n **/","/*\n * A simple CRS that can be used for flat non-Earth maps like panoramas or game\n * maps.\n *\n * Based on:\n * https://github.com/Leaflet/Leaflet/blob/master/src/geo/crs/CRS.Simple.js\n */\n\nimport extend from 'lodash.assign';\nimport CRS from './CRS';\nimport LatLonProjection from '../projection/Projection.LatLon';\nimport Transformation from '../../util/Transformation';\n\nvar _Simple = {\n  projection: LatLonProjection,\n\n  // Straight 1:1 mapping (-1, -1 would be top-left)\n  transformation: new Transformation(1, 0, 1, 0),\n\n  scale: function(zoom) {\n    // If zoom is provided then return scale based on map tile zoom\n    if (zoom) {\n      return Math.pow(2, zoom);\n    // Else, make no change to scale  may need to increase this or make it a\n    // user-definable variable\n    } else {\n      return 1;\n    }\n  },\n\n  zoom: function(scale) {\n    return Math.log(scale) / Math.LN2;\n  },\n\n  distance: function(latlon1, latlon2) {\n    var dx = latlon2.lon - latlon1.lon;\n    var dy = latlon2.lat - latlon1.lat;\n\n    return Math.sqrt(dx * dx + dy * dy);\n  },\n\n  infinite: true\n};\n\nconst Simple = extend({}, CRS, _Simple);\n\nexport default Simple;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geo/CRS/CRS.Simple.js\n **/","/*\n * CRS.Proj4 for any Proj4-supported CRS.\n */\n\nimport extend from 'lodash.assign';\nimport Earth from './CRS.Earth';\nimport Proj4Projection from '../projection/Projection.Proj4';\nimport Transformation from '../../util/Transformation';\n\nvar _Proj4 = function(code, def, bounds) {\n  var projection = Proj4Projection(def, bounds);\n\n  // Transformation calcuations\n  var diffX = projection.bounds[1][0] - projection.bounds[0][0];\n  var diffY = projection.bounds[1][1] - projection.bounds[0][1];\n\n  var halfX = diffX / 2;\n  var halfY = diffY / 2;\n\n  // This is the raw scale factor\n  var scaleX = 1 / halfX;\n  var scaleY = 1 / halfY;\n\n  // Find the minimum scale factor\n  //\n  // The minimum scale factor comes from the largest side and is the one\n  // you want to use for both axis so they stay relative in dimension\n  var scale = Math.min(scaleX, scaleY);\n\n  // Find amount to offset each axis by to make the central point lie on\n  // the [0,0] origin\n  var offsetX = scale * (projection.bounds[0][0] + halfX);\n  var offsetY = scale * (projection.bounds[0][1] + halfY);\n\n  return {\n    code: code,\n    projection: projection,\n\n    transformScale: scale,\n\n    // Map the input to a [-1,1] range with [0,0] in the centre\n    transformation: new Transformation(scale, -offsetX, -scale, offsetY)\n  };\n};\n\nconst Proj4 = function(code, def, bounds) {\n  return extend({}, Earth, _Proj4(code, def, bounds));\n};\n\nexport default Proj4;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geo/CRS/CRS.Proj4.js\n **/","/*\n * Proj4 support for any projection.\n */\n\nimport proj4 from 'proj4';\nimport LatLon from '../LatLon';\nimport Point from '../Point';\n\nconst Proj4 = function(def, bounds) {\n  var proj = proj4(def);\n\n  var project = function(latlon) {\n    return Point(proj.forward([latlon.lon, latlon.lat]));\n  };\n\n  var unproject = function(point) {\n    var inverse = proj.inverse([point.x, point.y]);\n    return LatLon(inverse[1], inverse[0]);\n  };\n\n  return {\n    project: project,\n    unproject: unproject,\n\n    // Scale factor for converting between real metres and projected metres\\\n    //\n    // Need to work out the best way to provide the pointScale calculations\n    // for custom, unknown projections (if wanting to override default)\n    //\n    // For now, user can manually override crs.pointScale or\n    // crs.projection.pointScale\n    //\n    // projectedMetres = realMetres * pointScale\n    // realMetres = projectedMetres / pointScale\n    pointScale: function(latlon, accurate) {\n      return [1, 1];\n    },\n\n    // Try and calculate bounds if none are provided\n    //\n    // This will provide incorrect bounds for some projections, so perhaps make\n    // bounds a required input instead\n    bounds: (function() {\n      if (bounds) {\n        return bounds;\n      } else {\n        var bottomLeft = project([-90, -180]);\n        var topRight = project([90, 180]);\n\n        return [bottomLeft, topRight];\n      }\n    })()\n  };\n};\n\nexport default Proj4;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/geo/projection/Projection.Proj4.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_22__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"proj4\"\n ** module id = 22\n ** module chunks = 0\n **/","import EventEmitter from 'eventemitter3';\nimport THREE from 'three';\nimport Scene from './Scene';\nimport Renderer from './Renderer';\nimport Camera from './Camera';\n\nclass Engine extends EventEmitter {\n  constructor(container) {\n    console.log('Init Engine');\n\n    super();\n\n    this._scene = Scene;\n    this._renderer = Renderer(container);\n    this._camera = Camera(container);\n    this.clock = new THREE.Clock();\n\n    this._frustum = new THREE.Frustum();\n  }\n\n  update(delta) {\n    this.emit('preRender');\n    this._renderer.render(this._scene, this._camera);\n    this.emit('postRender');\n  }\n}\n\n// Initialise without requiring new keyword\nexport default function(container) {\n  return new Engine(container);\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/engine/Engine.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_24__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"THREE\"\n ** module id = 24\n ** module chunks = 0\n **/","import THREE from 'three';\n\n// This can be imported from anywhere and will still reference the same scene,\n// though there is a helper reference in Engine.scene\n\nexport default (function() {\n  var scene = new THREE.Scene();\n  scene.fog = new THREE.Fog(0xffffff, 1, 15000);\n  return scene;\n})();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/engine/Scene.js\n **/","import THREE from 'three';\nimport Scene from './Scene';\n\n// This can only be accessed from Engine.renderer if you want to reference the\n// same scene in multiple places\n\nexport default function(container) {\n  var renderer = new THREE.WebGLRenderer({\n    antialias: true\n  });\n\n  renderer.setClearColor(Scene.fog.color, 1);\n\n  // Gamma settings make things look nicer\n  renderer.gammaInput = true;\n  renderer.gammaOutput = true;\n\n  container.appendChild(renderer.domElement);\n\n  var updateSize = function() {\n    renderer.setSize(container.clientWidth, container.clientHeight);\n  };\n\n  window.addEventListener('resize', updateSize, false);\n  updateSize();\n\n  return renderer;\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/engine/Renderer.js\n **/","import THREE from 'three';\n\n// This can only be accessed from Engine.camera if you want to reference the\n// same scene in multiple places\n\n// TODO: Ensure that FOV looks natural on all aspect ratios\n// http://stackoverflow.com/q/26655930/997339\n\nexport default function(container) {\n  var camera = new THREE.PerspectiveCamera(45, 1, 1, 40000);\n  camera.position.y = 400;\n  camera.position.z = 400;\n\n  var updateSize = function() {\n    camera.aspect = container.clientWidth / container.clientHeight;\n    camera.updateProjectionMatrix();\n  };\n\n  window.addEventListener('resize', updateSize, false);\n  updateSize();\n\n  return camera;\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/engine/Camera.js\n **/","import Orbit from './Controls.Orbit';\n\nconst Controls = {\n  Orbit: Orbit\n};\n\nexport default Controls;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/controls/index.js\n **/","import EventEmitter from 'eventemitter3';\nimport THREE from 'three';\nimport OrbitControls from 'three-orbit-controls';\n\nvar _OrbitControls = OrbitControls(THREE);\n\nclass Orbit extends EventEmitter {\n  constructor() {\n    super();\n  }\n\n  // Proxy control events\n  //\n  // There's currently no distinction between pan, orbit and zoom events\n  _initEvents() {\n    this._controls.addEventListener('start', (event) => {\n      this._world.emit('controlsMoveStart', event.target.center);\n    });\n\n    this._controls.addEventListener('change', (event) => {\n      this._world.emit('controlsMove', event.target.center);\n    });\n\n    this._controls.addEventListener('end', (event) => {\n      this._world.emit('controlsMoveEnd', event.target.center);\n    });\n  }\n\n  // Moving the camera along the [x,y,z] axis based on a target position\n  _panTo(point, animate) {}\n  _panBy(pointDelta, animate) {}\n\n  // Zooming the camera in and out\n  _zoomTo(metres, animate) {}\n  _zoomBy(metresDelta, animate) {}\n\n  // Force camera to look at something other than the target\n  _lookAt(point, animate) {}\n\n  // Make camera look at the target\n  _lookAtTarget() {}\n\n  // Tilt (up and down)\n  _tiltTo(angle, animate) {}\n  _tiltBy(angleDelta, animate) {}\n\n  // Rotate (left and right)\n  _rotateTo(angle, animate) {}\n  _rotateBy(angleDelta, animate) {}\n\n  // Fly to the given point, animating pan and tilt/rotation to final position\n  // with nice zoom out and in\n  //\n  // Calling flyTo a second time before the previous animation has completed\n  // will immediately start the new animation from wherever the previous one\n  // has got to\n  _flyTo(point, noZoom) {}\n\n  // Proxy to OrbitControls.update()\n  update() {\n    this._controls.update();\n  }\n\n  // Add controls to world instance and store world reference\n  addTo(world) {\n    world.addControls(this);\n    return this;\n  }\n\n  // Internal method called by World.addControls to actually add the controls\n  _addToWorld(world) {\n    this._world = world;\n\n    // TODO: Override panLeft and panUp methods to prevent panning on Y axis\n    // See: http://stackoverflow.com/a/26188674/997339\n    this._controls = new _OrbitControls(world._engine._camera, world._container);\n\n    // Disable keys for now as no events are fired for them anyway\n    this._controls.keys = false;\n\n    // 89 degrees\n    this._controls.maxPolarAngle = 1.5533;\n\n    // this._controls.enableDamping = true;\n    // this._controls.dampingFactor = 0.25;\n\n    this._initEvents();\n\n    this.emit('added');\n  }\n}\n\n// Initialise without requiring new keyword\nexport default function() {\n  return new Orbit();\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/controls/Controls.Orbit.js\n **/","module.exports = function(THREE) {\n\tvar MOUSE = THREE.MOUSE\n\tif (!MOUSE)\n\t\tMOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2 };\n\n\t/**\n\t * @author qiao / https://github.com/qiao\n\t * @author mrdoob / http://mrdoob.com\n\t * @author alteredq / http://alteredqualia.com/\n\t * @author WestLangley / http://github.com/WestLangley\n\t * @author erich666 / http://erichaines.com\n\t */\n\t/*global THREE, console */\n\n\tfunction OrbitConstraint ( object ) {\n\n\t\tthis.object = object;\n\n\t\t// \"target\" sets the location of focus, where the object orbits around\n\t\t// and where it pans with respect to.\n\t\tthis.target = new THREE.Vector3();\n\n\t\t// Limits to how far you can dolly in and out ( PerspectiveCamera only )\n\t\tthis.minDistance = 0;\n\t\tthis.maxDistance = Infinity;\n\n\t\t// Limits to how far you can zoom in and out ( OrthographicCamera only )\n\t\tthis.minZoom = 0;\n\t\tthis.maxZoom = Infinity;\n\n\t\t// How far you can orbit vertically, upper and lower limits.\n\t\t// Range is 0 to Math.PI radians.\n\t\tthis.minPolarAngle = 0; // radians\n\t\tthis.maxPolarAngle = Math.PI; // radians\n\n\t\t// How far you can orbit horizontally, upper and lower limits.\n\t\t// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n\t\tthis.minAzimuthAngle = - Infinity; // radians\n\t\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t\t// Set to true to enable damping (inertia)\n\t\t// If damping is enabled, you must call controls.update() in your animation loop\n\t\tthis.enableDamping = false;\n\t\tthis.dampingFactor = 0.25;\n\n\t\t////////////\n\t\t// internals\n\n\t\tvar scope = this;\n\n\t\tvar EPS = 0.000001;\n\n\t\t// Current position in spherical coordinate system.\n\t\tvar theta;\n\t\tvar phi;\n\n\t\t// Pending changes\n\t\tvar phiDelta = 0;\n\t\tvar thetaDelta = 0;\n\t\tvar scale = 1;\n\t\tvar panOffset = new THREE.Vector3();\n\t\tvar zoomChanged = false;\n\n\t\t// API\n\n\t\tthis.getPolarAngle = function () {\n\n\t\t\treturn phi;\n\n\t\t};\n\n\t\tthis.getAzimuthalAngle = function () {\n\n\t\t\treturn theta;\n\n\t\t};\n\n\t\tthis.rotateLeft = function ( angle ) {\n\n\t\t\tthetaDelta -= angle;\n\n\t\t};\n\n\t\tthis.rotateUp = function ( angle ) {\n\n\t\t\tphiDelta -= angle;\n\n\t\t};\n\n\t\t// pass in distance in world space to move left\n\t\tthis.panLeft = function() {\n\n\t\t\tvar v = new THREE.Vector3();\n\n\t\t  return function panLeft(distance) {\n\t\t    var te = this.object.matrix.elements;\n\t\t    var adjDist = distance / Math.cos(phi);\n\n\t\t    v.set(te[ 0 ], 0, te[ 2 ]).normalize();\n\t\t    v.multiplyScalar(-adjDist);\n\n\t\t    panOffset.add(v);\n\t\t  };\n\n\t\t}();\n\n\t\t// pass in distance in world space to move up\n\t\tthis.panUp = function() {\n\n\t\t\tvar v = new THREE.Vector3();\n\n\t\t  return function panUp(distance) {\n\t\t    var te = this.object.matrix.elements;\n\t\t    var adjDist = distance / Math.cos(phi);\n\n\t\t    v.set(te[ 8 ], 0, te[ 10 ]).normalize();\n\t\t    v.multiplyScalar(-adjDist);\n\n\t\t    panOffset.add(v);\n\t\t  };\n\n\t\t}();\n\n\t\t// pass in x,y of change desired in pixel space,\n\t\t// right and down are positive\n\t\tthis.pan = function ( deltaX, deltaY, screenWidth, screenHeight ) {\n\n\t\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\n\n\t\t\t\t// perspective\n\t\t\t\tvar position = scope.object.position;\n\t\t\t\tvar offset = position.clone().sub( scope.target );\n\t\t\t\tvar targetDistance = offset.length();\n\n\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t\t// we actually don't use screenWidth, since perspective camera is fixed to screen height\n\t\t\t\tscope.panLeft( 2 * deltaX * targetDistance / screenHeight );\n\t\t\t\tscope.panUp( 2 * deltaY * targetDistance / screenHeight );\n\n\t\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\n\t\t\t\t// orthographic\n\t\t\t\tscope.panLeft( deltaX * ( scope.object.right - scope.object.left ) / screenWidth );\n\t\t\t\tscope.panUp( deltaY * ( scope.object.top - scope.object.bottom ) / screenHeight );\n\n\t\t\t} else {\n\n\t\t\t\t// camera neither orthographic or perspective\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.dollyIn = function ( dollyScale ) {\n\n\t\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\n\n\t\t\t\tscale /= dollyScale;\n\n\t\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\n\t\t\t\tscope.object.zoom = Math.max( this.minZoom, Math.min( this.maxZoom, this.object.zoom * dollyScale ) );\n\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\tzoomChanged = true;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.dollyOut = function ( dollyScale ) {\n\n\t\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\n\n\t\t\t\tscale *= dollyScale;\n\n\t\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\n\t\t\t\tscope.object.zoom = Math.max( this.minZoom, Math.min( this.maxZoom, this.object.zoom / dollyScale ) );\n\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\tzoomChanged = true;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.update = function() {\n\n\t\t\tvar offset = new THREE.Vector3();\n\n\t\t\t// so camera.up is the orbit axis\n\t\t\tvar quat = new THREE.Quaternion().setFromUnitVectors( object.up, new THREE.Vector3( 0, 1, 0 ) );\n\t\t\tvar quatInverse = quat.clone().inverse();\n\n\t\t\tvar lastPosition = new THREE.Vector3();\n\t\t\tvar lastQuaternion = new THREE.Quaternion();\n\n\t\t\treturn function () {\n\n\t\t\t\tvar position = this.object.position;\n\n\t\t\t\toffset.copy( position ).sub( this.target );\n\n\t\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\t\toffset.applyQuaternion( quat );\n\n\t\t\t\t// angle from z-axis around y-axis\n\n\t\t\t\ttheta = Math.atan2( offset.x, offset.z );\n\n\t\t\t\t// angle from y-axis\n\n\t\t\t\tphi = Math.atan2( Math.sqrt( offset.x * offset.x + offset.z * offset.z ), offset.y );\n\n\t\t\t\ttheta += thetaDelta;\n\t\t\t\tphi += phiDelta;\n\n\t\t\t\t// restrict theta to be between desired limits\n\t\t\t\ttheta = Math.max( this.minAzimuthAngle, Math.min( this.maxAzimuthAngle, theta ) );\n\n\t\t\t\t// restrict phi to be between desired limits\n\t\t\t\tphi = Math.max( this.minPolarAngle, Math.min( this.maxPolarAngle, phi ) );\n\n\t\t\t\t// restrict phi to be betwee EPS and PI-EPS\n\t\t\t\tphi = Math.max( EPS, Math.min( Math.PI - EPS, phi ) );\n\n\t\t\t\tvar radius = offset.length() * scale;\n\n\t\t\t\t// restrict radius to be between desired limits\n\t\t\t\tradius = Math.max( this.minDistance, Math.min( this.maxDistance, radius ) );\n\n\t\t\t\t// move target to panned location\n\t\t\t\tthis.target.add( panOffset );\n\n\t\t\t\toffset.x = radius * Math.sin( phi ) * Math.sin( theta );\n\t\t\t\toffset.y = radius * Math.cos( phi );\n\t\t\t\toffset.z = radius * Math.sin( phi ) * Math.cos( theta );\n\n\t\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\t\toffset.applyQuaternion( quatInverse );\n\n\t\t\t\tposition.copy( this.target ).add( offset );\n\n\t\t\t\tthis.object.lookAt( this.target );\n\n\t\t\t\tif ( this.enableDamping === true ) {\n\n\t\t\t\t\tthetaDelta *= ( 1 - this.dampingFactor );\n\t\t\t\t\tphiDelta *= ( 1 - this.dampingFactor );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthetaDelta = 0;\n\t\t\t\t\tphiDelta = 0;\n\n\t\t\t\t}\n\n\t\t\t\tscale = 1;\n\t\t\t\tpanOffset.set( 0, 0, 0 );\n\n\t\t\t\t// update condition is:\n\t\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\t\tif ( zoomChanged ||\n\t\t\t\t\t lastPosition.distanceToSquared( this.object.position ) > EPS ||\n\t\t\t\t\t8 * ( 1 - lastQuaternion.dot( this.object.quaternion ) ) > EPS ) {\n\n\t\t\t\t\tlastPosition.copy( this.object.position );\n\t\t\t\t\tlastQuaternion.copy( this.object.quaternion );\n\t\t\t\t\tzoomChanged = false;\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t};\n\n\t\t}();\n\n\t};\n\n\n\t// This set of controls performs orbiting, dollying (zooming), and panning. It maintains\n\t// the \"up\" direction as +Y, unlike the TrackballControls. Touch on tablet and phones is\n\t// supported.\n\t//\n\t//    Orbit - left mouse / touch: one finger move\n\t//    Zoom - middle mouse, or mousewheel / touch: two finger spread or squish\n\t//    Pan - right mouse, or arrow keys / touch: three finter swipe\n\n\tfunction OrbitControls ( object, domElement ) {\n\n\t\tvar constraint = new OrbitConstraint( object );\n\n\t\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\n\n\t\t// API\n\n\t\tObject.defineProperty( this, 'constraint', {\n\n\t\t\tget: function() {\n\n\t\t\t\treturn constraint;\n\n\t\t\t}\n\n\t\t} );\n\n\t\tthis.getPolarAngle = function () {\n\n\t\t\treturn constraint.getPolarAngle();\n\n\t\t};\n\n\t\tthis.getAzimuthalAngle = function () {\n\n\t\t\treturn constraint.getAzimuthalAngle();\n\n\t\t};\n\n\t\t// Set to false to disable this control\n\t\tthis.enabled = true;\n\n\t\t// center is old, deprecated; use \"target\" instead\n\t\tthis.center = this.target;\n\n\t\t// This option actually enables dollying in and out; left as \"zoom\" for\n\t\t// backwards compatibility.\n\t\t// Set to false to disable zooming\n\t\tthis.enableZoom = true;\n\t\tthis.zoomSpeed = 1.0;\n\n\t\t// Set to false to disable rotating\n\t\tthis.enableRotate = true;\n\t\tthis.rotateSpeed = 1.0;\n\n\t\t// Set to false to disable panning\n\t\tthis.enablePan = true;\n\t\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n\t\t// Set to true to automatically rotate around the target\n\t\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\t\tthis.autoRotate = false;\n\t\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n\t\t// Set to false to disable use of the keys\n\t\tthis.enableKeys = true;\n\n\t\t// The four arrow keys\n\t\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\t\t// Mouse buttons\n\t\tthis.mouseButtons = { ORBIT: THREE.MOUSE.LEFT, ZOOM: THREE.MOUSE.MIDDLE, PAN: THREE.MOUSE.RIGHT };\n\n\t\t////////////\n\t\t// internals\n\n\t\tvar scope = this;\n\n\t\tvar rotateStart = new THREE.Vector2();\n\t\tvar rotateEnd = new THREE.Vector2();\n\t\tvar rotateDelta = new THREE.Vector2();\n\n\t\tvar panStart = new THREE.Vector2();\n\t\tvar panEnd = new THREE.Vector2();\n\t\tvar panDelta = new THREE.Vector2();\n\n\t\tvar dollyStart = new THREE.Vector2();\n\t\tvar dollyEnd = new THREE.Vector2();\n\t\tvar dollyDelta = new THREE.Vector2();\n\n\t\tvar STATE = { NONE : - 1, ROTATE : 0, DOLLY : 1, PAN : 2, TOUCH_ROTATE : 3, TOUCH_DOLLY : 4, TOUCH_PAN : 5 };\n\n\t\tvar state = STATE.NONE;\n\n\t\t// for reset\n\n\t\tthis.target0 = this.target.clone();\n\t\tthis.position0 = this.object.position.clone();\n\t\tthis.zoom0 = this.object.zoom;\n\n\t\t// events\n\n\t\tvar changeEvent = { type: 'change' };\n\t\tvar startEvent = { type: 'start' };\n\t\tvar endEvent = { type: 'end' };\n\n\t\t// pass in x,y of change desired in pixel space,\n\t\t// right and down are positive\n\t\tfunction pan( deltaX, deltaY ) {\n\n\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t\tconstraint.pan( deltaX, deltaY, element.clientWidth, element.clientHeight );\n\n\t\t}\n\n\t\tthis.update = function () {\n\n\t\t\tif ( this.autoRotate && state === STATE.NONE ) {\n\n\t\t\t\tconstraint.rotateLeft( getAutoRotationAngle() );\n\n\t\t\t}\n\n\t\t\tif ( constraint.update() === true ) {\n\n\t\t\t\tthis.dispatchEvent( changeEvent );\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.reset = function () {\n\n\t\t\tstate = STATE.NONE;\n\n\t\t\tthis.target.copy( this.target0 );\n\t\t\tthis.object.position.copy( this.position0 );\n\t\t\tthis.object.zoom = this.zoom0;\n\n\t\t\tthis.object.updateProjectionMatrix();\n\t\t\tthis.dispatchEvent( changeEvent );\n\n\t\t\tthis.update();\n\n\t\t};\n\n\t\tfunction getAutoRotationAngle() {\n\n\t\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t\t}\n\n\t\tfunction getZoomScale() {\n\n\t\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\n\t\t}\n\n\t\tfunction onMouseDown( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t\tif ( event.button === scope.mouseButtons.ORBIT ) {\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\trotateStart.set( event.clientX, event.clientY );\n\n\t\t\t} else if ( event.button === scope.mouseButtons.ZOOM ) {\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t\t\t} else if ( event.button === scope.mouseButtons.PAN ) {\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\tpanStart.set( event.clientX, event.clientY );\n\n\t\t\t}\n\n\t\t\tif ( state !== STATE.NONE ) {\n\n\t\t\t\tdocument.addEventListener( 'mousemove', onMouseMove, false );\n\t\t\t\tdocument.addEventListener( 'mouseup', onMouseUp, false );\n\t\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onMouseMove( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t\tif ( state === STATE.ROTATE ) {\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\trotateEnd.set( event.clientX, event.clientY );\n\t\t\t\trotateDelta.subVectors( rotateEnd, rotateStart );\n\n\t\t\t\t// rotating across whole screen goes 360 degrees around\n\t\t\t\tconstraint.rotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\n\n\t\t\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\n\t\t\t\tconstraint.rotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\n\n\t\t\t\trotateStart.copy( rotateEnd );\n\n\t\t\t} else if ( state === STATE.DOLLY ) {\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\tdollyEnd.set( event.clientX, event.clientY );\n\t\t\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\t\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\t\t\tconstraint.dollyIn( getZoomScale() );\n\n\t\t\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\t\t\tconstraint.dollyOut( getZoomScale() );\n\n\t\t\t\t}\n\n\t\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t\t} else if ( state === STATE.PAN ) {\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\tpanEnd.set( event.clientX, event.clientY );\n\t\t\t\tpanDelta.subVectors( panEnd, panStart );\n\n\t\t\t\tpan( panDelta.x, panDelta.y );\n\n\t\t\t\tpanStart.copy( panEnd );\n\n\t\t\t}\n\n\t\t\tif ( state !== STATE.NONE ) scope.update();\n\n\t\t}\n\n\t\tfunction onMouseUp( /* event */ ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\t\t\tscope.dispatchEvent( endEvent );\n\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tfunction onMouseWheel( event ) {\n\n\t\t\tif ( scope.enabled === false || scope.enableZoom === false || state !== STATE.NONE ) return;\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tvar delta = 0;\n\n\t\t\tif ( event.wheelDelta !== undefined ) {\n\n\t\t\t\t// WebKit / Opera / Explorer 9\n\n\t\t\t\tdelta = event.wheelDelta;\n\n\t\t\t} else if ( event.detail !== undefined ) {\n\n\t\t\t\t// Firefox\n\n\t\t\t\tdelta = - event.detail;\n\n\t\t\t}\n\n\t\t\tif ( delta > 0 ) {\n\n\t\t\t\tconstraint.dollyOut( getZoomScale() );\n\n\t\t\t} else if ( delta < 0 ) {\n\n\t\t\t\tconstraint.dollyIn( getZoomScale() );\n\n\t\t\t}\n\n\t\t\tscope.update();\n\t\t\tscope.dispatchEvent( startEvent );\n\t\t\tscope.dispatchEvent( endEvent );\n\n\t\t}\n\n\t\tfunction onKeyDown( event ) {\n\n\t\t\tif ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\n\n\t\t\tswitch ( event.keyCode ) {\n\n\t\t\t\tcase scope.keys.UP:\n\t\t\t\t\tpan( 0, scope.keyPanSpeed );\n\t\t\t\t\tscope.update();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\t\t\t\t\tscope.update();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.LEFT:\n\t\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\t\t\t\t\tscope.update();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.RIGHT:\n\t\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\t\t\t\t\tscope.update();\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction touchstart( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tswitch ( event.touches.length ) {\n\n\t\t\t\tcase 1:\t// one-fingered touch: rotate\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2:\t// two-fingered touch: dolly\n\n\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\t\tstate = STATE.TOUCH_DOLLY;\n\n\t\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t\t\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\t\t\t\t\tdollyStart.set( 0, distance );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 3: // three-fingered touch: pan\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\t\tpanStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t\tif ( state !== STATE.NONE ) scope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t\tfunction touchmove( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t\tswitch ( event.touches.length ) {\n\n\t\t\t\tcase 1: // one-fingered touch: rotate\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\t\t\t\t\tif ( state !== STATE.TOUCH_ROTATE ) return;\n\n\t\t\t\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t\t\t\t\trotateDelta.subVectors( rotateEnd, rotateStart );\n\n\t\t\t\t\t// rotating across whole screen goes 360 degrees around\n\t\t\t\t\tconstraint.rotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\n\t\t\t\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\n\t\t\t\t\tconstraint.rotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\n\n\t\t\t\t\trotateStart.copy( rotateEnd );\n\n\t\t\t\t\tscope.update();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2: // two-fingered touch: dolly\n\n\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\t\t\t\t\tif ( state !== STATE.TOUCH_DOLLY ) return;\n\n\t\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t\t\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\t\t\tdollyEnd.set( 0, distance );\n\t\t\t\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\t\t\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\t\t\t\tconstraint.dollyOut( getZoomScale() );\n\n\t\t\t\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\t\t\t\tconstraint.dollyIn( getZoomScale() );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t\t\t\tscope.update();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 3: // three-fingered touch: pan\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\t\t\t\t\tif ( state !== STATE.TOUCH_PAN ) return;\n\n\t\t\t\t\tpanEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t\t\t\t\tpanDelta.subVectors( panEnd, panStart );\n\n\t\t\t\t\tpan( panDelta.x, panDelta.y );\n\n\t\t\t\t\tpanStart.copy( panEnd );\n\n\t\t\t\t\tscope.update();\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction touchend( /* event */ ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tscope.dispatchEvent( endEvent );\n\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tfunction contextmenu( event ) {\n\n\t\t\tevent.preventDefault();\n\n\t\t}\n\n\t\tthis.dispose = function() {\n\n\t\t\tthis.domElement.removeEventListener( 'contextmenu', contextmenu, false );\n\t\t\tthis.domElement.removeEventListener( 'mousedown', onMouseDown, false );\n\t\t\tthis.domElement.removeEventListener( 'mousewheel', onMouseWheel, false );\n\t\t\tthis.domElement.removeEventListener( 'MozMousePixelScroll', onMouseWheel, false ); // firefox\n\n\t\t\tthis.domElement.removeEventListener( 'touchstart', touchstart, false );\n\t\t\tthis.domElement.removeEventListener( 'touchend', touchend, false );\n\t\t\tthis.domElement.removeEventListener( 'touchmove', touchmove, false );\n\n\t\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\n\t\t\twindow.removeEventListener( 'keydown', onKeyDown, false );\n\n\t\t}\n\n\t\tthis.domElement.addEventListener( 'contextmenu', contextmenu, false );\n\n\t\tthis.domElement.addEventListener( 'mousedown', onMouseDown, false );\n\t\tthis.domElement.addEventListener( 'mousewheel', onMouseWheel, false );\n\t\tthis.domElement.addEventListener( 'MozMousePixelScroll', onMouseWheel, false ); // firefox\n\n\t\tthis.domElement.addEventListener( 'touchstart', touchstart, false );\n\t\tthis.domElement.addEventListener( 'touchend', touchend, false );\n\t\tthis.domElement.addEventListener( 'touchmove', touchmove, false );\n\n\t\twindow.addEventListener( 'keydown', onKeyDown, false );\n\n\t\t// force an update at start\n\t\tthis.update();\n\n\t};\n\n\tOrbitControls.prototype = Object.create( THREE.EventDispatcher.prototype );\n\tOrbitControls.prototype.constructor = OrbitControls;\n\n\tObject.defineProperties( OrbitControls.prototype, {\n\n\t\tobject: {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.constraint.object;\n\n\t\t\t}\n\n\t\t},\n\n\t\ttarget: {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.constraint.target;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: target is now immutable. Use target.set() instead.' );\n\t\t\t\tthis.constraint.target.copy( value );\n\n\t\t\t}\n\n\t\t},\n\n\t\tminDistance : {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.constraint.minDistance;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis.constraint.minDistance = value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tmaxDistance : {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.constraint.maxDistance;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis.constraint.maxDistance = value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tminZoom : {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.constraint.minZoom;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis.constraint.minZoom = value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tmaxZoom : {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.constraint.maxZoom;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis.constraint.maxZoom = value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tminPolarAngle : {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.constraint.minPolarAngle;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis.constraint.minPolarAngle = value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tmaxPolarAngle : {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.constraint.maxPolarAngle;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis.constraint.maxPolarAngle = value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tminAzimuthAngle : {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.constraint.minAzimuthAngle;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis.constraint.minAzimuthAngle = value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tmaxAzimuthAngle : {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.constraint.maxAzimuthAngle;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis.constraint.maxAzimuthAngle = value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tenableDamping : {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.constraint.enableDamping;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis.constraint.enableDamping = value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tdampingFactor : {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.constraint.dampingFactor;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis.constraint.dampingFactor = value;\n\n\t\t\t}\n\n\t\t},\n\n\t\t// backward compatibility\n\n\t\tnoZoom: {\n\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\n\t\t\t\treturn ! this.enableZoom;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\n\t\t\t\tthis.enableZoom = ! value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tnoRotate: {\n\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\n\t\t\t\treturn ! this.enableRotate;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\n\t\t\t\tthis.enableRotate = ! value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tnoPan: {\n\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\n\t\t\t\treturn ! this.enablePan;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\n\t\t\t\tthis.enablePan = ! value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tnoKeys: {\n\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\n\t\t\t\treturn ! this.enableKeys;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\n\t\t\t\tthis.enableKeys = ! value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tstaticMoving : {\n\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\n\t\t\t\treturn ! this.constraint.enableDamping;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\n\t\t\t\tthis.constraint.enableDamping = ! value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tdynamicDampingFactor : {\n\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\n\t\t\t\treturn this.constraint.dampingFactor;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\n\t\t\t\tthis.constraint.dampingFactor = value;\n\n\t\t\t}\n\n\t\t}\n\n\t} );\n\n\treturn OrbitControls;\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/three-orbit-controls/index.js\n ** module id = 30\n ** module chunks = 0\n **/","import Layer from '../Layer';\nimport THREE from 'three';\n\nclass EnvironmentLayer extends Layer {\n  constructor() {\n    super();\n\n    this._initLights();\n    // this._initGrid();\n  }\n\n  _onAdd() {}\n\n  // Not fleshed out or thought through yet\n  //\n  // Lights could potentially be put it their own 'layer' to keep this class\n  // much simpler and less messy\n  _initLights() {\n    // Position doesn't really matter (the angle is important), however it's\n    // used here so the helpers look more natural.\n\n    var directionalLight = new THREE.DirectionalLight(0x999999);\n    directionalLight.intesity = 0.1;\n    directionalLight.position.x = 100;\n    directionalLight.position.y = 100;\n    directionalLight.position.z = 100;\n\n    var directionalLight2 = new THREE.DirectionalLight(0x999999);\n    directionalLight2.intesity = 0.1;\n    directionalLight2.position.x = -100;\n    directionalLight2.position.y = 100;\n    directionalLight2.position.z = -100;\n\n    var helper = new THREE.DirectionalLightHelper(directionalLight, 10);\n    var helper2 = new THREE.DirectionalLightHelper(directionalLight2, 10);\n\n    this._layer.add(directionalLight);\n    this._layer.add(directionalLight2);\n\n    this._layer.add(helper);\n    this._layer.add(helper2);\n  }\n\n  // Add grid helper for context during initial development\n  _initGrid() {\n    var size = 4000;\n    var step = 100;\n\n    var gridHelper = new THREE.GridHelper(size, step);\n    this._layer.add(gridHelper);\n  }\n}\n\n// Initialise without requiring new keyword\nexport default function() {\n  return new EnvironmentLayer();\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/layer/environment/EnvironmentLayer.js\n **/","import EventEmitter from 'eventemitter3';\nimport THREE from 'three';\nimport Scene from '../engine/Scene';\n\nclass Layer extends EventEmitter {\n  constructor() {\n    super();\n\n    this._layer = new THREE.Object3D();\n  }\n\n  // Add layer to world instance and store world reference\n  addTo(world) {\n    world.addLayer(this);\n    return this;\n  }\n\n  // Internal method called by World.addLayer to actually add the layer\n  _addToWorld(world) {\n    this._world = world;\n    this._onAdd(world);\n    this.emit('added');\n  }\n}\n\nexport default Layer;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/layer/Layer.js\n **/","import Layer from '../Layer';\nimport TileCache from './TileCache';\nimport GridBaseMaterial from './GridBaseMaterial';\nimport throttle from 'lodash.throttle';\nimport THREE from 'three';\n\n// DONE: Prevent tiles from being loaded if they are further than a certain\n// distance from the camera and are unlikely to be seen anyway\n\n// DONE: Find a way to avoid the flashing caused by the gap between old tiles\n// being removed and the new tiles being ready for display\n//\n// DONE: Simplest first step for MVP would be to give each tile mesh the colour\n// of the basemap ground so it blends in a little more, or have a huge ground\n// plane underneath all the tiles that shows through between tile updates.\n//\n// Could keep the old tiles around until the new ones are ready, though they'd\n// probably need to be layered in a way so the old tiles don't overlap new ones,\n// which is similar to how Leaflet approaches this (it has 2 layers)\n//\n// Could keep the tile from the previous quadtree level visible until all 4\n// tiles at the new / current level have finished loading and are displayed.\n// Perhaps by keeping a map of tiles by quadcode and a boolean for each of the\n// child quadcodes showing whether they are loaded and in view. If all true then\n// remove the parent tile, otherwise keep it on a lower layer.\n\n// TODO: Avoid performing LOD calculation when it isn't required. For example,\n// when nothing has changed since the last frame and there are no tiles to be\n// loaded or in need of rendering\n\n// TODO: Only remove tiles from the layer that aren't to be rendered in the\n// current frame it seems excessive to remove all tiles and re-add them on\n// every single frame, even if it's just array manipulation\n\n// TODO: Fix LOD calculation so min and max LOD can be changed without causing\n// problems (eg. making min above 5 causes all sorts of issues)\n\n// TODO: Reuse THREE objects where possible instead of creating new instances\n// on every LOD calculation\n\n// TODO: Consider not using THREE or LatLon / Point objects in LOD calculations\n// to avoid creating unnecessary memory for garbage collection\n\n// TODO: Load and display a base layer separate to the LOD grid that is at a low\n// resolution used as a backup / background to fill in empty areas / distance\n\n// DONE: Fix the issue where some tiles just don't load, or at least the texture\n// never shows up tends to happen if you quickly zoom in / out past it while\n// it's still loading, leaving a blank space\n\n// TODO: Optimise the request of many image tiles look at how Leaflet and\n// OpenWebGlobe approach this (eg. batching, queues, etc)\n\n// TODO: Cancel pending tile requests if they get removed from view before they\n// reach a ready state (eg. cancel image requests, etc). Need to ensure that the\n// images are re-requested when the tile is next in scene (even if from cache)\n\n// TODO: Prioritise loading of tiles at highest level in the quadtree (those\n// closest to the camera) so visual inconsistancies during loading are minimised\n\nclass GridLayer extends Layer {\n  constructor() {\n    super();\n\n    this._tileCache = new TileCache(1000);\n\n    // TODO: Work out why changing the minLOD causes loads of issues\n    this._minLOD = 3;\n    this._maxLOD = 18;\n\n    this._frustum = new THREE.Frustum();\n  }\n\n  _onAdd(world) {\n    this._initEvents();\n\n    // Add base layer\n    var geom = new THREE.PlaneBufferGeometry(40000, 40000, 1);\n    var mesh = new THREE.Mesh(geom, GridBaseMaterial('#f5f5f3'));\n    mesh.rotation.x = -90 * Math.PI / 180;\n\n    this._baseLayer = mesh;\n    this._layer.add(mesh);\n\n    // Trigger initial quadtree calculation on the next frame\n    //\n    // TODO: This is a hack to ensure the camera is all set up - a better\n    // solution should be found\n    setTimeout(() => {\n      this._calculateLOD();\n    }, 0);\n  }\n\n  _initEvents() {\n    // Run LOD calculations based on render calls\n    //\n    // Throttled to 1 LOD calculation per 100ms\n    this._world.on('preUpdate', throttle(() => {\n      this._calculateLOD();\n    }, 100));\n\n    this._world.on('move', (latlon, point) => {\n      this._moveBaseLayer(point);\n    });\n  }\n\n  _moveBaseLayer(point) {\n    this._baseLayer.position.x = point.x;\n    this._baseLayer.position.z = point.y;\n  }\n\n  _updateFrustum() {\n    var camera = this._world.getCamera();\n    var projScreenMatrix = new THREE.Matrix4();\n    projScreenMatrix.multiplyMatrices(camera.projectionMatrix, camera.matrixWorldInverse);\n\n    this._frustum.setFromMatrix(camera.projectionMatrix);\n    this._frustum.setFromMatrix(new THREE.Matrix4().multiplyMatrices(camera.projectionMatrix, camera.matrixWorldInverse));\n  }\n\n  _tileInFrustum(tile) {\n    var bounds = tile.getBounds();\n    return this._frustum.intersectsBox(new THREE.Box3(new THREE.Vector3(bounds[0], 0, bounds[3]), new THREE.Vector3(bounds[2], 0, bounds[1])));\n  }\n\n  _calculateLOD() {\n    if (this._stop) {\n      return;\n    }\n\n    // var start = performance.now();\n\n    var camera = this._world.getCamera();\n\n    // 1. Update and retrieve camera frustum\n    this._updateFrustum(this._frustum, camera);\n\n    // 2. Add the four root items of the quadtree to a check list\n    var checkList = this._checklist;\n    checkList = [];\n    checkList.push(this._tileCache.requestTile('0', this));\n    checkList.push(this._tileCache.requestTile('1', this));\n    checkList.push(this._tileCache.requestTile('2', this));\n    checkList.push(this._tileCache.requestTile('3', this));\n\n    // 3. Call Divide, passing in the check list\n    this._divide(checkList);\n\n    // 4. Remove all tiles from layer\n    this._removeTiles();\n\n    // 5. Render the tiles remaining in the check list\n    checkList.forEach((tile, index) => {\n      // Skip tile if it's not in the current view frustum\n      if (!this._tileInFrustum(tile)) {\n        return;\n      }\n\n      // // TODO: Can probably speed this up\n      // var center = tile.getCenter();\n      // var dist = (new THREE.Vector3(center[0], 0, center[1])).sub(camera.position).length();\n\n      // Manual distance limit to cut down on tiles so far away\n      // if (dist > 8000) {\n      //   return;\n      // }\n\n      // Does the tile have a mesh?\n      //\n      // If yes, continue\n      // If no, generate tile mesh, request texture and skip\n      if (!tile.getMesh()) {\n        tile.requestTileAsync();\n        return;\n      }\n\n      // Are the mesh and texture ready?\n      //\n      // If yes, continue\n      // If no, skip\n      if (!tile.isReady()) {\n        return;\n      }\n\n      // Add tile to layer (and to scene)\n      this._layer.add(tile.getMesh());\n    });\n\n    // console.log(performance.now() - start);\n  }\n\n  _divide(checkList) {\n    var count = 0;\n    var currentItem;\n    var quadcode;\n\n    // 1. Loop until count equals check list length\n    while (count != checkList.length) {\n      currentItem = checkList[count];\n      quadcode = currentItem.getQuadcode();\n\n      // 2. Increase count and continue loop if quadcode equals max LOD / zoom\n      if (currentItem.length === this._maxLOD) {\n        count++;\n        continue;\n      }\n\n      // 3. Else, calculate screen-space error metric for quadcode\n      if (this._screenSpaceError(currentItem)) {\n        // 4. If error is sufficient...\n\n        // 4a. Remove parent item from the check list\n        checkList.splice(count, 1);\n\n        // 4b. Add 4 child items to the check list\n        checkList.push(this._tileCache.requestTile(quadcode + '0', this));\n        checkList.push(this._tileCache.requestTile(quadcode + '1', this));\n        checkList.push(this._tileCache.requestTile(quadcode + '2', this));\n        checkList.push(this._tileCache.requestTile(quadcode + '3', this));\n\n        // 4d. Continue the loop without increasing count\n        continue;\n      } else {\n        // 5. Else, increase count and continue loop\n        count++;\n      }\n    }\n  }\n\n  _screenSpaceError(tile) {\n    var minDepth = this._minLOD;\n    var maxDepth = this._maxLOD;\n\n    var quadcode = tile.getQuadcode();\n\n    var camera = this._world.getCamera();\n\n    // Tweak this value to refine specific point that each quad is subdivided\n    //\n    // It's used to multiple the dimensions of the tile sides before\n    // comparing against the tile distance from camera\n    var quality = 3.0;\n\n    // 1. Return false if quadcode length is greater than maxDepth\n    if (quadcode.length > maxDepth) {\n      return false;\n    }\n\n    // 2. Return true if quadcode length is less than minDepth\n    if (quadcode.length < minDepth) {\n      return true;\n    }\n\n    // 3. Return false if quadcode bounds are not in view frustum\n    if (!this._tileInFrustum(tile)) {\n      return false;\n    }\n\n    var center = tile.getCenter();\n\n    // 4. Calculate screen-space error metric\n    // TODO: Use closest distance to one of the 4 tile corners\n    var dist = (new THREE.Vector3(center[0], 0, center[1])).sub(camera.position).length();\n\n    var error = quality * tile.getSide() / dist;\n\n    // 5. Return true if error is greater than 1.0, else return false\n    return (error > 1.0);\n  }\n\n  _removeTiles() {\n    // i >= 1 (instead of 0) to skip the grid base layer\n    for (var i = this._layer.children.length - 1; i >= 1; i--) {\n      this._layer.remove(this._layer.children[i]);\n    }\n  }\n}\n\n// Initialise without requiring new keyword\nexport default function() {\n  return new GridLayer();\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/layer/tile/GridLayer.js\n **/","import LRUCache from 'lru-cache';\nimport Tile from './Tile';\n\n// This process is based on a similar approach taken by OpenWebGlobe\n// See: https://github.com/OpenWebGlobe/WebViewer/blob/master/source/core/globecache.js\n\nclass TileCache {\n  constructor(cacheLimit) {\n    this._cache = LRUCache(cacheLimit);\n  }\n\n  // Returns true if all specified tile providers are ready to be used\n  // Otherwise, returns false\n  isReady() {\n    return false;\n  }\n\n  // Get a cached tile or request a new one if not in cache\n  requestTile(quadcode, layer) {\n    var tile = this._cache.get(quadcode);\n\n    if (!tile) {\n      // Set up a brand new tile\n      tile = new Tile(quadcode, layer);\n\n      // Request data for various tile providers\n      // tile.requestData(imageProviders);\n\n      // Add tile to cache, though it won't be ready yet as the data is being\n      // requested from various places asynchronously\n      this._cache.set(quadcode, tile);\n    }\n\n    return tile;\n  }\n\n  // Get a cached tile without requesting a new one\n  getTile(quadcode) {\n    return this._cache.get(quadcode);\n  }\n\n  // Destroy the cache and remove it from memory\n  //\n  // TODO: Call destroy method on items in cache\n  destroy() {\n    this._cache.reset();\n  }\n}\n\nexport default TileCache;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/layer/tile/TileCache.js\n **/","module.exports = LRUCache\n\n// This will be a proper iterable 'Map' in engines that support it,\n// or a fakey-fake PseudoMap in older versions.\nvar Map = require('pseudomap')\nvar util = require('util')\n\n// A linked list to keep track of recently-used-ness\nvar Yallist = require('yallist')\n\n// use symbols if possible, otherwise just _props\nvar symbols = {}\nvar hasSymbol = typeof Symbol === 'function'\nvar makeSymbol\nif (hasSymbol) {\n  makeSymbol = function (key) {\n    return Symbol.for(key)\n  }\n} else {\n  makeSymbol = function (key) {\n    return '_' + key\n  }\n}\n\nfunction priv (obj, key, val) {\n  var sym\n  if (symbols[key]) {\n    sym = symbols[key]\n  } else {\n    sym = makeSymbol(key)\n    symbols[key] = sym\n  }\n  if (arguments.length === 2) {\n    return obj[sym]\n  } else {\n    obj[sym] = val\n    return val\n  }\n}\n\nfunction naiveLength () { return 1 }\n\n// lruList is a yallist where the head is the youngest\n// item, and the tail is the oldest.  the list contains the Hit\n// objects as the entries.\n// Each Hit object has a reference to its Yallist.Node.  This\n// never changes.\n//\n// cache is a Map (or PseudoMap) that matches the keys to\n// the Yallist.Node object.\nfunction LRUCache (options) {\n  if (!(this instanceof LRUCache)) {\n    return new LRUCache(options)\n  }\n\n  if (typeof options === 'number') {\n    options = { max: options }\n  }\n\n  if (!options) {\n    options = {}\n  }\n\n  var max = priv(this, 'max', options.max)\n  // Kind of weird to have a default max of Infinity, but oh well.\n  if (!max ||\n      !(typeof max === 'number') ||\n      max <= 0) {\n    priv(this, 'max', Infinity)\n  }\n\n  var lc = options.length || naiveLength\n  if (typeof lc !== 'function') {\n    lc = naiveLength\n  }\n  priv(this, 'lengthCalculator', lc)\n\n  priv(this, 'allowStale', options.stale || false)\n  priv(this, 'maxAge', options.maxAge || 0)\n  priv(this, 'dispose', options.dispose)\n  this.reset()\n}\n\n// resize the cache when the max changes.\nObject.defineProperty(LRUCache.prototype, 'max', {\n  set: function (mL) {\n    if (!mL || !(typeof mL === 'number') || mL <= 0) {\n      mL = Infinity\n    }\n    priv(this, 'max', mL)\n    trim(this)\n  },\n  get: function () {\n    return priv(this, 'max')\n  },\n  enumerable: true\n})\n\nObject.defineProperty(LRUCache.prototype, 'allowStale', {\n  set: function (allowStale) {\n    priv(this, 'allowStale', !!allowStale)\n  },\n  get: function () {\n    return priv(this, 'allowStale')\n  },\n  enumerable: true\n})\n\nObject.defineProperty(LRUCache.prototype, 'maxAge', {\n  set: function (mA) {\n    if (!mA || !(typeof mA === 'number') || mA < 0) {\n      mA = 0\n    }\n    priv(this, 'maxAge', mA)\n    trim(this)\n  },\n  get: function () {\n    return priv(this, 'maxAge')\n  },\n  enumerable: true\n})\n\n// resize the cache when the lengthCalculator changes.\nObject.defineProperty(LRUCache.prototype, 'lengthCalculator', {\n  set: function (lC) {\n    if (typeof lC !== 'function') {\n      lC = naiveLength\n    }\n    if (lC !== priv(this, 'lengthCalculator')) {\n      priv(this, 'lengthCalculator', lC)\n      priv(this, 'length', 0)\n      priv(this, 'lruList').forEach(function (hit) {\n        hit.length = priv(this, 'lengthCalculator').call(this, hit.value, hit.key)\n        priv(this, 'length', priv(this, 'length') + hit.length)\n      }, this)\n    }\n    trim(this)\n  },\n  get: function () { return priv(this, 'lengthCalculator') },\n  enumerable: true\n})\n\nObject.defineProperty(LRUCache.prototype, 'length', {\n  get: function () { return priv(this, 'length') },\n  enumerable: true\n})\n\nObject.defineProperty(LRUCache.prototype, 'itemCount', {\n  get: function () { return priv(this, 'lruList').length },\n  enumerable: true\n})\n\nLRUCache.prototype.rforEach = function (fn, thisp) {\n  thisp = thisp || this\n  for (var walker = priv(this, 'lruList').tail; walker !== null;) {\n    var prev = walker.prev\n    forEachStep(this, fn, walker, thisp)\n    walker = prev\n  }\n}\n\nfunction forEachStep (self, fn, node, thisp) {\n  var hit = node.value\n  if (isStale(self, hit)) {\n    del(self, node)\n    if (!priv(self, 'allowStale')) {\n      hit = undefined\n    }\n  }\n  if (hit) {\n    fn.call(thisp, hit.value, hit.key, self)\n  }\n}\n\nLRUCache.prototype.forEach = function (fn, thisp) {\n  thisp = thisp || this\n  for (var walker = priv(this, 'lruList').head; walker !== null;) {\n    var next = walker.next\n    forEachStep(this, fn, walker, thisp)\n    walker = next\n  }\n}\n\nLRUCache.prototype.keys = function () {\n  return priv(this, 'lruList').toArray().map(function (k) {\n    return k.key\n  }, this)\n}\n\nLRUCache.prototype.values = function () {\n  return priv(this, 'lruList').toArray().map(function (k) {\n    return k.value\n  }, this)\n}\n\nLRUCache.prototype.reset = function () {\n  if (priv(this, 'dispose') &&\n      priv(this, 'lruList') &&\n      priv(this, 'lruList').length) {\n    priv(this, 'lruList').forEach(function (hit) {\n      priv(this, 'dispose').call(this, hit.key, hit.value)\n    }, this)\n  }\n\n  priv(this, 'cache', new Map()) // hash of items by key\n  priv(this, 'lruList', new Yallist()) // list of items in order of use recency\n  priv(this, 'length', 0) // length of items in the list\n}\n\nLRUCache.prototype.dump = function () {\n  return priv(this, 'lruList').map(function (hit) {\n    if (!isStale(this, hit)) {\n      return {\n        k: hit.key,\n        v: hit.value,\n        e: hit.now + (hit.maxAge || 0)\n      }\n    }\n  }, this).toArray().filter(function (h) {\n    return h\n  })\n}\n\nLRUCache.prototype.dumpLru = function () {\n  return priv(this, 'lruList')\n}\n\nLRUCache.prototype.inspect = function (n, opts) {\n  var str = 'LRUCache {'\n  var extras = false\n\n  var as = priv(this, 'allowStale')\n  if (as) {\n    str += '\\n  allowStale: true'\n    extras = true\n  }\n\n  var max = priv(this, 'max')\n  if (max && max !== Infinity) {\n    if (extras) {\n      str += ','\n    }\n    str += '\\n  max: ' + util.inspect(max, opts)\n    extras = true\n  }\n\n  var maxAge = priv(this, 'maxAge')\n  if (maxAge) {\n    if (extras) {\n      str += ','\n    }\n    str += '\\n  maxAge: ' + util.inspect(maxAge, opts)\n    extras = true\n  }\n\n  var lc = priv(this, 'lengthCalculator')\n  if (lc && lc !== naiveLength) {\n    if (extras) {\n      str += ','\n    }\n    str += '\\n  length: ' + util.inspect(priv(this, 'length'), opts)\n    extras = true\n  }\n\n  var didFirst = false\n  priv(this, 'lruList').forEach(function (item) {\n    if (didFirst) {\n      str += ',\\n  '\n    } else {\n      if (extras) {\n        str += ',\\n'\n      }\n      didFirst = true\n      str += '\\n  '\n    }\n    var key = util.inspect(item.key).split('\\n').join('\\n  ')\n    var val = { value: item.value }\n    if (item.maxAge !== maxAge) {\n      val.maxAge = item.maxAge\n    }\n    if (lc !== naiveLength) {\n      val.length = item.length\n    }\n    if (isStale(this, item)) {\n      val.stale = true\n    }\n\n    val = util.inspect(val, opts).split('\\n').join('\\n  ')\n    str += key + ' => ' + val\n  })\n\n  if (didFirst || extras) {\n    str += '\\n'\n  }\n  str += '}'\n\n  return str\n}\n\nLRUCache.prototype.set = function (key, value, maxAge) {\n  maxAge = maxAge || priv(this, 'maxAge')\n\n  var now = maxAge ? Date.now() : 0\n  var len = priv(this, 'lengthCalculator').call(this, value, key)\n\n  if (priv(this, 'cache').has(key)) {\n    if (len > priv(this, 'max')) {\n      del(this, priv(this, 'cache').get(key))\n      return false\n    }\n\n    var node = priv(this, 'cache').get(key)\n    var item = node.value\n\n    // dispose of the old one before overwriting\n    if (priv(this, 'dispose')) {\n      priv(this, 'dispose').call(this, key, item.value)\n    }\n\n    item.now = now\n    item.maxAge = maxAge\n    item.value = value\n    priv(this, 'length', priv(this, 'length') + (len - item.length))\n    item.length = len\n    this.get(key)\n    trim(this)\n    return true\n  }\n\n  var hit = new Entry(key, value, len, now, maxAge)\n\n  // oversized objects fall out of cache automatically.\n  if (hit.length > priv(this, 'max')) {\n    if (priv(this, 'dispose')) {\n      priv(this, 'dispose').call(this, key, value)\n    }\n    return false\n  }\n\n  priv(this, 'length', priv(this, 'length') + hit.length)\n  priv(this, 'lruList').unshift(hit)\n  priv(this, 'cache').set(key, priv(this, 'lruList').head)\n  trim(this)\n  return true\n}\n\nLRUCache.prototype.has = function (key) {\n  if (!priv(this, 'cache').has(key)) return false\n  var hit = priv(this, 'cache').get(key).value\n  if (isStale(this, hit)) {\n    return false\n  }\n  return true\n}\n\nLRUCache.prototype.get = function (key) {\n  return get(this, key, true)\n}\n\nLRUCache.prototype.peek = function (key) {\n  return get(this, key, false)\n}\n\nLRUCache.prototype.pop = function () {\n  var node = priv(this, 'lruList').tail\n  if (!node) return null\n  del(this, node)\n  return node.value\n}\n\nLRUCache.prototype.del = function (key) {\n  del(this, priv(this, 'cache').get(key))\n}\n\nLRUCache.prototype.load = function (arr) {\n  // reset the cache\n  this.reset()\n\n  var now = Date.now()\n  // A previous serialized cache has the most recent items first\n  for (var l = arr.length - 1; l >= 0; l--) {\n    var hit = arr[l]\n    var expiresAt = hit.e || 0\n    if (expiresAt === 0) {\n      // the item was created without expiration in a non aged cache\n      this.set(hit.k, hit.v)\n    } else {\n      var maxAge = expiresAt - now\n      // dont add already expired items\n      if (maxAge > 0) {\n        this.set(hit.k, hit.v, maxAge)\n      }\n    }\n  }\n}\n\nLRUCache.prototype.prune = function () {\n  var self = this\n  priv(this, 'cache').forEach(function (value, key) {\n    get(self, key, false)\n  })\n}\n\nfunction get (self, key, doUse) {\n  var node = priv(self, 'cache').get(key)\n  if (node) {\n    var hit = node.value\n    if (isStale(self, hit)) {\n      del(self, node)\n      if (!priv(self, 'allowStale')) hit = undefined\n    } else {\n      if (doUse) {\n        priv(self, 'lruList').unshiftNode(node)\n      }\n    }\n    if (hit) hit = hit.value\n  }\n  return hit\n}\n\nfunction isStale (self, hit) {\n  if (!hit || (!hit.maxAge && !priv(self, 'maxAge'))) {\n    return false\n  }\n  var stale = false\n  var diff = Date.now() - hit.now\n  if (hit.maxAge) {\n    stale = diff > hit.maxAge\n  } else {\n    stale = priv(self, 'maxAge') && (diff > priv(self, 'maxAge'))\n  }\n  return stale\n}\n\nfunction trim (self) {\n  if (priv(self, 'length') > priv(self, 'max')) {\n    for (var walker = priv(self, 'lruList').tail;\n         priv(self, 'length') > priv(self, 'max') && walker !== null;) {\n      // We know that we're about to delete this one, and also\n      // what the next least recently used key will be, so just\n      // go ahead and set it now.\n      var prev = walker.prev\n      del(self, walker)\n      walker = prev\n    }\n  }\n}\n\nfunction del (self, node) {\n  if (node) {\n    var hit = node.value\n    if (priv(self, 'dispose')) {\n      priv(self, 'dispose').call(this, hit.key, hit.value)\n    }\n    priv(self, 'length', priv(self, 'length') - hit.length)\n    priv(self, 'cache').delete(hit.key)\n    priv(self, 'lruList').removeNode(node)\n  }\n}\n\n// classy, since V8 prefers predictable objects.\nfunction Entry (key, value, length, now, maxAge) {\n  this.key = key\n  this.value = value\n  this.length = length\n  this.now = now\n  this.maxAge = maxAge || 0\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lru-cache/lib/lru-cache.js\n ** module id = 35\n ** module chunks = 0\n **/","if (process.env.npm_package_name === 'pseudomap' &&\n    process.env.npm_lifecycle_script === 'test')\n  process.env.TEST_PSEUDOMAP = 'true'\n\nif (typeof Map === 'function' && !process.env.TEST_PSEUDOMAP) {\n  module.exports = Map\n} else {\n  module.exports = require('./pseudomap')\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/pseudomap/map.js\n ** module id = 36\n ** module chunks = 0\n **/","// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = setTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    clearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/process/browser.js\n ** module id = 37\n ** module chunks = 0\n **/","var hasOwnProperty = Object.prototype.hasOwnProperty\n\nmodule.exports = PseudoMap\n\nfunction PseudoMap (set) {\n  if (!(this instanceof PseudoMap)) // whyyyyyyy\n    throw new TypeError(\"Constructor PseudoMap requires 'new'\")\n\n  this.clear()\n\n  if (set) {\n    if ((set instanceof PseudoMap) ||\n        (typeof Map === 'function' && set instanceof Map))\n      set.forEach(function (value, key) {\n        this.set(key, value)\n      }, this)\n    else if (Array.isArray(set))\n      set.forEach(function (kv) {\n        this.set(kv[0], kv[1])\n      }, this)\n    else\n      throw new TypeError('invalid argument')\n  }\n}\n\nPseudoMap.prototype.forEach = function (fn, thisp) {\n  thisp = thisp || this\n  Object.keys(this._data).forEach(function (k) {\n    if (k !== 'size')\n      fn.call(thisp, this._data[k].value, this._data[k].key)\n  }, this)\n}\n\nPseudoMap.prototype.has = function (k) {\n  return !!find(this._data, k)\n}\n\nPseudoMap.prototype.get = function (k) {\n  var res = find(this._data, k)\n  return res && res.value\n}\n\nPseudoMap.prototype.set = function (k, v) {\n  set(this._data, k, v)\n}\n\nPseudoMap.prototype.delete = function (k) {\n  var res = find(this._data, k)\n  if (res) {\n    delete this._data[res._index]\n    this._data.size--\n  }\n}\n\nPseudoMap.prototype.clear = function () {\n  var data = Object.create(null)\n  data.size = 0\n\n  Object.defineProperty(this, '_data', {\n    value: data,\n    enumerable: false,\n    configurable: true,\n    writable: false\n  })\n}\n\nObject.defineProperty(PseudoMap.prototype, 'size', {\n  get: function () {\n    return this._data.size\n  },\n  set: function (n) {},\n  enumerable: true,\n  configurable: true\n})\n\nPseudoMap.prototype.values =\nPseudoMap.prototype.keys =\nPseudoMap.prototype.entries = function () {\n  throw new Error('iterators are not implemented in this version')\n}\n\n// Either identical, or both NaN\nfunction same (a, b) {\n  return a === b || a !== a && b !== b\n}\n\nfunction Entry (k, v, i) {\n  this.key = k\n  this.value = v\n  this._index = i\n}\n\nfunction find (data, k) {\n  for (var i = 0, s = '_' + k, key = s;\n       hasOwnProperty.call(data, key);\n       key = s + i++) {\n    if (same(data[key].key, k))\n      return data[key]\n  }\n}\n\nfunction set (data, k, v) {\n  for (var i = 0, s = '_' + k, key = s;\n       hasOwnProperty.call(data, key);\n       key = s + i++) {\n    if (same(data[key].key, k)) {\n      data[key].value = v\n      return\n    }\n  }\n  data.size++\n  data[key] = new Entry(k, v, key)\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/pseudomap/pseudomap.js\n ** module id = 38\n ** module chunks = 0\n **/","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  // Allow for deprecating things in the process of starting up.\n  if (isUndefined(global.process)) {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  if (process.noDeprecation === true) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/util/util.js\n ** module id = 39\n ** module chunks = 0\n **/","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/util/support/isBufferBrowser.js\n ** module id = 40\n ** module chunks = 0\n **/","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/inherits/inherits_browser.js\n ** module id = 41\n ** module chunks = 0\n **/","module.exports = Yallist\n\nYallist.Node = Node\nYallist.create = Yallist\n\nfunction Yallist (list) {\n  var self = this\n  if (!(self instanceof Yallist)) {\n    self = new Yallist()\n  }\n\n  self.tail = null\n  self.head = null\n  self.length = 0\n\n  if (list && typeof list.forEach === 'function') {\n    list.forEach(function (item) {\n      self.push(item)\n    })\n  } else if (arguments.length > 0) {\n    for (var i = 0, l = arguments.length; i < l; i++) {\n      self.push(arguments[i])\n    }\n  }\n\n  return self\n}\n\nYallist.prototype.removeNode = function (node) {\n  if (node.list !== this) {\n    throw new Error('removing node which does not belong to this list')\n  }\n\n  var next = node.next\n  var prev = node.prev\n\n  if (next) {\n    next.prev = prev\n  }\n\n  if (prev) {\n    prev.next = next\n  }\n\n  if (node === this.head) {\n    this.head = next\n  }\n  if (node === this.tail) {\n    this.tail = prev\n  }\n\n  node.list.length --\n  node.next = null\n  node.prev = null\n  node.list = null\n}\n\nYallist.prototype.unshiftNode = function (node) {\n  if (node === this.head) {\n    return\n  }\n\n  if (node.list) {\n    node.list.removeNode(node)\n  }\n\n  var head = this.head\n  node.list = this\n  node.next = head\n  if (head) {\n    head.prev = node\n  }\n\n  this.head = node\n  if (!this.tail) {\n    this.tail = node\n  }\n  this.length ++\n}\n\nYallist.prototype.pushNode = function (node) {\n  if (node === this.tail) {\n    return\n  }\n\n  if (node.list) {\n    node.list.removeNode(node)\n  }\n\n  var tail = this.tail\n  node.list = this\n  node.prev = tail\n  if (tail) {\n    tail.next = node\n  }\n\n  this.tail = node\n  if (!this.head) {\n    this.head = node\n  }\n  this.length ++\n}\n\nYallist.prototype.push = function () {\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    push(this, arguments[i])\n  }\n  return this.length\n}\n\nYallist.prototype.unshift = function () {\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    unshift(this, arguments[i])\n  }\n  return this.length\n}\n\nYallist.prototype.pop = function () {\n  if (!this.tail)\n    return undefined\n\n  var res = this.tail.value\n  this.tail = this.tail.prev\n  this.tail.next = null\n  this.length --\n  return res\n}\n\nYallist.prototype.shift = function () {\n  if (!this.head)\n    return undefined\n\n  var res = this.head.value\n  this.head = this.head.next\n  this.head.prev = null\n  this.length --\n  return res\n}\n\nYallist.prototype.forEach = function (fn, thisp) {\n  thisp = thisp || this\n  for (var walker = this.head, i = 0; walker !== null; i++) {\n    fn.call(thisp, walker.value, i, this)\n    walker = walker.next\n  }\n}\n\nYallist.prototype.forEachReverse = function (fn, thisp) {\n  thisp = thisp || this\n  for (var walker = this.tail, i = this.length - 1; walker !== null; i--) {\n    fn.call(thisp, walker.value, i, this)\n    walker = walker.prev\n  }\n}\n\nYallist.prototype.get = function (n) {\n  for (var i = 0, walker = this.head; walker !== null && i < n; i++) {\n    // abort out of the list early if we hit a cycle\n    walker = walker.next\n  }\n  if (i === n && walker !== null) {\n    return walker.value\n  }\n}\n\nYallist.prototype.getReverse = function (n) {\n  for (var i = 0, walker = this.tail; walker !== null && i < n; i++) {\n    // abort out of the list early if we hit a cycle\n    walker = walker.prev\n  }\n  if (i === n && walker !== null) {\n    return walker.value\n  }\n}\n\nYallist.prototype.map = function (fn, thisp) {\n  thisp = thisp || this\n  var res = new Yallist()\n  for (var walker = this.head; walker !== null; ) {\n    res.push(fn.call(thisp, walker.value, this))\n    walker = walker.next\n  }\n  return res\n}\n\nYallist.prototype.mapReverse = function (fn, thisp) {\n  thisp = thisp || this\n  var res = new Yallist()\n  for (var walker = this.tail; walker !== null;) {\n    res.push(fn.call(thisp, walker.value, this))\n    walker = walker.prev\n  }\n  return res\n}\n\nYallist.prototype.reduce = function (fn, initial) {\n  var acc\n  var walker = this.head\n  if (arguments.length > 1) {\n    acc = initial\n  } else if (this.head) {\n    walker = this.head.next\n    acc = this.head.value\n  } else {\n    throw new TypeError('Reduce of empty list with no initial value')\n  }\n\n  for (var i = 0; walker !== null; i++) {\n    acc = fn(acc, walker.value, i)\n    walker = walker.next\n  }\n\n  return acc\n}\n\nYallist.prototype.reduceReverse = function (fn, initial) {\n  var acc\n  var walker = this.tail\n  if (arguments.length > 1) {\n    acc = initial\n  } else if (this.tail) {\n    walker = this.tail.prev\n    acc = this.tail.value\n  } else {\n    throw new TypeError('Reduce of empty list with no initial value')\n  }\n\n  for (var i = this.length - 1; walker !== null; i--) {\n    acc = fn(acc, walker.value, i)\n    walker = walker.prev\n  }\n\n  return acc\n}\n\nYallist.prototype.toArray = function () {\n  var arr = new Array(this.length)\n  for (var i = 0, walker = this.head; walker !== null; i++) {\n    arr[i] = walker.value\n    walker = walker.next\n  }\n  return arr\n}\n\nYallist.prototype.toArrayReverse = function () {\n  var arr = new Array(this.length)\n  for (var i = 0, walker = this.tail; walker !== null; i++) {\n    arr[i] = walker.value\n    walker = walker.prev\n  }\n  return arr\n}\n\nYallist.prototype.slice = function (from, to) {\n  to = to || this.length\n  if (to < 0) {\n    to += this.length\n  }\n  from = from || 0\n  if (from < 0) {\n    from += this.length\n  }\n  var ret = new Yallist()\n  if (to < from || to < 0) {\n    return ret\n  }\n  if (from < 0) {\n    from = 0\n  }\n  if (to > this.length) {\n    to = this.length\n  }\n  for (var i = 0, walker = this.head; walker !== null && i < from; i++) {\n    walker = walker.next\n  }\n  for (; walker !== null && i < to; i++, walker = walker.next) {\n    ret.push(walker.value)\n  }\n  return ret\n}\n\nYallist.prototype.sliceReverse = function (from, to) {\n  to = to || this.length\n  if (to < 0) {\n    to += this.length\n  }\n  from = from || 0\n  if (from < 0) {\n    from += this.length\n  }\n  var ret = new Yallist()\n  if (to < from || to < 0) {\n    return ret\n  }\n  if (from < 0) {\n    from = 0\n  }\n  if (to > this.length) {\n    to = this.length\n  }\n  for (var i = this.length, walker = this.tail; walker !== null && i > to; i--) {\n    walker = walker.prev\n  }\n  for (; walker !== null && i > from; i--, walker = walker.prev) {\n    ret.push(walker.value)\n  }\n  return ret\n}\n\nYallist.prototype.reverse = function () {\n  var head = this.head\n  var tail = this.tail\n  for (var walker = head; walker !== null; walker = walker.prev) {\n    var p = walker.prev\n    walker.prev = walker.next\n    walker.next = p\n  }\n  this.head = tail\n  this.tail = head\n  return this\n}\n\nfunction push (self, item) {\n  self.tail = new Node(item, self.tail, null, self)\n  if (!self.head) {\n    self.head = self.tail\n  }\n  self.length ++\n}\n\nfunction unshift (self, item) {\n  self.head = new Node(item, null, self.head, self)\n  if (!self.tail) {\n    self.tail = self.head\n  }\n  self.length ++\n}\n\nfunction Node (value, prev, next, list) {\n  if (!(this instanceof Node)) {\n    return new Node(value, prev, next, list)\n  }\n\n  this.list = list\n  this.value = value\n\n  if (prev) {\n    prev.next = this\n    this.prev = prev\n  } else {\n    this.prev = null\n  }\n\n  if (next) {\n    next.prev = this\n    this.next = next\n  } else {\n    this.next = null\n  }\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/yallist/yallist.js\n ** module id = 42\n ** module chunks = 0\n **/","import LatLon from '../../geo/LatLon';\nimport BoxHelper from '../../vendor/BoxHelper';\nimport THREE from 'three';\n\n// Manages a single tile and its layers\n\nvar r2d = 180 / Math.PI;\n\nclass Tile {\n  constructor(quadcode, layer) {\n    this._layer = layer;\n    this._quadcode = quadcode;\n\n    this._ready = false;\n\n    this._tile = this._quadcodeToTile(quadcode);\n\n    // Bottom-left and top-right bounds in WGS84 coordinates\n    this._boundsLatLon = this._tileBoundsWGS84(this._tile);\n\n    // Bottom-left and top-right bounds in world coordinates\n    this._boundsWorld = this._tileBoundsFromWGS84(this._boundsLatLon);\n\n    // Tile center in world coordinates\n    this._center = this._boundsToCenter(this._boundsWorld);\n\n    // Length of a tile side in world coorindates\n    this._side = this._getSide(this._boundsWorld);\n  }\n\n  // Returns true if the tile mesh and texture are ready to be used\n  // Otherwise, returns false\n  isReady() {\n    return this._ready;\n  }\n\n  // Request data for the various tile providers\n  //\n  // Providers are provided here and not on instantiation of the class so that\n  // providers can be easily changed in subsequent requests without heavy\n  // management\n  //\n  // If requestData is called more than once then the provider data will be\n  // re-downloaded and the mesh output will be changed\n  //\n  // Being able to update tile data and output like this on-the-fly makes it\n  // appealing for situations where tile data may be dynamic / realtime\n  // (eg. realtime traffic tiles)\n  //\n  // May need to be intelligent about what exactly is updated each time\n  // requestData is called as it doesn't make sense to re-request and\n  // re-generate a mesh each time when only the image provider needs updating,\n  // and likewise it doesn't make sense to update the imagery when only terrain\n  // provider changes\n  requestTileAsync(imageProviders) {\n    // Making this asynchronous really speeds up the LOD framerate\n    setTimeout(() => {\n      if (!this._mesh) {\n        this._mesh = this._createMesh();\n        this._requestTextureAsync();\n      }\n    }, 0);\n  }\n\n  getQuadcode() {\n    return this._quadcode;\n  }\n\n  getBounds() {\n    return this._boundsWorld;\n  }\n\n  getCenter() {\n    return this._center;\n  }\n\n  getSide() {\n    return this._side;\n  }\n\n  getMesh() {\n    return this._mesh;\n  }\n\n  // Destroys the tile and removes it from the layer and memory\n  //\n  // Ensure that this leaves no trace of the tile no textures, no meshes,\n  // nothing in memory or the GPU\n  destroy() {}\n\n  _createMesh() {\n    var mesh = new THREE.Object3D();\n    var geom = new THREE.PlaneBufferGeometry(this._side, this._side, 1);\n\n    var material = new THREE.MeshBasicMaterial({\n      depthWrite: false\n    });\n\n    var localMesh = new THREE.Mesh(geom, material);\n    localMesh.rotation.x = -90 * Math.PI / 180;\n\n    mesh.add(localMesh);\n\n    mesh.position.x = this._center[0];\n    mesh.position.z = this._center[1];\n\n    var box = new BoxHelper(localMesh);\n    mesh.add(box);\n\n    mesh.add(this._createDebugMesh());\n\n    return mesh;\n  }\n\n  _createDebugMesh() {\n    var canvas = document.createElement('canvas');\n    canvas.width = 256;\n    canvas.height = 256;\n\n    var context = canvas.getContext('2d');\n    context.font = 'Bold 20px Helvetica Neue, Verdana, Arial';\n    context.fillStyle = '#ff0000';\n    context.fillText(this._quadcode, 20, canvas.width / 2 - 5);\n    context.fillText(this._tile.toString(), 20, canvas.width / 2 + 25);\n\n    var texture = new THREE.Texture(canvas);\n\n    // Silky smooth images when tilted\n    texture.magFilter = THREE.LinearFilter;\n    texture.minFilter = THREE.LinearMipMapLinearFilter;\n\n    // TODO: Set this to renderer.getMaxAnisotropy() / 4\n    texture.anisotropy = 4;\n\n    texture.needsUpdate = true;\n\n    var material = new THREE.MeshBasicMaterial({\n      map: texture,\n      transparent: true,\n      depthWrite: false\n    });\n\n    var geom = new THREE.PlaneBufferGeometry(this._side, this._side, 1);\n    var mesh = new THREE.Mesh(geom, material);\n\n    mesh.rotation.x = -90 * Math.PI / 180;\n    mesh.position.y = 0.1;\n\n    return mesh;\n  }\n\n  _requestTextureAsync() {\n    // Pick a letter between a-c\n    var letter = String.fromCharCode(97 + Math.floor(Math.random() * 26));\n\n    // These tiles can be nearly 20 times larger in filesize than OSM tiles!\n    var url = 'http://' + letter + '.basemaps.cartocdn.com/light_nolabels/';\n    // var url = 'http://' + letter + '.tile.osm.org/';\n    // http://a.tiles.wmflabs.org/osm-no-labels/12/2200/1341.png\n\n    var image = document.createElement('img');\n\n    image.addEventListener('load', event => {\n      var texture = new THREE.Texture();\n\n      texture.image = image;\n      texture.needsUpdate = true;\n\n      // Silky smooth images when tilted\n      texture.magFilter = THREE.LinearFilter;\n      texture.minFilter = THREE.LinearMipMapLinearFilter;\n\n      // TODO: Set this to renderer.getMaxAnisotropy() / 4\n      texture.anisotropy = 4;\n\n      texture.needsUpdate = true;\n\n      this._mesh.children[0].material.map = texture;\n      this._mesh.children[0].material.needsUpdate = true;\n\n      this._texture = texture;\n      this._ready = true;\n    }, false);\n\n    // image.addEventListener('progress', event => {\n    //\n    // }, false);\n\n    image.addEventListener('error', event => {\n      console.error(event);\n    }, false);\n\n    image.crossOrigin = '';\n\n    // Load image\n    image.src = url + this._tile[2] + '/' + this._tile[0] + '/' + this._tile[1] + '.png';\n  }\n\n  // Convert from quadcode to TMS tile coordinates\n  _quadcodeToTile(quadcode) {\n    var x = 0;\n    var y = 0;\n    var z = quadcode.length;\n\n    for (var i = z; i > 0; i--) {\n      var mask = 1 << (i - 1);\n      var q = +quadcode[z - i];\n      if (q === 1) {\n        x |= mask;\n      }\n      if (q === 2) {\n        y |= mask;\n      }\n      if (q === 3) {\n        x |= mask;\n        y |= mask;\n      }\n    }\n\n    return [x, y, z];\n  }\n\n  // Convert WGS84 tile bounds to world coordinates\n  _tileBoundsFromWGS84(boundsWGS84) {\n    var sw = this._layer._world.latLonToPoint(LatLon(boundsWGS84[1], boundsWGS84[0]));\n    var ne = this._layer._world.latLonToPoint(LatLon(boundsWGS84[3], boundsWGS84[2]));\n\n    return [sw.x, sw.y, ne.x, ne.y];\n  }\n\n  // Get tile bounds in WGS84 coordinates\n  _tileBoundsWGS84(tile) {\n    var e = this._tile2lon(tile[0] + 1, tile[2]);\n    var w = this._tile2lon(tile[0], tile[2]);\n    var s = this._tile2lat(tile[1] + 1, tile[2]);\n    var n = this._tile2lat(tile[1], tile[2]);\n    return [w, s, e, n];\n  }\n\n  _tile2lon(x, z) {\n    return x / Math.pow(2, z) * 360 - 180;\n  }\n\n  _tile2lat(y, z) {\n    var n = Math.PI - 2 * Math.PI * y / Math.pow(2, z);\n    return r2d * Math.atan(0.5 * (Math.exp(n) - Math.exp(-n)));\n  }\n\n  _boundsToCenter(bounds) {\n    var x = bounds[0] + (bounds[2] - bounds[0]) / 2;\n    var y = bounds[1] + (bounds[3] - bounds[1]) / 2;\n\n    return [x, y];\n  }\n\n  _getSide(bounds) {\n    return (new THREE.Vector3(bounds[0], 0, bounds[3])).sub(new THREE.Vector3(bounds[0], 0, bounds[1])).length();\n  }\n}\n\nexport default Tile;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/layer/tile/Tile.js\n **/","// jscs:disable\n/*eslint eqeqeq:0*/\nimport THREE from 'three';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nBoxHelper = function ( object ) {\n\n\tvar indices = new Uint16Array( [ 0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7 ] );\n\tvar positions = new Float32Array( 8 * 3 );\n\n\tvar geometry = new THREE.BufferGeometry();\n\tgeometry.setIndex( new THREE.BufferAttribute( indices, 1 ) );\n\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );\n\n\tTHREE.LineSegments.call( this, geometry, new THREE.LineBasicMaterial( { linewidth: 2, color: 0xff0000 } ) );\n\n\tif ( object !== undefined ) {\n\n\t\tthis.update( object );\n\n\t}\n\n};\n\nBoxHelper.prototype = Object.create( THREE.LineSegments.prototype );\nBoxHelper.prototype.constructor = BoxHelper;\n\nBoxHelper.prototype.update = ( function () {\n\n\tvar box = new THREE.Box3();\n\n\treturn function ( object ) {\n\n\t\tbox.setFromObject( object );\n\n\t\tif ( box.isEmpty() ) return;\n\n\t\tvar min = box.min;\n\t\tvar max = box.max;\n\n\t\t/*\n\t\t  5____4\n\t\t1/___0/|\n\t\t| 6__|_7\n\t\t2/___3/\n\n\t\t0: max.x, max.y, max.z\n\t\t1: min.x, max.y, max.z\n\t\t2: min.x, min.y, max.z\n\t\t3: max.x, min.y, max.z\n\t\t4: max.x, max.y, min.z\n\t\t5: min.x, max.y, min.z\n\t\t6: min.x, min.y, min.z\n\t\t7: max.x, min.y, min.z\n\t\t*/\n\n\t\tvar position = this.geometry.attributes.position;\n\t\tvar array = position.array;\n\n\t\tarray[  0 ] = max.x; array[  1 ] = max.y; array[  2 ] = max.z;\n\t\tarray[  3 ] = min.x; array[  4 ] = max.y; array[  5 ] = max.z;\n\t\tarray[  6 ] = min.x; array[  7 ] = min.y; array[  8 ] = max.z;\n\t\tarray[  9 ] = max.x; array[ 10 ] = min.y; array[ 11 ] = max.z;\n\t\tarray[ 12 ] = max.x; array[ 13 ] = max.y; array[ 14 ] = min.z;\n\t\tarray[ 15 ] = min.x; array[ 16 ] = max.y; array[ 17 ] = min.z;\n\t\tarray[ 18 ] = min.x; array[ 19 ] = min.y; array[ 20 ] = min.z;\n\t\tarray[ 21 ] = max.x; array[ 22 ] = min.y; array[ 23 ] = min.z;\n\n\t\tposition.needsUpdate = true;\n\n\t\tthis.geometry.computeBoundingSphere();\n\n\t};\n\n} )();\n\nexport default BoxHelper;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/vendor/BoxHelper.js\n **/","import THREE from 'three';\n\nexport default function(colour) {\n  var canvas = document.createElement('canvas');\n  canvas.width = 1;\n  canvas.height = 1;\n\n  var context = canvas.getContext('2d');\n  context.fillStyle = colour;\n  context.fillRect(0, 0, canvas.width, canvas.height);\n  // context.strokeStyle = '#D0D0CF';\n  // context.strokeRect(0, 0, canvas.width, canvas.height);\n\n  var texture = new THREE.Texture(canvas);\n\n  // // Silky smooth images when tilted\n  // texture.magFilter = THREE.LinearFilter;\n  // texture.minFilter = THREE.LinearMipMapLinearFilter;\n  // //\n  // // // TODO: Set this to renderer.getMaxAnisotropy() / 4\n  // texture.anisotropy = 4;\n\n  // texture.wrapS = THREE.RepeatWrapping;\n  // texture.wrapT = THREE.RepeatWrapping;\n  // texture.repeat.set(segments, segments);\n\n  texture.needsUpdate = true;\n\n  var material = new THREE.MeshBasicMaterial({\n    map: texture,\n    depthWrite: false\n  });\n\n  return material;\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/layer/tile/GridBaseMaterial.js\n **/","/**\n * lodash 4.0.0 (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright 2012-2016 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2016 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\nvar debounce = require('lodash.debounce');\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide an options object to indicate whether\n * `func` should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is invoked\n * on the trailing edge of the timeout only if the the throttled function is\n * invoked more than once during the `wait` timeout.\n *\n * See [David Corbacho's article](http://drupalmotion.com/article/debounce-and-throttle-visual-explanation)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options] The options object.\n * @param {boolean} [options.leading=true] Specify invoking on the leading\n *  edge of the timeout.\n * @param {boolean} [options.trailing=true] Specify invoking on the trailing\n *  edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // avoid excessively updating the position while scrolling\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // invoke `renewToken` when the click event is fired, but not more than once every 5 minutes\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // cancel a trailing throttled invocation\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, { 'leading': leading, 'maxWait': wait, 'trailing': trailing });\n}\n\n/**\n * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.\n * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  // Avoid a V8 JIT bug in Chrome 19-20.\n  // See https://code.google.com/p/v8/issues/detail?id=2291 for more details.\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\nmodule.exports = throttle;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash.throttle/index.js\n ** module id = 46\n ** module chunks = 0\n **/","/**\n * lodash 4.0.1 (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright 2012-2016 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2016 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @type Function\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => logs the number of milliseconds it took for the deferred function to be invoked\n */\nvar now = Date.now;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide an options object to indicate whether `func` should be invoked on\n * the leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent calls\n * to the debounced function return the result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is invoked\n * on the trailing edge of the timeout only if the the debounced function is\n * invoked more than once during the `wait` timeout.\n *\n * See [David Corbacho's article](http://drupalmotion.com/article/debounce-and-throttle-visual-explanation)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options] The options object.\n * @param {boolean} [options.leading=false] Specify invoking on the leading\n *  edge of the timeout.\n * @param {number} [options.maxWait] The maximum time `func` is allowed to be\n *  delayed before it's invoked.\n * @param {boolean} [options.trailing=true] Specify invoking on the trailing\n *  edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var args,\n      maxTimeoutId,\n      result,\n      stamp,\n      thisArg,\n      timeoutId,\n      trailingCall,\n      lastCalled = 0,\n      leading = false,\n      maxWait = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxWait = 'maxWait' in options && nativeMax(toNumber(options.maxWait) || 0, wait);\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function cancel() {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n    if (maxTimeoutId) {\n      clearTimeout(maxTimeoutId);\n    }\n    lastCalled = 0;\n    args = maxTimeoutId = thisArg = timeoutId = trailingCall = undefined;\n  }\n\n  function complete(isCalled, id) {\n    if (id) {\n      clearTimeout(id);\n    }\n    maxTimeoutId = timeoutId = trailingCall = undefined;\n    if (isCalled) {\n      lastCalled = now();\n      result = func.apply(thisArg, args);\n      if (!timeoutId && !maxTimeoutId) {\n        args = thisArg = undefined;\n      }\n    }\n  }\n\n  function delayed() {\n    var remaining = wait - (now() - stamp);\n    if (remaining <= 0 || remaining > wait) {\n      complete(trailingCall, maxTimeoutId);\n    } else {\n      timeoutId = setTimeout(delayed, remaining);\n    }\n  }\n\n  function flush() {\n    if ((timeoutId && trailingCall) || (maxTimeoutId && trailing)) {\n      result = func.apply(thisArg, args);\n    }\n    cancel();\n    return result;\n  }\n\n  function maxDelayed() {\n    complete(trailing, timeoutId);\n  }\n\n  function debounced() {\n    args = arguments;\n    stamp = now();\n    thisArg = this;\n    trailingCall = trailing && (timeoutId || !leading);\n\n    if (maxWait === false) {\n      var leadingCall = leading && !timeoutId;\n    } else {\n      if (!maxTimeoutId && !leading) {\n        lastCalled = stamp;\n      }\n      var remaining = maxWait - (stamp - lastCalled),\n          isCalled = remaining <= 0 || remaining > maxWait;\n\n      if (isCalled) {\n        if (maxTimeoutId) {\n          maxTimeoutId = clearTimeout(maxTimeoutId);\n        }\n        lastCalled = stamp;\n        result = func.apply(thisArg, args);\n      }\n      else if (!maxTimeoutId) {\n        maxTimeoutId = setTimeout(maxDelayed, remaining);\n      }\n    }\n    if (isCalled && timeoutId) {\n      timeoutId = clearTimeout(timeoutId);\n    }\n    else if (!timeoutId && wait !== maxWait) {\n      timeoutId = setTimeout(delayed, wait);\n    }\n    if (leadingCall) {\n      isCalled = true;\n      result = func.apply(thisArg, args);\n    }\n    if (isCalled && !timeoutId && !maxTimeoutId) {\n      args = thisArg = undefined;\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8 which returns 'object' for typed array constructors, and\n  // PhantomJS 1.9 which returns 'function' for `NodeList` instances.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.\n * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3);\n * // => 3\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3');\n * // => 3\n */\nfunction toNumber(value) {\n  if (isObject(value)) {\n    var other = isFunction(value.valueOf) ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = debounce;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lodash.throttle/~/lodash.debounce/index.js\n ** module id = 47\n ** module chunks = 0\n **/"],"sourceRoot":"/source/"}